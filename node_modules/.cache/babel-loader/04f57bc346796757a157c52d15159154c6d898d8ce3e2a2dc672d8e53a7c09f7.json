{"ast":null,"code":"import axios from 'axios';\nconst state = {\n  assessmentDetails: null,\n  loading: false,\n  error: null\n};\nconst mutations = {\n  SET_ASSESSMENT_DETAILS(state, details) {\n    state.assessmentDetails = details;\n  },\n  SET_LOADING(state, loading) {\n    state.loading = loading;\n  },\n  SET_ERROR(state, error) {\n    state.error = error;\n  }\n};\nconst actions = {\n  // 获取健康评估详情\n  async fetchHealthAssessmentDetail({\n    commit\n  }, assessmentId) {\n    try {\n      commit('SET_LOADING', true);\n      const response = await axios.get(`/api/health-assessment/detail?assessment_id=${assessmentId}`);\n      commit('SET_ASSESSMENT_DETAILS', response.data.data);\n      return response.data;\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 提交健康评估\n  async submitHealthAssessment({\n    commit\n  }, assessmentData) {\n    try {\n      commit('SET_LOADING', true);\n      const response = await axios.post('/api/health-assessment/submit', assessmentData);\n      return response.data;\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    } finally {\n      commit('SET_LOADING', false);\n    }\n  },\n  // 上传医疗报告\n  async uploadMedicalReport({\n    commit\n  }, {\n    assessmentId,\n    reportType,\n    file\n  }) {\n    try {\n      const formData = new FormData();\n      formData.append('assessment_id', assessmentId);\n      formData.append('report_type', reportType);\n      formData.append('file', file);\n      const response = await axios.post('/api/medical-report/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      commit('SET_ERROR', error.message);\n      throw error;\n    }\n  }\n};\nconst getters = {\n  isLoading: state => state.loading,\n  getError: state => state.error,\n  getAssessmentDetails: state => state.assessmentDetails\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["axios","state","assessmentDetails","loading","error","mutations","SET_ASSESSMENT_DETAILS","details","SET_LOADING","SET_ERROR","actions","fetchHealthAssessmentDetail","commit","assessmentId","response","get","data","message","submitHealthAssessment","assessmentData","post","uploadMedicalReport","reportType","file","formData","FormData","append","headers","getters","isLoading","getError","getAssessmentDetails","namespaced"],"sources":["/Users/seaocean/projects/test/hospital/src/store/modules/healthAssessment.js"],"sourcesContent":["import axios from 'axios'\n\nconst state = {\n    assessmentDetails: null,\n    loading: false,\n    error: null\n}\n\nconst mutations = {\n    SET_ASSESSMENT_DETAILS(state, details) {\n        state.assessmentDetails = details\n    },\n    SET_LOADING(state, loading) {\n        state.loading = loading\n    },\n    SET_ERROR(state, error) {\n        state.error = error\n    }\n}\n\nconst actions = {\n    // 获取健康评估详情\n    async fetchHealthAssessmentDetail({ commit }, assessmentId) {\n        try {\n            commit('SET_LOADING', true)\n            const response = await axios.get(`/api/health-assessment/detail?assessment_id=${assessmentId}`)\n            commit('SET_ASSESSMENT_DETAILS', response.data.data)\n            return response.data\n        } catch (error) {\n            commit('SET_ERROR', error.message)\n            throw error\n        } finally {\n            commit('SET_LOADING', false)\n        }\n    },\n\n    // 提交健康评估\n    async submitHealthAssessment({ commit }, assessmentData) {\n        try {\n            commit('SET_LOADING', true)\n            const response = await axios.post('/api/health-assessment/submit', assessmentData)\n            return response.data\n        } catch (error) {\n            commit('SET_ERROR', error.message)\n            throw error\n        } finally {\n            commit('SET_LOADING', false)\n        }\n    },\n\n    // 上传医疗报告\n    async uploadMedicalReport({ commit }, { assessmentId, reportType, file }) {\n        try {\n            const formData = new FormData()\n            formData.append('assessment_id', assessmentId)\n            formData.append('report_type', reportType)\n            formData.append('file', file)\n\n            const response = await axios.post('/api/medical-report/upload', formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }\n            })\n            return response.data\n        } catch (error) {\n            commit('SET_ERROR', error.message)\n            throw error\n        }\n    }\n}\n\nconst getters = {\n    isLoading: state => state.loading,\n    getError: state => state.error,\n    getAssessmentDetails: state => state.assessmentDetails\n}\n\nexport default {\n    namespaced: true,\n    state,\n    mutations,\n    actions,\n    getters\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}