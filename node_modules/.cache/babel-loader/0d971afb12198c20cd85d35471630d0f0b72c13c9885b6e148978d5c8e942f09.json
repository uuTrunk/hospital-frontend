{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'HealthAssessment',\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      currentStep: 0,\n      patientInfo: {},\n      basicInfo: {\n        name: '',\n        gender: '',\n        age: '',\n        idCard: '',\n        phone: '',\n        emergencyContact: '',\n        emergencyPhone: ''\n      },\n      healthInfo: {\n        medicalHistory: [],\n        hasAllergies: false,\n        allergiesDetail: '',\n        selfCare: '',\n        remarks: ''\n      },\n      assessmentResult: {\n        conclusion: '',\n        suggestions: '',\n        doctor: ''\n      },\n      // 表单验证规则\n      basicRules: {\n        idCard: [{\n          required: true,\n          message: '请输入身份证号',\n          trigger: 'blur'\n        }, {\n          pattern: /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/,\n          message: '请输入正确的身份证号',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          message: '请输入联系电话',\n          trigger: 'blur'\n        }, {\n          pattern: /^1[3-9]\\d{9}$/,\n          message: '请输入正确的手机号码',\n          trigger: 'blur'\n        }],\n        emergencyContact: [{\n          required: true,\n          message: '请输入紧急联系人',\n          trigger: 'blur'\n        }],\n        emergencyPhone: [{\n          required: true,\n          message: '请输入紧急联系电话',\n          trigger: 'blur'\n        }, {\n          pattern: /^1[3-9]\\d{9}$/,\n          message: '请输入正确的手机号码',\n          trigger: 'blur'\n        }]\n      },\n      healthRules: {\n        medicalHistory: [{\n          type: 'array',\n          required: true,\n          message: '请选择既往病史',\n          trigger: 'change'\n        }],\n        selfCare: [{\n          required: true,\n          message: '请选择自理能力',\n          trigger: 'change'\n        }]\n      },\n      resultRules: {\n        conclusion: [{\n          required: true,\n          message: '请选择评估结论',\n          trigger: 'change'\n        }],\n        doctor: [{\n          required: true,\n          message: '请输入评估医生姓名',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.fetchPatientInfo();\n  },\n  methods: {\n    async fetchPatientInfo() {\n      try {\n        // 这里调用获取患者信息的 API\n        const response = await this.$store.dispatch('fetchHealthAssessmentDetail', this.id);\n        this.patientInfo = response.data;\n        // 填充基本信息\n        this.basicInfo = {\n          name: this.patientInfo.name,\n          gender: this.patientInfo.gender,\n          age: this.patientInfo.age,\n          idCard: this.patientInfo.idCard || '',\n          phone: this.patientInfo.phone || '',\n          emergencyContact: this.patientInfo.emergencyContact || '',\n          emergencyPhone: this.patientInfo.emergencyPhone || ''\n        };\n      } catch (error) {\n        this.$message.error('获取患者信息失败');\n      }\n    },\n    async nextStep() {\n      if (this.currentStep === 0) {\n        try {\n          await this.$refs.basicForm.validate();\n          this.currentStep++;\n        } catch (error) {\n          return;\n        }\n      } else if (this.currentStep === 1) {\n        try {\n          await this.$refs.healthForm.validate();\n          this.currentStep++;\n        } catch (error) {\n          return;\n        }\n      }\n    },\n    prevStep() {\n      if (this.currentStep > 0) {\n        this.currentStep--;\n      }\n    },\n    async submitAssessment() {\n      try {\n        await this.$refs.resultForm.validate();\n        const assessmentData = {\n          patientId: this.id,\n          basicInfo: this.basicInfo,\n          healthInfo: this.healthInfo,\n          assessmentResult: this.assessmentResult,\n          status: this.assessmentResult.conclusion === 'unsuitable' ? 'rejected' : 'completed',\n          time: new Date().toISOString(),\n          operator: this.assessmentResult.doctor\n        };\n        await this.$store.dispatch('updateHealthAssessment', assessmentData);\n        this.$message.success('评估提交成功');\n        this.$router.push('/assessment');\n      } catch (error) {\n        this.$message.error('提交失败，请检查表单');\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","id","type","String","required","data","currentStep","patientInfo","basicInfo","gender","age","idCard","phone","emergencyContact","emergencyPhone","healthInfo","medicalHistory","hasAllergies","allergiesDetail","selfCare","remarks","assessmentResult","conclusion","suggestions","doctor","basicRules","message","trigger","pattern","healthRules","resultRules","created","fetchPatientInfo","methods","response","$store","dispatch","error","$message","nextStep","$refs","basicForm","validate","healthForm","prevStep","submitAssessment","resultForm","assessmentData","patientId","status","time","Date","toISOString","operator","success","$router","push"],"sources":["src/views/HealthAssessment.vue"],"sourcesContent":["<template>\r\n  <div class=\"health-assessment\">\r\n    <div class=\"page-header\">\r\n      <div class=\"title\">\r\n        <span class=\"main-title\">健康评估</span>\r\n        <el-tag type=\"info\" size=\"medium\">{{ patientInfo.name }}</el-tag>\r\n      </div>\r\n      <div class=\"steps\">\r\n        <el-steps :active=\"currentStep\" finish-status=\"success\" align-center>\r\n          <el-step title=\"基本信息\"></el-step>\r\n          <el-step title=\"健康状况\"></el-step>\r\n          <el-step title=\"评估结果\"></el-step>\r\n        </el-steps>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-container\">\r\n      <!-- 步骤一：基本信息 -->\r\n      <el-form v-if=\"currentStep === 0\" ref=\"basicForm\" :model=\"basicInfo\" :rules=\"basicRules\" label-width=\"120px\">\r\n        <el-form-item label=\"姓名\" prop=\"name\">\r\n          <el-input v-model=\"basicInfo.name\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" prop=\"gender\">\r\n          <el-input v-model=\"basicInfo.gender\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"年龄\" prop=\"age\">\r\n          <el-input v-model=\"basicInfo.age\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"身份证号\" prop=\"idCard\">\r\n          <el-input v-model=\"basicInfo.idCard\" placeholder=\"请输入身份证号\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"联系电话\" prop=\"phone\">\r\n          <el-input v-model=\"basicInfo.phone\" placeholder=\"请输入联系电话\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"紧急联系人\" prop=\"emergencyContact\">\r\n          <el-input v-model=\"basicInfo.emergencyContact\" placeholder=\"请输入紧急联系人\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"紧急联系电话\" prop=\"emergencyPhone\">\r\n          <el-input v-model=\"basicInfo.emergencyPhone\" placeholder=\"请输入紧急联系电话\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <!-- 步骤二：健康状况 -->\r\n      <el-form v-if=\"currentStep === 1\" ref=\"healthForm\" :model=\"healthInfo\" :rules=\"healthRules\" label-width=\"120px\">\r\n        <el-form-item label=\"既往病史\" prop=\"medicalHistory\">\r\n          <el-checkbox-group v-model=\"healthInfo.medicalHistory\">\r\n            <el-checkbox label=\"高血压\">高血压</el-checkbox>\r\n            <el-checkbox label=\"糖尿病\">糖尿病</el-checkbox>\r\n            <el-checkbox label=\"心脏病\">心脏病</el-checkbox>\r\n            <el-checkbox label=\"其他\">其他</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"过敏史\" prop=\"allergies\">\r\n          <el-radio-group v-model=\"healthInfo.hasAllergies\">\r\n            <el-radio :label=\"true\">有</el-radio>\r\n            <el-radio :label=\"false\">无</el-radio>\r\n          </el-radio-group>\r\n          <el-input\r\n            v-if=\"healthInfo.hasAllergies\"\r\n            v-model=\"healthInfo.allergiesDetail\"\r\n            type=\"textarea\"\r\n            placeholder=\"请详细描述过敏情况\"\r\n            :rows=\"3\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"自理能力\" prop=\"selfCare\">\r\n          <el-radio-group v-model=\"healthInfo.selfCare\">\r\n            <el-radio label=\"完全自理\">完全自理</el-radio>\r\n            <el-radio label=\"部分自理\">部分自理</el-radio>\r\n            <el-radio label=\"完全依赖\">完全依赖</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\" prop=\"remarks\">\r\n          <el-input\r\n            type=\"textarea\"\r\n            v-model=\"healthInfo.remarks\"\r\n            placeholder=\"请输入其他需要说明的情况\"\r\n            :rows=\"4\">\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <!-- 步骤三：评估结果 -->\r\n      <el-form v-if=\"currentStep === 2\" ref=\"resultForm\" :model=\"assessmentResult\" :rules=\"resultRules\" label-width=\"120px\">\r\n        <el-form-item label=\"评估结论\" prop=\"conclusion\">\r\n          <el-radio-group v-model=\"assessmentResult.conclusion\">\r\n            <el-radio label=\"suitable\">适合入院</el-radio>\r\n            <el-radio label=\"unsuitable\">不适合入院</el-radio>\r\n            <el-radio label=\"conditional\">有条件入院</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item \r\n          label=\"入院建议\" \r\n          prop=\"suggestions\"\r\n          :required=\"assessmentResult.conclusion === 'conditional'\">\r\n          <el-input\r\n            type=\"textarea\"\r\n            v-model=\"assessmentResult.suggestions\"\r\n            placeholder=\"请输入入院建议\"\r\n            :rows=\"4\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"评估医生\" prop=\"doctor\">\r\n          <el-input v-model=\"assessmentResult.doctor\" placeholder=\"请输入评估医生姓名\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <div class=\"form-actions\">\r\n      <el-button v-if=\"currentStep > 0\" @click=\"prevStep\">上一步</el-button>\r\n      <el-button \r\n        v-if=\"currentStep < 2\" \r\n        type=\"primary\" \r\n        @click=\"nextStep\">\r\n        下一步\r\n      </el-button>\r\n      <el-button \r\n        v-else \r\n        type=\"primary\" \r\n        @click=\"submitAssessment\">\r\n        提交评估\r\n      </el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'HealthAssessment',\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentStep: 0,\r\n      patientInfo: {},\r\n      basicInfo: {\r\n        name: '',\r\n        gender: '',\r\n        age: '',\r\n        idCard: '',\r\n        phone: '',\r\n        emergencyContact: '',\r\n        emergencyPhone: ''\r\n      },\r\n      healthInfo: {\r\n        medicalHistory: [],\r\n        hasAllergies: false,\r\n        allergiesDetail: '',\r\n        selfCare: '',\r\n        remarks: ''\r\n      },\r\n      assessmentResult: {\r\n        conclusion: '',\r\n        suggestions: '',\r\n        doctor: ''\r\n      },\r\n      // 表单验证规则\r\n      basicRules: {\r\n        idCard: [\r\n          { required: true, message: '请输入身份证号', trigger: 'blur' },\r\n          { pattern: /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/, message: '请输入正确的身份证号', trigger: 'blur' }\r\n        ],\r\n        phone: [\r\n          { required: true, message: '请输入联系电话', trigger: 'blur' },\r\n          { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号码', trigger: 'blur' }\r\n        ],\r\n        emergencyContact: [\r\n          { required: true, message: '请输入紧急联系人', trigger: 'blur' }\r\n        ],\r\n        emergencyPhone: [\r\n          { required: true, message: '请输入紧急联系电话', trigger: 'blur' },\r\n          { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号码', trigger: 'blur' }\r\n        ]\r\n      },\r\n      healthRules: {\r\n        medicalHistory: [\r\n          { type: 'array', required: true, message: '请选择既往病史', trigger: 'change' }\r\n        ],\r\n        selfCare: [\r\n          { required: true, message: '请选择自理能力', trigger: 'change' }\r\n        ]\r\n      },\r\n      resultRules: {\r\n        conclusion: [\r\n          { required: true, message: '请选择评估结论', trigger: 'change' }\r\n        ],\r\n        doctor: [\r\n          { required: true, message: '请输入评估医生姓名', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchPatientInfo()\r\n  },\r\n  methods: {\r\n    async fetchPatientInfo() {\r\n      try {\r\n        // 这里调用获取患者信息的 API\r\n        const response = await this.$store.dispatch('fetchHealthAssessmentDetail', this.id)\r\n        this.patientInfo = response.data\r\n        // 填充基本信息\r\n        this.basicInfo = {\r\n          name: this.patientInfo.name,\r\n          gender: this.patientInfo.gender,\r\n          age: this.patientInfo.age,\r\n          idCard: this.patientInfo.idCard || '',\r\n          phone: this.patientInfo.phone || '',\r\n          emergencyContact: this.patientInfo.emergencyContact || '',\r\n          emergencyPhone: this.patientInfo.emergencyPhone || ''\r\n        }\r\n      } catch (error) {\r\n        this.$message.error('获取患者信息失败')\r\n      }\r\n    },\r\n    async nextStep() {\r\n      if (this.currentStep === 0) {\r\n        try {\r\n          await this.$refs.basicForm.validate()\r\n          this.currentStep++\r\n        } catch (error) {\r\n          return\r\n        }\r\n      } else if (this.currentStep === 1) {\r\n        try {\r\n          await this.$refs.healthForm.validate()\r\n          this.currentStep++\r\n        } catch (error) {\r\n          return\r\n        }\r\n      }\r\n    },\r\n    prevStep() {\r\n      if (this.currentStep > 0) {\r\n        this.currentStep--\r\n      }\r\n    },\r\n    async submitAssessment() {\r\n      try {\r\n        await this.$refs.resultForm.validate()\r\n        \r\n        const assessmentData = {\r\n          patientId: this.id,\r\n          basicInfo: this.basicInfo,\r\n          healthInfo: this.healthInfo,\r\n          assessmentResult: this.assessmentResult,\r\n          status: this.assessmentResult.conclusion === 'unsuitable' ? 'rejected' : 'completed',\r\n          time: new Date().toISOString(),\r\n          operator: this.assessmentResult.doctor\r\n        }\r\n\r\n        await this.$store.dispatch('updateHealthAssessment', assessmentData)\r\n        this.$message.success('评估提交成功')\r\n        this.$router.push('/assessment')\r\n      } catch (error) {\r\n        this.$message.error('提交失败，请检查表单')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.health-assessment {\r\n  background: #fff;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n  min-height: calc(100vh - 140px);\r\n\r\n  .page-header {\r\n    margin-bottom: 30px;\r\n\r\n    .title {\r\n      margin-bottom: 20px;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n\r\n      .main-title {\r\n        font-size: 20px;\r\n        font-weight: 500;\r\n        color: #303133;\r\n      }\r\n    }\r\n\r\n    .steps {\r\n      margin: 20px 0 30px;\r\n    }\r\n  }\r\n\r\n  .form-container {\r\n    max-width: 800px;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n\r\n    .el-form-item {\r\n      margin-bottom: 22px;\r\n\r\n      /deep/ .el-form-item__label {\r\n        font-weight: 500;\r\n      }\r\n    }\r\n\r\n    .el-checkbox-group {\r\n      display: flex;\r\n      gap: 20px;\r\n  <div class=\"assessment-detail-container\">\r\n    <!-- 患者信息卡片 -->\r\n    <div class=\"patient-info-card\">\r\n      <div class=\"card-header\">\r\n        <i class=\"card-icon\"></i>\r\n        <span>患者信息</span>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <div class=\"info-row\">\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">姓名：</span>\r\n            <span class=\"info-value\">{{ patient.name }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">性别：</span>\r\n            <span class=\"info-value\">{{ patient.gender }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">年龄：</span>\r\n            <span class=\"info-value\">{{ patient.age }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">身份证号：</span>\r\n            <span class=\"info-value\">{{ patient.idNumber }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"info-row\">\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">登记时间：</span>\r\n            <span class=\"info-value\">{{ patient.registrationTime }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 评估选项卡 -->\r\n    <div class=\"assessment-tabs\">\r\n      <div \r\n        class=\"tab-item\" \r\n        :class=\"{ active: activeTab === 'health' }\"\r\n        @click=\"activeTab = 'health'\"\r\n      >\r\n        健康评估\r\n      </div>\r\n      <div \r\n        class=\"tab-item\" \r\n        :class=\"{ active: activeTab === 'care' }\"\r\n        @click=\"activeTab = 'care'\"\r\n      >\r\n        首次照护评估\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 健康评估内容 -->\r\n    <div v-if=\"activeTab === 'health'\" class=\"assessment-content\">\r\n      <!-- 评估信息部分 -->\r\n      <div class=\"assessment-section\">\r\n        <h3 class=\"section-title\">评估信息</h3>\r\n        <div class=\"section-content\">\r\n          <div class=\"history-item\">\r\n            <span class=\"history-label\">现病史</span>\r\n            <div class=\"history-actions\">\r\n              <div class=\"symptom-tag\" v-for=\"symptom in currentIllnesses\" :key=\"symptom.id\">\r\n                {{ symptom.name }} <i class=\"icon-close\" @click=\"removeSymptom('current', symptom.id)\"></i>\r\n              </div>\r\n              <div class=\"search-wrapper\">\r\n                <input \r\n                  type=\"text\" \r\n                  class=\"search-symptom\" \r\n                  placeholder=\"请输入疾病名称\" \r\n                  v-model=\"currentSearchKeyword\"\r\n                  @input=\"searchSymptoms('current')\"\r\n                  @focus=\"showCurrentSuggestions = true\"\r\n                  @blur=\"hideSuggestionsDelayed('current')\"\r\n                />\r\n                <div class=\"suggestions\" v-show=\"showCurrentSuggestions && currentFilteredSymptoms.length > 0\">\r\n                  <div \r\n                    v-for=\"symptom in currentFilteredSymptoms\" \r\n                    :key=\"symptom.id\" \r\n                    class=\"suggestion-item\"\r\n                    @click=\"addSymptom('current', symptom)\"\r\n                    @mousedown.prevent\r\n                  >\r\n                    {{ symptom.name }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <span class=\"tip\">填写现有疾病名称</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"history-item\">\r\n            <span class=\"history-label\">既往病史</span>\r\n            <div class=\"history-actions\">\r\n              <div class=\"symptom-tag\" v-for=\"symptom in pastIllnesses\" :key=\"symptom.id\">\r\n                {{ symptom.name }} <i class=\"icon-close\" @click=\"removeSymptom('past', symptom.id)\"></i>\r\n              </div>\r\n              <div class=\"search-wrapper\">\r\n                <input \r\n                  type=\"text\" \r\n                  class=\"search-symptom\" \r\n                  placeholder=\"请输入疾病名称\" \r\n                  v-model=\"pastSearchKeyword\"\r\n                  @input=\"searchSymptoms('past')\"\r\n                  @focus=\"showPastSuggestions = true\"\r\n                  @blur=\"hideSuggestionsDelayed('past')\"\r\n                />\r\n                <div class=\"suggestions\" v-show=\"showPastSuggestions && pastFilteredSymptoms.length > 0\">\r\n                  <div \r\n                    v-for=\"symptom in pastFilteredSymptoms\" \r\n                    :key=\"symptom.id\" \r\n                    class=\"suggestion-item\"\r\n                    @click=\"addSymptom('past', symptom)\"\r\n                    @mousedown.prevent\r\n                  >\r\n                    {{ symptom.name }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <span class=\"tip\">填写曾经患有的疾病名称</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"history-item\">\r\n            <span class=\"history-label\">禁忌药品</span>\r\n            <textarea\r\n              v-model=\"medicalForm.forbiddenMedicine\"\r\n              placeholder=\"请输入禁忌药品\"\r\n              class=\"history-textarea\"\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 上传检查报告 -->\r\n      <div class=\"assessment-section\">\r\n        <h3 class=\"section-title\">上传检查报告</h3>\r\n        <div class=\"section-content\">\r\n          <div class=\"upload-tip\">\r\n            仅支持jpg、png格式，且不超过5M\r\n          </div>\r\n\r\n          <div class=\"upload-items\">\r\n            <div class=\"upload-item\">\r\n              <span class=\"upload-label\">生化检验</span>\r\n              <div class=\"upload-actions\">\r\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.biochemical && uploadFiles.biochemical.length\">\r\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.biochemical\" :key=\"index\">\r\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\r\n                    <div class=\"preview-delete\" @click=\"removeFile('biochemical', index)\">×</div>\r\n                  </div>\r\n                  <div class=\"preview-count\" v-if=\"uploadFiles.biochemical.length > 0\">\r\n                    {{ uploadFiles.biochemical.length }}/5\r\n                  </div>\r\n                </div>\r\n                <label class=\"upload-btn\" v-if=\"uploadFiles.biochemical.length < 5\">\r\n                  <input \r\n                    type=\"file\" \r\n                    accept=\"image/jpeg,image/png\" \r\n                    @change=\"handleFileUpload($event, 'biochemical')\" \r\n                    style=\"display:none\" \r\n                  />\r\n                  <i class=\"icon-plus\"></i>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"upload-item\">\r\n              <span class=\"upload-label\">X光</span>\r\n              <div class=\"upload-actions\">\r\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.xray && uploadFiles.xray.length\">\r\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.xray\" :key=\"index\">\r\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\r\n                    <div class=\"preview-delete\" @click=\"removeFile('xray', index)\">×</div>\r\n                  </div>\r\n                  <div class=\"preview-count\" v-if=\"uploadFiles.xray.length > 0\">\r\n                    {{ uploadFiles.xray.length }}/5\r\n                  </div>\r\n                </div>\r\n                <label class=\"upload-btn\" v-if=\"uploadFiles.xray.length < 5\">\r\n                  <input \r\n                    type=\"file\" \r\n                    accept=\"image/jpeg,image/png\" \r\n                    @change=\"handleFileUpload($event, 'xray')\" \r\n                    style=\"display:none\" \r\n                  />\r\n                  <i class=\"icon-plus\"></i>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"upload-item\">\r\n              <span class=\"upload-label\">超声检查</span>\r\n              <div class=\"upload-actions\">\r\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.ultrasound && uploadFiles.ultrasound.length\">\r\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.ultrasound\" :key=\"index\">\r\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\r\n                    <div class=\"preview-delete\" @click=\"removeFile('ultrasound', index)\">×</div>\r\n                  </div>\r\n                  <div class=\"preview-count\" v-if=\"uploadFiles.ultrasound.length > 0\">\r\n                    {{ uploadFiles.ultrasound.length }}/5\r\n                  </div>\r\n                </div>\r\n                <label class=\"upload-btn\" v-if=\"uploadFiles.ultrasound.length < 5\">\r\n                  <input \r\n                    type=\"file\" \r\n                    accept=\"image/jpeg,image/png\" \r\n                    @change=\"handleFileUpload($event, 'ultrasound')\" \r\n                    style=\"display:none\" \r\n                  />\r\n                  <i class=\"icon-plus\"></i>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"upload-item\">\r\n              <span class=\"upload-label\">心电图</span>\r\n              <div class=\"upload-actions\">\r\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.ecg && uploadFiles.ecg.length\">\r\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.ecg\" :key=\"index\">\r\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\r\n                    <div class=\"preview-delete\" @click=\"removeFile('ecg', index)\">×</div>\r\n                  </div>\r\n                  <div class=\"preview-count\" v-if=\"uploadFiles.ecg.length > 0\">\r\n                    {{ uploadFiles.ecg.length }}/5\r\n                  </div>\r\n                </div>\r\n                <label class=\"upload-btn\" v-if=\"uploadFiles.ecg.length < 5\">\r\n                  <input \r\n                    type=\"file\" \r\n                    accept=\"image/jpeg,image/png\" \r\n                    @change=\"handleFileUpload($event, 'ecg')\" \r\n                    style=\"display:none\" \r\n                  />\r\n                  <i class=\"icon-plus\"></i>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"upload-item\">\r\n              <span class=\"upload-label\">CT</span>\r\n              <div class=\"upload-actions\">\r\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.ct && uploadFiles.ct.length\">\r\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.ct\" :key=\"index\">\r\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\r\n                    <div class=\"preview-delete\" @click=\"removeFile('ct', index)\">×</div>\r\n                  </div>\r\n                  <div class=\"preview-count\" v-if=\"uploadFiles.ct.length > 0\">\r\n                    {{ uploadFiles.ct.length }}/5\r\n                  </div>\r\n                </div>\r\n                <label class=\"upload-btn\" v-if=\"uploadFiles.ct.length < 5\">\r\n                  <input \r\n                    type=\"file\" \r\n                    accept=\"image/jpeg,image/png\" \r\n                    @change=\"handleFileUpload($event, 'ct')\" \r\n                    style=\"display:none\" \r\n                  />\r\n                  <i class=\"icon-plus\"></i>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"upload-item\">\r\n              <span class=\"upload-label\">其他</span>\r\n              <div class=\"upload-actions\">\r\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.other && uploadFiles.other.length\">\r\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.other\" :key=\"index\">\r\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\r\n                    <div class=\"preview-delete\" @click=\"removeFile('other', index)\">×</div>\r\n                  </div>\r\n                  <div class=\"preview-count\" v-if=\"uploadFiles.other.length > 0\">\r\n                    {{ uploadFiles.other.length }}/5\r\n                  </div>\r\n                </div>\r\n                <label class=\"upload-btn\" v-if=\"uploadFiles.other.length < 5\">\r\n                  <input \r\n                    type=\"file\" \r\n                    accept=\"image/jpeg,image/png\" \r\n                    @change=\"handleFileUpload($event, 'other')\" \r\n                    style=\"display:none\" \r\n                  />\r\n                  <i class=\"icon-plus\"></i>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 饮食禁忌 -->\r\n      <div class=\"assessment-section\">\r\n        <h3 class=\"section-title\">饮食禁忌</h3>\r\n        <div class=\"section-content\">\r\n          <div class=\"diet-container\">\r\n            <div class=\"diet-row\">\r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.noSpicy\">\r\n                <span>无辣椒</span>\r\n              </label>\r\n              \r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.liquidDiet\">\r\n                <span>流质</span>\r\n              </label>\r\n              \r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.semiLiquidDiet\">\r\n                <span>半流质</span>\r\n              </label>\r\n              \r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.softDiet\">\r\n                <span>软食</span>\r\n              </label>\r\n            </div>\r\n\r\n            <div class=\"diet-row\">\r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.lowSalt\">\r\n                <span>低盐</span>\r\n              </label>\r\n              \r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.lowSugar\">\r\n                <span>低糖</span>\r\n              </label>\r\n              \r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.diabeticDiet\">\r\n                <span>糖尿病饮食</span>\r\n              </label>\r\n              \r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.renalDiet\">\r\n                <span>肾食</span>\r\n              </label>\r\n            </div>\r\n\r\n            <div class=\"diet-row\">\r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.highSalt\">\r\n                <span>高盐</span>\r\n              </label>\r\n              \r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.highSugar\">\r\n                <span>高糖</span>\r\n              </label>\r\n              \r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.highFat\">\r\n                <span>高脂</span>\r\n              </label>\r\n              \r\n              <label class=\"diet-option\">\r\n                <input type=\"checkbox\" v-model=\"diet.seafood\">\r\n                <span>海鲜</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 体检报告结论 -->\r\n      <div class=\"assessment-section\">\r\n        <h3 class=\"section-title\">体检报告结论<span class=\"required\">*</span></h3>\r\n        <div class=\"section-content\">\r\n          <textarea\r\n            v-model=\"medicalForm.conclusion\"\r\n            placeholder=\"输入结论\"\r\n            class=\"conclusion-textarea\"\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 入院决定 -->\r\n      <div class=\"assessment-section\">\r\n        <div class=\"admission-decision\">\r\n          <label class=\"radio-option\">\r\n            <input type=\"radio\" v-model=\"medicalForm.admissionDecision\" value=\"admit\">\r\n            <span>同意入院</span>\r\n          </label>\r\n          \r\n          <label class=\"radio-option\">\r\n            <input type=\"radio\" v-model=\"medicalForm.admissionDecision\" value=\"reject\">\r\n            <span>不同意入院</span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 操作按钮 -->\r\n      <div class=\"action-buttons\">\r\n        <button class=\"save-btn\" @click=\"saveAssessment\">保存</button>\r\n        <button class=\"cancel-btn\" @click=\"cancelAssessment\">取消</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 首次照护评估内容 -->\r\n    <div v-if=\"activeTab === 'care'\" class=\"assessment-content\">\r\n      <!-- 生活自理能力评估 -->\r\n      <div class=\"assessment-section\">\r\n        <div class=\"care-assessment-item\">\r\n          <div class=\"care-label\">生活自理能力</div>\r\n          <div class=\"care-content\">\r\n            <div class=\"care-slider-container\">\r\n              <div class=\"slider-label\">生活料理能力</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.daily === 0 }\"\r\n                    @click=\"setCareLevel('selfCare', 'daily', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.daily === 1 }\"\r\n                    @click=\"setCareLevel('selfCare', 'daily', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.daily === 2 }\"\r\n                    @click=\"setCareLevel('selfCare', 'daily', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.daily === 3 }\"\r\n                    @click=\"setCareLevel('selfCare', 'daily', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('selfCare', 'daily') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"slider-label\">进食能力</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.eating === 0 }\"\r\n                    @click=\"setCareLevel('selfCare', 'eating', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.eating === 1 }\"\r\n                    @click=\"setCareLevel('selfCare', 'eating', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.eating === 2 }\"\r\n                    @click=\"setCareLevel('selfCare', 'eating', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.eating === 3 }\"\r\n                    @click=\"setCareLevel('selfCare', 'eating', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('selfCare', 'eating') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"slider-label\">如厕能力</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.toilet === 0 }\"\r\n                    @click=\"setCareLevel('selfCare', 'toilet', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.toilet === 1 }\"\r\n                    @click=\"setCareLevel('selfCare', 'toilet', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.toilet === 2 }\"\r\n                    @click=\"setCareLevel('selfCare', 'toilet', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.selfCare.toilet === 3 }\"\r\n                    @click=\"setCareLevel('selfCare', 'toilet', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('selfCare', 'toilet') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"reason-label\">评估说明</div>\r\n              <div class=\"reason-textarea-container\">\r\n                <textarea \r\n                  class=\"reason-textarea\" \r\n                  v-model=\"careForm.selfCare.notes\" \r\n                  placeholder=\"输入评价\"\r\n                ></textarea>\r\n                <div class=\"reason-note\" v-if=\"careForm.selfCare.notes.length > 0\">!</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 认知能力评估 -->\r\n      <div class=\"assessment-section\">\r\n        <div class=\"care-assessment-item\">\r\n          <div class=\"care-label\">认知能力</div>\r\n          <div class=\"care-content\">\r\n            <div class=\"care-slider-container\">\r\n              <div class=\"slider-label\">环境认知</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.environment === 0 }\"\r\n                    @click=\"setCareLevel('cognition', 'environment', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.environment === 1 }\"\r\n                    @click=\"setCareLevel('cognition', 'environment', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.environment === 2 }\"\r\n                    @click=\"setCareLevel('cognition', 'environment', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.environment === 3 }\"\r\n                    @click=\"setCareLevel('cognition', 'environment', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('cognition', 'environment') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"slider-label\">时间认知</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.time === 0 }\"\r\n                    @click=\"setCareLevel('cognition', 'time', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.time === 1 }\"\r\n                    @click=\"setCareLevel('cognition', 'time', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.time === 2 }\"\r\n                    @click=\"setCareLevel('cognition', 'time', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.time === 3 }\"\r\n                    @click=\"setCareLevel('cognition', 'time', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('cognition', 'time') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"slider-label\">人物认知</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.people === 0 }\"\r\n                    @click=\"setCareLevel('cognition', 'people', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.people === 1 }\"\r\n                    @click=\"setCareLevel('cognition', 'people', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.people === 2 }\"\r\n                    @click=\"setCareLevel('cognition', 'people', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.cognition.people === 3 }\"\r\n                    @click=\"setCareLevel('cognition', 'people', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('cognition', 'people') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"reason-label\">评估说明</div>\r\n              <div class=\"reason-textarea-container\">\r\n                <textarea \r\n                  class=\"reason-textarea\" \r\n                  v-model=\"careForm.cognition.notes\" \r\n                  placeholder=\"输入评价\"\r\n                ></textarea>\r\n                <div class=\"reason-note\" v-if=\"careForm.cognition.notes.length > 0\">!</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 情绪行为评估 -->\r\n      <div class=\"assessment-section\">\r\n        <div class=\"care-assessment-item\">\r\n          <div class=\"care-label\">情绪行为</div>\r\n          <div class=\"care-content\">\r\n            <div class=\"care-slider-container\">\r\n              <div class=\"slider-label\">焦虑程度</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.anxiety === 0 }\"\r\n                    @click=\"setCareLevel('emotion', 'anxiety', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.anxiety === 1 }\"\r\n                    @click=\"setCareLevel('emotion', 'anxiety', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.anxiety === 2 }\"\r\n                    @click=\"setCareLevel('emotion', 'anxiety', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.anxiety === 3 }\"\r\n                    @click=\"setCareLevel('emotion', 'anxiety', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('emotion', 'anxiety') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"slider-label\">抑郁程度</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.depression === 0 }\"\r\n                    @click=\"setCareLevel('emotion', 'depression', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.depression === 1 }\"\r\n                    @click=\"setCareLevel('emotion', 'depression', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.depression === 2 }\"\r\n                    @click=\"setCareLevel('emotion', 'depression', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.depression === 3 }\"\r\n                    @click=\"setCareLevel('emotion', 'depression', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('emotion', 'depression') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"slider-label\">行为异常</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.behavior === 0 }\"\r\n                    @click=\"setCareLevel('emotion', 'behavior', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.behavior === 1 }\"\r\n                    @click=\"setCareLevel('emotion', 'behavior', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.behavior === 2 }\"\r\n                    @click=\"setCareLevel('emotion', 'behavior', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.emotion.behavior === 3 }\"\r\n                    @click=\"setCareLevel('emotion', 'behavior', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('emotion', 'behavior') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"reason-label\">评估说明</div>\r\n              <div class=\"reason-textarea-container\">\r\n                <textarea \r\n                  class=\"reason-textarea\" \r\n                  v-model=\"careForm.emotion.notes\" \r\n                  placeholder=\"输入评价\"\r\n                ></textarea>\r\n                <div class=\"reason-note\" v-if=\"careForm.emotion.notes.length > 0\">!</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 极端情况评估 -->\r\n      <div class=\"assessment-section\">\r\n        <div class=\"care-assessment-item\">\r\n          <div class=\"care-label\">极端情况</div>\r\n          <div class=\"care-content\">\r\n            <div class=\"care-slider-container\">\r\n              <div class=\"slider-label\">自伤倾向</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.extreme.selfHarm === 0 }\"\r\n                    @click=\"setCareLevel('extreme', 'selfHarm', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.extreme.selfHarm === 1 }\"\r\n                    @click=\"setCareLevel('extreme', 'selfHarm', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.extreme.selfHarm === 2 }\"\r\n                    @click=\"setCareLevel('extreme', 'selfHarm', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.extreme.selfHarm === 3 }\"\r\n                    @click=\"setCareLevel('extreme', 'selfHarm', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('extreme', 'selfHarm') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"slider-label\">攻击倾向</div>\r\n              <div class=\"slider-container\">\r\n                <div class=\"slider-track\">\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.extreme.aggression === 0 }\"\r\n                    @click=\"setCareLevel('extreme', 'aggression', 0)\"\r\n                  >正常</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.extreme.aggression === 1 }\"\r\n                    @click=\"setCareLevel('extreme', 'aggression', 1)\"\r\n                  >轻度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.extreme.aggression === 2 }\"\r\n                    @click=\"setCareLevel('extreme', 'aggression', 2)\"\r\n                  >中度</div>\r\n                  <div \r\n                    class=\"slider-level\" \r\n                    :class=\"{ active: careForm.extreme.aggression === 3 }\"\r\n                    @click=\"setCareLevel('extreme', 'aggression', 3)\"\r\n                  >重度</div>\r\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('extreme', 'aggression') }\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"reason-label\">评估说明</div>\r\n              <div class=\"reason-textarea-container\">\r\n                <textarea \r\n                  class=\"reason-textarea\" \r\n                  v-model=\"careForm.extreme.notes\" \r\n                  placeholder=\"输入评价\"\r\n                ></textarea>\r\n                <div class=\"reason-note\" v-if=\"careForm.extreme.notes.length > 0\">!</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 操作按钮 -->\r\n      <div class=\"action-buttons\">\r\n        <button class=\"save-btn\" @click=\"saveCareAssessment\">保存</button>\r\n        <button class=\"cancel-btn\" @click=\"cancelAssessment\">取消</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 症状选择对话框 -->\r\n    <symptom-dialog\r\n      :visible=\"dialogVisible\"\r\n      :type=\"dialogType\"\r\n      :initial-selected=\"dialogInitialSelected\"\r\n      @confirm=\"confirmSymptoms\"\r\n      @cancel=\"cancelDialog\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport SymptomDialog from '../components/SymptomDialog.vue'\r\n\r\nexport default {\r\n  name: 'HealthAssessment',\r\n  components: {\r\n    SymptomDialog\r\n  },\r\n  props: {\r\n    id: {\r\n      type: [Number, String],\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      activeTab: 'health',\r\n      dialogVisible: false,\r\n      dialogType: '',\r\n      dialogMode: '',\r\n      dialogInitialSelected: [],\r\n      currentIllnesses: [],\r\n      pastIllnesses: [],\r\n      diet: {\r\n        noSpicy: false,\r\n        liquidDiet: false,\r\n        semiLiquidDiet: false,\r\n        softDiet: false,\r\n        lowSalt: false,\r\n        lowSugar: false,\r\n        diabeticDiet: false,\r\n        renalDiet: false,\r\n        highSalt: false,\r\n        highSugar: false,\r\n        highFat: false,\r\n        seafood: false\r\n      },\r\n      uploadFiles: {\r\n        biochemical: [],\r\n        xray: [],\r\n        ultrasound: [],\r\n        ecg: [],\r\n        ct: [],\r\n        other: []\r\n      },\r\n      medicalForm: {\r\n        forbiddenMedicine: '',\r\n        conclusion: '',\r\n        admissionDecision: 'admit'\r\n      },\r\n      currentSearchKeyword: '',\r\n      showCurrentSuggestions: false,\r\n      currentFilteredSymptoms: [],\r\n      pastSearchKeyword: '',\r\n      showPastSuggestions: false,\r\n      pastFilteredSymptoms: [],\r\n      allSymptoms: [], // 所有可选症状的列表\r\n      careForm: {\r\n        selfCare: { \r\n          daily: 0, \r\n          eating: 0, \r\n          toilet: 0, \r\n          notes: '' \r\n        },\r\n        cognition: { \r\n          environment: 0, \r\n          time: 0, \r\n          people: 0, \r\n          notes: '' \r\n        },\r\n        emotion: { \r\n          anxiety: 0, \r\n          depression: 0, \r\n          behavior: 0, \r\n          notes: '' \r\n        },\r\n        extreme: { \r\n          selfHarm: 0, \r\n          aggression: 0, \r\n          notes: '' \r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      patients: state => state.patients\r\n    }),\r\n    patient() {\r\n      // 从Vuex状态中获取患者数据\r\n      const patientId = parseInt(this.id);\r\n      return this.patients.find(p => p.id === patientId) || {\r\n        name: '',\r\n        gender: '',\r\n        age: '',\r\n        idNumber: '',\r\n        registrationTime: ''\r\n      };\r\n    }\r\n  },\r\n  methods: {\r\n    async loadAssessmentDetails() {\r\n      try {\r\n        const response = await this.$store.dispatch('fetchHealthAssessmentDetail', this.id);\r\n        const details = response.data;\r\n        \r\n        if (details.currentIllness) {\r\n          this.currentIllnesses = details.currentIllness.map(item => ({\r\n            id: item.id,\r\n            name: item.name\r\n          }));\r\n        }\r\n        \r\n        if (details.dietRestrictions) {\r\n          this.diet = {\r\n            noSpicy: false,\r\n            liquidDiet: false,\r\n            semiLiquidDiet: false,\r\n            softDiet: false,\r\n            lowSalt: details.dietRestrictions.some(item => item.name === '低盐饮食'),\r\n            lowSugar: details.dietRestrictions.some(item => item.name === '低糖饮食'),\r\n            diabeticDiet: false,\r\n            renalDiet: false,\r\n            highSalt: false,\r\n            highSugar: false,\r\n            highFat: false,\r\n            seafood: false\r\n          };\r\n        }\r\n        \r\n        if (details.forbiddenMedicines) {\r\n          this.medicalForm.forbiddenMedicine = details.forbiddenMedicines;\r\n        }\r\n        \r\n        if (details.physicalConclusion) {\r\n          this.medicalForm.conclusion = details.physicalConclusion;\r\n        }\r\n        \r\n        if (details.admissionAgreement === '同意入院') {\r\n          this.medicalForm.admissionDecision = 'admit';\r\n        } else {\r\n          this.medicalForm.admissionDecision = 'reject';\r\n        }\r\n      } catch (error) {\r\n        console.error('加载评估详情失败:', error);\r\n      }\r\n    },\r\n    // 加载所有可选症状\r\n    loadAllSymptoms() {\r\n      // 常见疾病分类\r\n      const symptomsCategories = {\r\n        '心脏类': [\r\n          { id: 1, name: '高血压' },\r\n          { id: 2, name: '心脏病' },\r\n          { id: 3, name: '心绞痛' },\r\n          { id: 4, name: '冠心病' },\r\n          { id: 5, name: '心律不齐' }\r\n        ],\r\n        '神经类': [\r\n          { id: 6, name: '头痛' },\r\n          { id: 7, name: '偏头痛' },\r\n          { id: 8, name: '癫痫' },\r\n          { id: 9, name: '帕金森' },\r\n          { id: 10, name: '失眠' }\r\n        ],\r\n        '消化系统': [\r\n          { id: 11, name: '胃病' },\r\n          { id: 12, name: '胃炎' },\r\n          { id: 13, name: '胃溃疡' },\r\n          { id: 14, name: '肠炎' },\r\n          { id: 15, name: '十二指肠溃疡' }\r\n        ],\r\n        '呼吸系统': [\r\n          { id: 16, name: '哮喘' },\r\n          { id: 17, name: '支气管炎' },\r\n          { id: 18, name: '肺炎' },\r\n          { id: 19, name: '肺结核' },\r\n          { id: 20, name: '肺气肿' }\r\n        ],\r\n        '代谢类': [\r\n          { id: 21, name: '糖尿病' },\r\n          { id: 22, name: '高血脂' },\r\n          { id: 23, name: '痛风' },\r\n          { id: 24, name: '肥胖' },\r\n          { id: 25, name: '甲状腺功能亢进' }\r\n        ]\r\n      };\r\n\r\n      // 合并所有分类的疾病到一个数组\r\n      this.allSymptoms = Object.values(symptomsCategories).flat();\r\n    },\r\n    // 搜索症状\r\n    searchSymptoms(type) {\r\n      const keyword = type === 'current' ? this.currentSearchKeyword : this.pastSearchKeyword;\r\n      \r\n      if (!keyword) {\r\n        if (type === 'current') {\r\n          this.currentFilteredSymptoms = [];\r\n        } else {\r\n          this.pastFilteredSymptoms = [];\r\n        }\r\n        return;\r\n      }\r\n      \r\n      // 过滤已经添加的症状\r\n      const existingIds = type === 'current' \r\n        ? this.currentIllnesses.map(s => s.id)\r\n        : this.pastIllnesses.map(s => s.id);\r\n      \r\n      // 过滤匹配关键词且未添加的症状\r\n      const filtered = this.allSymptoms.filter(symptom => \r\n        symptom.name.toLowerCase().includes(keyword.toLowerCase()) && \r\n        !existingIds.includes(symptom.id)\r\n      );\r\n      \r\n      if (type === 'current') {\r\n        this.currentFilteredSymptoms = filtered;\r\n      } else {\r\n        this.pastFilteredSymptoms = filtered;\r\n      }\r\n    },\r\n    // 添加症状\r\n    addSymptom(type, symptom) {\r\n      if (type === 'current') {\r\n        if (!this.currentIllnesses.some(s => s.id === symptom.id)) {\r\n          this.currentIllnesses.push(symptom);\r\n          this.currentSearchKeyword = '';\r\n          this.currentFilteredSymptoms = [];\r\n        }\r\n      } else if (type === 'past') {\r\n        if (!this.pastIllnesses.some(s => s.id === symptom.id)) {\r\n          this.pastIllnesses.push(symptom);\r\n          this.pastSearchKeyword = '';\r\n          this.pastFilteredSymptoms = [];\r\n        }\r\n      }\r\n    },\r\n    // 移除症状\r\n    removeSymptom(type, id) {\r\n      if (type === 'current') {\r\n        this.currentIllnesses = this.currentIllnesses.filter(s => s.id !== id);\r\n      } else if (type === 'past') {\r\n        this.pastIllnesses = this.pastIllnesses.filter(s => s.id !== id);\r\n      }\r\n    },\r\n    // 延迟隐藏建议，以便能点击建议项\r\n    hideSuggestionsDelayed(type) {\r\n      setTimeout(() => {\r\n        if (type === 'current') {\r\n          this.showCurrentSuggestions = false;\r\n        } else {\r\n          this.showPastSuggestions = false;\r\n        }\r\n      }, 200);\r\n    },\r\n    // 处理文件上传\r\n    async handleFileUpload(type, file) {\r\n      try {\r\n        const response = await this.$store.dispatch('uploadMedicalReport', {\r\n          patientId: this.id,\r\n          type: type,\r\n          file: file\r\n        });\r\n        if (response.data.code === 200) {\r\n          // 更新文件列表\r\n          if (!this.uploadFiles[type]) {\r\n            this.uploadFiles[type] = [];\r\n          }\r\n          this.uploadFiles[type].push(response.data.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('上传文件失败:', error);\r\n        // 这里可以添加错误提示\r\n      }\r\n    },\r\n    // 移除已上传的文件\r\n    removeFile(type, index) {\r\n      if (this.uploadFiles[type] && this.uploadFiles[type].length > index) {\r\n        this.uploadFiles[type].splice(index, 1);\r\n      }\r\n    },\r\n    showSymptomDialog(type) {\r\n      this.dialogVisible = true;\r\n      this.dialogMode = type;\r\n      \r\n      if (type === 'current') {\r\n        this.dialogType = '现病史';\r\n        this.dialogInitialSelected = this.currentIllnesses.map(s => s.id);\r\n      } else if (type === 'past') {\r\n        this.dialogType = '既往病史';\r\n        this.dialogInitialSelected = this.pastIllnesses.map(s => s.id);\r\n      }\r\n    },\r\n    confirmSymptoms(selectedSymptoms) {\r\n      if (this.dialogMode === 'current') {\r\n        this.currentIllnesses = selectedSymptoms;\r\n      } else if (this.dialogMode === 'past') {\r\n        this.pastIllnesses = selectedSymptoms;\r\n      }\r\n      \r\n      this.dialogVisible = false;\r\n    },\r\n    cancelDialog() {\r\n      this.dialogVisible = false;\r\n    },\r\n    async saveAssessment() {\r\n      try {\r\n        const now = new Date();\r\n        const timeStr = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;\r\n        \r\n        // 准备要保存的文件数据（只保留URL或文件路径）\r\n        const processedFiles = {};\r\n        Object.keys(this.uploadFiles).forEach(type => {\r\n          if (this.uploadFiles[type] && this.uploadFiles[type].length) {\r\n            processedFiles[type] = this.uploadFiles[type].map(file => \r\n              typeof file === 'string' ? file : (file.url || file.name)\r\n            );\r\n          }\r\n        });\r\n        \r\n        // 准备要保存的详情数据\r\n        const details = {\r\n          currentIllnesses: this.currentIllnesses,\r\n          pastIllnesses: this.pastIllnesses,\r\n          forbiddenMedicine: this.medicalForm.forbiddenMedicine,\r\n          diet: this.diet,\r\n          conclusion: this.medicalForm.conclusion,\r\n          files: processedFiles\r\n        };\r\n        \r\n        // 更新健康评估\r\n        await this.$store.dispatch('updateHealthAssessment', {\r\n          patientId: parseInt(this.id),\r\n          status: this.medicalForm.admissionDecision === 'admit' ? 'completed' : 'rejected',\r\n          time: timeStr,\r\n          operator: '张医生', // 添加经办人信息\r\n          details: details\r\n        });\r\n        \r\n        // 如果当前评估和照护评估都已完成，标记入院流程完成\r\n        if (\r\n          (this.patient.healthAssessment.status === 'completed' || this.medicalForm.admissionDecision === 'admit') &&\r\n          this.patient.careAssessment.status === 'completed'\r\n        ) {\r\n          await this.$store.dispatch('finishAdmission', parseInt(this.id));\r\n        }\r\n        \r\n        // 返回评估列表页面\r\n        this.$router.push('/assessment');\r\n      } catch (error) {\r\n        console.error('保存评估失败:', error);\r\n        // 这里可以添加错误提示\r\n      }\r\n    },\r\n    cancelAssessment() {\r\n      // 取消编辑，返回上一页\r\n      this.$router.push('/assessment');\r\n    },\r\n    setCareLevel(category, item, level) {\r\n      this.careForm[category][item] = level;\r\n    },\r\n    getProgressWidth(category, item) {\r\n      const level = this.careForm[category][item];\r\n      return `${(level + 1) * 25}%`;\r\n    },\r\n    async saveCareAssessment() {\r\n      try {\r\n        const now = new Date();\r\n        const timeStr = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;\r\n        \r\n        // 准备要保存的照护评估详情数据\r\n        const details = {\r\n          selfCare: { ...this.careForm.selfCare },\r\n          cognition: { ...this.careForm.cognition },\r\n          emotion: { ...this.careForm.emotion },\r\n          extreme: { ...this.careForm.extreme }\r\n        };\r\n        \r\n        // 更新照护评估\r\n        await this.$store.dispatch('updateCareAssessment', {\r\n          patientId: parseInt(this.id),\r\n          status: 'completed',\r\n          time: timeStr,\r\n          operator: '李护士', // 添加经办人信息\r\n          details: details\r\n        });\r\n        \r\n        // 如果健康评估和照护评估都已完成，标记入院流程完成\r\n        if (\r\n          this.patient.healthAssessment.status === 'completed' &&\r\n          (this.patient.careAssessment.status === 'completed' || details)\r\n        ) {\r\n          await this.$store.dispatch('finishAdmission', parseInt(this.id));\r\n        }\r\n        \r\n        // 返回评估列表页面\r\n        this.$router.push('/assessment');\r\n      } catch (error) {\r\n        console.error('保存照护评估失败:', error);\r\n        // 这里可以添加错误提示\r\n      }\r\n    },\r\n    async handleMedicalReportUpload(file) {\r\n      try {\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n        formData.append('patientId', this.id);\r\n        await this.$store.dispatch('uploadMedicalReport', formData);\r\n        this.$message.success('医疗报告上传成功');\r\n      } catch (error) {\r\n        console.error('上传医疗报告失败:', error);\r\n        this.$message.error('上传医疗报告失败');\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.loadAssessmentDetails();\r\n    this.loadAllSymptoms();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.assessment-detail-container {\r\n  padding: 20px;\r\n  background-color: #f5f6fa;\r\n}\r\n\r\n.patient-info-card {\r\n  background-color: #fff;\r\n  border-radius: 4px;\r\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header {\r\n  border-bottom: 1px solid #eee;\r\n  padding: 12px 16px;\r\n  font-weight: bold;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.card-icon {\r\n  width: 16px;\r\n  height: 16px;\r\n  margin-right: 8px;\r\n  background-color: #2196f3;\r\n  display: inline-block;\r\n  border-radius: 50%;\r\n}\r\n\r\n.card-body {\r\n  padding: 16px;\r\n}\r\n\r\n.info-row {\r\n  display: flex;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.info-item {\r\n  margin-right: 40px;\r\n  display: flex;\r\n}\r\n\r\n.info-label {\r\n  color: #888;\r\n  margin-right: 4px;\r\n}\r\n\r\n.info-value {\r\n  font-weight: 500;\r\n}\r\n\r\n.assessment-tabs {\r\n  display: flex;\r\n  background-color: #fff;\r\n  border-radius: 4px 4px 0 0;\r\n  border-bottom: 1px solid #eee;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.tab-item {\r\n  padding: 12px 24px;\r\n  cursor: pointer;\r\n  position: relative;\r\n}\r\n\r\n.tab-item.active {\r\n  color: #2196f3;\r\n  border-bottom: 2px solid #2196f3;\r\n}\r\n\r\n.assessment-content {\r\n  background-color: #fff;\r\n  border-radius: 0 0 4px 4px;\r\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.assessment-section {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  margin-bottom: 16px;\r\n  position: relative;\r\n}\r\n\r\n.section-content {\r\n  padding: 0 10px;\r\n}\r\n\r\n.history-item {\r\n  display: flex;\r\n  margin-bottom: 16px;\r\n  align-items: flex-start;\r\n}\r\n\r\n.history-label {\r\n  width: 80px;\r\n  color: #666;\r\n}\r\n\r\n.history-actions {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.symptom-tag {\r\n  background-color: #f0f8ff;\r\n  border: 1px solid #d1e9ff;\r\n  border-radius: 4px;\r\n  padding: 2px 8px;\r\n  font-size: 14px;\r\n  margin-right: 8px;\r\n  margin-bottom: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.icon-close {\r\n  cursor: pointer;\r\n  margin-left: 4px;\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n.icon-close:after {\r\n  content: \"×\";\r\n}\r\n\r\n.add-btn {\r\n  border: 1px dashed #ddd;\r\n  background-color: #fff;\r\n  color: #2196f3;\r\n  padding: 4px 12px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n}\r\n\r\n.tip {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-left: 8px;\r\n}\r\n\r\n.history-textarea {\r\n  width: 100%;\r\n  min-height: 60px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  padding: 8px;\r\n  resize: vertical;\r\n}\r\n\r\n.upload-tip {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.upload-items {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 16px;\r\n}\r\n\r\n.upload-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.upload-label {\r\n  width: 100%;\r\n  color: #666;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.upload-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.upload-preview-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  margin-bottom: 8px;\r\n  position: relative;\r\n}\r\n\r\n.upload-preview {\r\n  width: 60px;\r\n  height: 60px;\r\n  background-color: #f0f8ff;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-right: 8px;\r\n  margin-bottom: 8px;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.preview-count {\r\n  position: absolute;\r\n  bottom: 4px;\r\n  right: 4px;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  color: white;\r\n  font-size: 12px;\r\n  padding: 2px 4px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.upload-btn {\r\n  width: 60px;\r\n  height: 60px;\r\n  border: 1px dashed #ddd;\r\n  background-color: #fff;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n}\r\n\r\n.icon-plus:before {\r\n  content: \"+\";\r\n  font-size: 24px;\r\n  color: #999;\r\n}\r\n\r\n.diet-container {\r\n  border: 1px solid #eee;\r\n  border-radius: 4px;\r\n  padding: 16px;\r\n}\r\n\r\n.diet-row {\r\n  display: flex;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.diet-row:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.diet-option {\r\n  margin-right: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.diet-option input {\r\n  margin-right: 4px;\r\n}\r\n\r\n.conclusion-textarea {\r\n  width: 100%;\r\n  min-height: 100px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  padding: 12px;\r\n  resize: vertical;\r\n}\r\n\r\n.required {\r\n  color: #f44336;\r\n  margin-left: 4px;\r\n}\r\n\r\n.admission-decision {\r\n  display: flex;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.radio-option {\r\n  margin-right: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.radio-option input {\r\n  margin-right: 4px;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 40px;\r\n}\r\n\r\n.save-btn {\r\n  background-color: #2196f3;\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 24px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  margin-right: 16px;\r\n}\r\n\r\n.cancel-btn {\r\n  background-color: #f5f5f5;\r\n  color: #666;\r\n  border: 1px solid #ddd;\r\n  padding: 8px 24px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.placeholder {\r\n  padding: 40px;\r\n  text-align: center;\r\n  color: #999;\r\n}\r\n\r\n.search-wrapper {\r\n  position: relative;\r\n  min-width: 200px;\r\n  margin-right: 10px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.search-symptom {\r\n  width: 100%;\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n}\r\n\r\n.suggestions {\r\n  position: absolute;\r\n  top: 100%;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: #fff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  z-index: 1000;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.suggestion-item {\r\n  padding: 8px 12px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.suggestion-item:hover {\r\n  background-color: #f0f8ff;\r\n}\r\n\r\n.preview-img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  border-radius: 4px;\r\n}\r\n\r\n.preview-delete {\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  width: 18px;\r\n  height: 18px;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  color: white;\r\n  border-radius: 50%;\r\n  font-size: 12px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.upload-preview:hover .preview-delete {\r\n  opacity: 1;\r\n}\r\n\r\n.care-assessment-item {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.care-label {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.care-content {\r\n  padding: 16px;\r\n  border: 1px solid #eee;\r\n  border-radius: 4px;\r\n}\r\n\r\n.care-slider-container {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.slider-label {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.slider-container {\r\n  position: relative;\r\n  height: 40px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.slider-track {\r\n  position: relative;\r\n  display: flex;\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: #f5f5f5;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.slider-level {\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  border-right: 1px solid #ddd;\r\n  position: relative;\r\n  z-index: 2;\r\n  transition: background-color 0.2s;\r\n  user-select: none;\r\n}\r\n\r\n.slider-level:last-child {\r\n  border-right: none;\r\n}\r\n\r\n.slider-level:hover {\r\n  background-color: rgba(33, 150, 243, 0.1);\r\n}\r\n\r\n.slider-level.active {\r\n  color: white;\r\n  font-weight: 500;\r\n}\r\n\r\n.slider-progress {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  background-color: #2196f3;\r\n  z-index: 1;\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.reason-label {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.reason-textarea-container {\r\n  position: relative;\r\n}\r\n\r\n.reason-textarea {\r\n  width: 100%;\r\n  min-height: 80px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  padding: 8px;\r\n  resize: vertical;\r\n}\r\n\r\n.reason-note {\r\n  position: absolute;\r\n  right: 8px;\r\n  bottom: 8px;\r\n  background-color: #ffeb3b;\r\n  color: #333;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n/* 为不同的级别设置不同的颜色 */\r\n.slider-level:nth-child(1).active ~ .slider-progress {\r\n  background-color: #4caf50; /* 正常-绿色 */\r\n}\r\n\r\n.slider-level:nth-child(2).active ~ .slider-progress {\r\n  background-color: #cddc39; /* 轻度-黄绿色 */\r\n}\r\n\r\n.slider-level:nth-child(3).active ~ .slider-progress {\r\n  background-color: #ff9800; /* 中度-橙色 */\r\n}\r\n\r\n.slider-level:nth-child(4).active ~ .slider-progress {\r\n  background-color: #f44336; /* 重度-红色 */\r\n}\r\n</style> "],"mappings":";AA+HA;EACAA,IAAA;EACAC,KAAA;IACAC,EAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,WAAA;MACAC,SAAA;QACAT,IAAA;QACAU,MAAA;QACAC,GAAA;QACAC,MAAA;QACAC,KAAA;QACAC,gBAAA;QACAC,cAAA;MACA;MACAC,UAAA;QACAC,cAAA;QACAC,YAAA;QACAC,eAAA;QACAC,QAAA;QACAC,OAAA;MACA;MACAC,gBAAA;QACAC,UAAA;QACAC,WAAA;QACAC,MAAA;MACA;MACA;MACAC,UAAA;QACAd,MAAA,GACA;UAAAP,QAAA;UAAAsB,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,OAAA;UAAAF,OAAA;UAAAC,OAAA;QAAA,EACA;QACAf,KAAA,GACA;UAAAR,QAAA;UAAAsB,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,OAAA;UAAAF,OAAA;UAAAC,OAAA;QAAA,EACA;QACAd,gBAAA,GACA;UAAAT,QAAA;UAAAsB,OAAA;UAAAC,OAAA;QAAA,EACA;QACAb,cAAA,GACA;UAAAV,QAAA;UAAAsB,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,OAAA;UAAAF,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAE,WAAA;QACAb,cAAA,GACA;UAAAd,IAAA;UAAAE,QAAA;UAAAsB,OAAA;UAAAC,OAAA;QAAA,EACA;QACAR,QAAA,GACA;UAAAf,QAAA;UAAAsB,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAG,WAAA;QACAR,UAAA,GACA;UAAAlB,QAAA;UAAAsB,OAAA;UAAAC,OAAA;QAAA,EACA;QACAH,MAAA,GACA;UAAApB,QAAA;UAAAsB,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAI,QAAA;IACA,KAAAC,gBAAA;EACA;EACAC,OAAA;IACA,MAAAD,iBAAA;MACA;QACA;QACA,MAAAE,QAAA,cAAAC,MAAA,CAAAC,QAAA,qCAAAnC,EAAA;QACA,KAAAM,WAAA,GAAA2B,QAAA,CAAA7B,IAAA;QACA;QACA,KAAAG,SAAA;UACAT,IAAA,OAAAQ,WAAA,CAAAR,IAAA;UACAU,MAAA,OAAAF,WAAA,CAAAE,MAAA;UACAC,GAAA,OAAAH,WAAA,CAAAG,GAAA;UACAC,MAAA,OAAAJ,WAAA,CAAAI,MAAA;UACAC,KAAA,OAAAL,WAAA,CAAAK,KAAA;UACAC,gBAAA,OAAAN,WAAA,CAAAM,gBAAA;UACAC,cAAA,OAAAP,WAAA,CAAAO,cAAA;QACA;MACA,SAAAuB,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA;MACA;IACA;IACA,MAAAE,SAAA;MACA,SAAAjC,WAAA;QACA;UACA,WAAAkC,KAAA,CAAAC,SAAA,CAAAC,QAAA;UACA,KAAApC,WAAA;QACA,SAAA+B,KAAA;UACA;QACA;MACA,gBAAA/B,WAAA;QACA;UACA,WAAAkC,KAAA,CAAAG,UAAA,CAAAD,QAAA;UACA,KAAApC,WAAA;QACA,SAAA+B,KAAA;UACA;QACA;MACA;IACA;IACAO,SAAA;MACA,SAAAtC,WAAA;QACA,KAAAA,WAAA;MACA;IACA;IACA,MAAAuC,iBAAA;MACA;QACA,WAAAL,KAAA,CAAAM,UAAA,CAAAJ,QAAA;QAEA,MAAAK,cAAA;UACAC,SAAA,OAAA/C,EAAA;UACAO,SAAA,OAAAA,SAAA;UACAO,UAAA,OAAAA,UAAA;UACAM,gBAAA,OAAAA,gBAAA;UACA4B,MAAA,OAAA5B,gBAAA,CAAAC,UAAA;UACA4B,IAAA,MAAAC,IAAA,GAAAC,WAAA;UACAC,QAAA,OAAAhC,gBAAA,CAAAG;QACA;QAEA,WAAAW,MAAA,CAAAC,QAAA,2BAAAW,cAAA;QACA,KAAAT,QAAA,CAAAgB,OAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;MACA,SAAAnB,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}