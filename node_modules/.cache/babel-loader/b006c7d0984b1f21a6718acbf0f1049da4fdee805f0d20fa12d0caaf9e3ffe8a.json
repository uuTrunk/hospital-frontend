{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'HealthAssessment',\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      patientInfo: {\n        name: '',\n        gender: '',\n        age: '',\n        admissionNo: ''\n      },\n      form: {\n        presentIllness: '',\n        forbiddenDrugs: '',\n        dietaryRestrictions: '',\n        examConclusion: '',\n        admissionOpinion: ''\n      },\n      rules: {\n        examConclusion: [{\n          required: true,\n          message: '请输入体检结论',\n          trigger: 'blur'\n        }],\n        admissionOpinion: [{\n          required: true,\n          message: '请输入入院意见',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.getPatientInfo();\n    this.getAssessmentDetail();\n  },\n  methods: {\n    async getPatientInfo() {\n      try {\n        const {\n          data\n        } = await this.$http.get(`/api/patient-info/${this.id}`);\n        this.patientInfo = data;\n      } catch (error) {\n        this.$message.error('获取患者信息失败');\n      }\n    },\n    async getAssessmentDetail() {\n      try {\n        const {\n          data\n        } = await this.$http.get('/api/health-assessment/detail', {\n          params: {\n            patientId: this.id\n          }\n        });\n        if (data) {\n          this.form = data;\n        }\n      } catch (error) {\n        this.$message.error('获取评估详情失败');\n      }\n    },\n    submitForm() {\n      this.$refs.form.validate(async valid => {\n        if (valid) {\n          try {\n            await this.$http.post('/api/health-assessment/submit', {\n              patientId: this.id,\n              ...this.form\n            });\n            this.$message.success('保存成功');\n            this.$router.push('/assessment');\n          } catch (error) {\n            this.$message.error('保存失败');\n          }\n        }\n      });\n    },\n    resetForm() {\n      this.$refs.form.resetFields();\n    }\n  }\n};","map":{"version":3,"names":["name","props","id","type","String","required","data","patientInfo","gender","age","admissionNo","form","presentIllness","forbiddenDrugs","dietaryRestrictions","examConclusion","admissionOpinion","rules","message","trigger","created","getPatientInfo","getAssessmentDetail","methods","$http","get","error","$message","params","patientId","submitForm","$refs","validate","valid","post","success","$router","push","resetForm","resetFields"],"sources":["src/views/HealthAssessment.vue"],"sourcesContent":["<template>\n  <div class=\"health-assessment\">\n    <!-- 患者基本信息卡片 -->\n    <el-card class=\"patient-info\">\n      <div slot=\"header\">\n        <span>患者基本信息</span>\n      </div>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"6\">\n          <div class=\"info-item\">\n            <span class=\"label\">姓名：</span>\n            <span>{{ patientInfo.name }}</span>\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"info-item\">\n            <span class=\"label\">性别：</span>\n            <span>{{ patientInfo.gender }}</span>\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"info-item\">\n            <span class=\"label\">年龄：</span>\n            <span>{{ patientInfo.age }}岁</span>\n          </div>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"info-item\">\n            <span class=\"label\">入院编号：</span>\n            <span>{{ patientInfo.admissionNo }}</span>\n          </div>\n        </el-col>\n      </el-row>\n    </el-card>\n\n    <!-- 健康评估表单 -->\n    <el-card class=\"assessment-form\">\n      <div slot=\"header\">\n        <span>健康评估</span>\n      </div>\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"form\" label-width=\"100px\">\n        <el-form-item label=\"现病史\" prop=\"presentIllness\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"form.presentIllness\"\n            :rows=\"4\"\n            placeholder=\"请输入现病史\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"禁忌药品\" prop=\"forbiddenDrugs\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"form.forbiddenDrugs\"\n            :rows=\"2\"\n            placeholder=\"请输入禁忌药品\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"饮食禁忌\" prop=\"dietaryRestrictions\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"form.dietaryRestrictions\"\n            :rows=\"2\"\n            placeholder=\"请输入饮食禁忌\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"体检结论\" prop=\"examConclusion\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"form.examConclusion\"\n            :rows=\"4\"\n            placeholder=\"请输入体检结论\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"入院意见\" prop=\"admissionOpinion\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"form.admissionOpinion\"\n            :rows=\"4\"\n            placeholder=\"请输入入院意见\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm\">保存</el-button>\n          <el-button @click=\"resetForm\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'HealthAssessment',\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      patientInfo: {\n        name: '',\n        gender: '',\n        age: '',\n        admissionNo: ''\n      },\n      form: {\n        presentIllness: '',\n        forbiddenDrugs: '',\n        dietaryRestrictions: '',\n        examConclusion: '',\n        admissionOpinion: ''\n      },\n      rules: {\n        examConclusion: [\n          { required: true, message: '请输入体检结论', trigger: 'blur' }\n        ],\n        admissionOpinion: [\n          { required: true, message: '请输入入院意见', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  created() {\n    this.getPatientInfo()\n    this.getAssessmentDetail()\n  },\n  methods: {\n    async getPatientInfo() {\n      try {\n        const { data } = await this.$http.get(`/api/patient-info/${this.id}`)\n        this.patientInfo = data\n      } catch (error) {\n        this.$message.error('获取患者信息失败')\n      }\n    },\n    async getAssessmentDetail() {\n      try {\n        const { data } = await this.$http.get('/api/health-assessment/detail', {\n          params: { patientId: this.id }\n        })\n        if (data) {\n          this.form = data\n        }\n      } catch (error) {\n        this.$message.error('获取评估详情失败')\n      }\n    },\n    submitForm() {\n      this.$refs.form.validate(async valid => {\n        if (valid) {\n          try {\n            await this.$http.post('/api/health-assessment/submit', {\n              patientId: this.id,\n              ...this.form\n            })\n            this.$message.success('保存成功')\n            this.$router.push('/assessment')\n          } catch (error) {\n            this.$message.error('保存失败')\n          }\n        }\n      })\n    },\n    resetForm() {\n      this.$refs.form.resetFields()\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.health-assessment {\n  padding: 20px;\n}\n.patient-info {\n  margin-bottom: 20px;\n}\n.info-item {\n  line-height: 30px;\n}\n.label {\n  color: #606266;\n  margin-right: 10px;\n}\n.assessment-form {\n  margin-bottom: 20px;\n}\n</style> "],"mappings":";AA2FA;EACAA,IAAA;EACAC,KAAA;IACAC,EAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,WAAA;QACAP,IAAA;QACAQ,MAAA;QACAC,GAAA;QACAC,WAAA;MACA;MACAC,IAAA;QACAC,cAAA;QACAC,cAAA;QACAC,mBAAA;QACAC,cAAA;QACAC,gBAAA;MACA;MACAC,KAAA;QACAF,cAAA,GACA;UAAAV,QAAA;UAAAa,OAAA;UAAAC,OAAA;QAAA,EACA;QACAH,gBAAA,GACA;UAAAX,QAAA;UAAAa,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,cAAA;IACA,KAAAC,mBAAA;EACA;EACAC,OAAA;IACA,MAAAF,eAAA;MACA;QACA;UAAAf;QAAA,eAAAkB,KAAA,CAAAC,GAAA,2BAAAvB,EAAA;QACA,KAAAK,WAAA,GAAAD,IAAA;MACA,SAAAoB,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA;MACA;IACA;IACA,MAAAJ,oBAAA;MACA;QACA;UAAAhB;QAAA,eAAAkB,KAAA,CAAAC,GAAA;UACAG,MAAA;YAAAC,SAAA,OAAA3B;UAAA;QACA;QACA,IAAAI,IAAA;UACA,KAAAK,IAAA,GAAAL,IAAA;QACA;MACA,SAAAoB,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA;MACA;IACA;IACAI,WAAA;MACA,KAAAC,KAAA,CAAApB,IAAA,CAAAqB,QAAA,OAAAC,KAAA;QACA,IAAAA,KAAA;UACA;YACA,WAAAT,KAAA,CAAAU,IAAA;cACAL,SAAA,OAAA3B,EAAA;cACA,QAAAS;YACA;YACA,KAAAgB,QAAA,CAAAQ,OAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA,SAAAX,KAAA;YACA,KAAAC,QAAA,CAAAD,KAAA;UACA;QACA;MACA;IACA;IACAY,UAAA;MACA,KAAAP,KAAA,CAAApB,IAAA,CAAA4B,WAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}