{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'HealthAssessment',\n  data() {\n    return {\n      patientInfo: {\n        name: '张三',\n        gender: '男',\n        age: 45,\n        admissionId: 'A2024001',\n        bedNumber: '3-101',\n        nursingLevel: '一级护理'\n      },\n      form: {\n        medicalHistory: [],\n        otherMedicalHistory: '',\n        forbiddenDrugs: '',\n        dietaryRestrictions: [],\n        otherDietaryRestrictions: '',\n        conclusion: '',\n        admissionOpinion: ''\n      },\n      rules: {\n        conclusion: [{\n          required: true,\n          message: '请输入体检结论',\n          trigger: 'blur'\n        }],\n        admissionOpinion: [{\n          required: true,\n          message: '请选择入院意见',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  created() {\n    // 获取路由参数中的患者ID\n    const patientId = this.$route.params.id;\n    this.fetchPatientInfo(patientId);\n    this.fetchAssessmentInfo(patientId);\n  },\n  methods: {\n    async fetchPatientInfo(patientId) {\n      try {\n        // TODO: 调用API获取患者信息\n        const {\n          data\n        } = await this.$http.get(`/api/patients/${patientId}`);\n        this.patientInfo = data || this.patientInfo; // 如果API未实现，使用默认数据\n      } catch (error) {\n        this.$message.error('获取患者信息失败');\n      }\n    },\n    async fetchAssessmentInfo(patientId) {\n      try {\n        // TODO: 调用API获取评估信息\n        const {\n          data\n        } = await this.$http.get(`/api/assessments/${patientId}`);\n        if (data) {\n          this.form = data;\n        }\n      } catch (error) {\n        this.$message.error('获取评估信息失败');\n      }\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate(async valid => {\n        if (valid) {\n          try {\n            // TODO: 调用API保存评估信息\n            // await this.$http.post('/api/assessments', this.form)\n            this.$message.success('保存成功');\n            this.$router.push('/assessment');\n          } catch (error) {\n            this.$message.error('保存失败');\n          }\n        } else {\n          this.$message.warning('请完善必填信息');\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    goBack() {\n      this.$router.push('/assessment');\n    }\n  }\n};","map":{"version":3,"names":["name","data","patientInfo","gender","age","admissionId","bedNumber","nursingLevel","form","medicalHistory","otherMedicalHistory","forbiddenDrugs","dietaryRestrictions","otherDietaryRestrictions","conclusion","admissionOpinion","rules","required","message","trigger","created","patientId","$route","params","id","fetchPatientInfo","fetchAssessmentInfo","methods","$http","get","error","$message","submitForm","formName","$refs","validate","valid","success","$router","push","warning","resetForm","resetFields","goBack"],"sources":["src/views/HealthAssessment.vue"],"sourcesContent":["<template>\n  <div class=\"health-assessment\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>患者健康评估</span>\n        <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"goBack\">返回</el-button>\n      </div>\n      \n      <!-- 患者基本信息 -->\n      <el-descriptions title=\"患者信息\" :column=\"3\" border>\n        <el-descriptions-item label=\"姓名\">{{ patientInfo.name }}</el-descriptions-item>\n        <el-descriptions-item label=\"性别\">{{ patientInfo.gender }}</el-descriptions-item>\n        <el-descriptions-item label=\"年龄\">{{ patientInfo.age }}岁</el-descriptions-item>\n        <el-descriptions-item label=\"入院编号\">{{ patientInfo.admissionId }}</el-descriptions-item>\n        <el-descriptions-item label=\"床位号\">{{ patientInfo.bedNumber }}</el-descriptions-item>\n        <el-descriptions-item label=\"护理等级\">{{ patientInfo.nursingLevel }}</el-descriptions-item>\n      </el-descriptions>\n\n      <!-- 健康评估表单 -->\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\" class=\"assessment-form\">\n        <el-form-item label=\"现病史\" prop=\"medicalHistory\">\n          <el-checkbox-group v-model=\"form.medicalHistory\">\n            <el-checkbox label=\"高血压\">高血压</el-checkbox>\n            <el-checkbox label=\"糖尿病\">糖尿病</el-checkbox>\n            <el-checkbox label=\"心脏病\">心脏病</el-checkbox>\n            <el-checkbox label=\"其他\">其他</el-checkbox>\n          </el-checkbox-group>\n          <el-input\n            v-if=\"form.medicalHistory.includes('其他')\"\n            v-model=\"form.otherMedicalHistory\"\n            type=\"textarea\"\n            placeholder=\"请输入其他病史\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"禁忌药品\" prop=\"forbiddenDrugs\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"form.forbiddenDrugs\"\n            placeholder=\"请输入禁忌药品\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"饮食禁忌\" prop=\"dietaryRestrictions\">\n          <el-checkbox-group v-model=\"form.dietaryRestrictions\">\n            <el-checkbox label=\"海鲜\">海鲜</el-checkbox>\n            <el-checkbox label=\"辛辣\">辛辣</el-checkbox>\n            <el-checkbox label=\"油腻\">油腻</el-checkbox>\n            <el-checkbox label=\"其他\">其他</el-checkbox>\n          </el-checkbox-group>\n          <el-input\n            v-if=\"form.dietaryRestrictions.includes('其他')\"\n            v-model=\"form.otherDietaryRestrictions\"\n            type=\"textarea\"\n            placeholder=\"请输入其他饮食禁忌\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"体检结论\" prop=\"conclusion\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"form.conclusion\"\n            :rows=\"4\"\n            placeholder=\"请输入体检结论\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"入院意见\" prop=\"admissionOpinion\">\n          <el-radio-group v-model=\"form.admissionOpinion\">\n            <el-radio label=\"agree\">同意入院</el-radio>\n            <el-radio label=\"disagree\">不同意入院</el-radio>\n          </el-radio-group>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('form')\">保存评估</el-button>\n          <el-button @click=\"resetForm('form')\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'HealthAssessment',\n  data() {\n    return {\n      patientInfo: {\n        name: '张三',\n        gender: '男',\n        age: 45,\n        admissionId: 'A2024001',\n        bedNumber: '3-101',\n        nursingLevel: '一级护理'\n      },\n      form: {\n        medicalHistory: [],\n        otherMedicalHistory: '',\n        forbiddenDrugs: '',\n        dietaryRestrictions: [],\n        otherDietaryRestrictions: '',\n        conclusion: '',\n        admissionOpinion: ''\n      },\n      rules: {\n        conclusion: [\n          { required: true, message: '请输入体检结论', trigger: 'blur' }\n        ],\n        admissionOpinion: [\n          { required: true, message: '请选择入院意见', trigger: 'change' }\n        ]\n      }\n    }\n  },\n  created() {\n    // 获取路由参数中的患者ID\n    const patientId = this.$route.params.id\n    this.fetchPatientInfo(patientId)\n    this.fetchAssessmentInfo(patientId)\n  },\n  methods: {\n    async fetchPatientInfo(patientId) {\n      try {\n        // TODO: 调用API获取患者信息\n        const { data } = await this.$http.get(`/api/patients/${patientId}`)\n        this.patientInfo = data || this.patientInfo // 如果API未实现，使用默认数据\n      } catch (error) {\n        this.$message.error('获取患者信息失败')\n      }\n    },\n    async fetchAssessmentInfo(patientId) {\n      try {\n        // TODO: 调用API获取评估信息\n        const { data } = await this.$http.get(`/api/assessments/${patientId}`)\n        if (data) {\n          this.form = data\n        }\n      } catch (error) {\n        this.$message.error('获取评估信息失败')\n      }\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate(async (valid) => {\n        if (valid) {\n          try {\n            // TODO: 调用API保存评估信息\n            // await this.$http.post('/api/assessments', this.form)\n            this.$message.success('保存成功')\n            this.$router.push('/assessment')\n          } catch (error) {\n            this.$message.error('保存失败')\n          }\n        } else {\n          this.$message.warning('请完善必填信息')\n          return false\n        }\n      })\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields()\n    },\n    goBack() {\n      this.$router.push('/assessment')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.health-assessment {\n  padding: 20px;\n}\n.assessment-form {\n  margin-top: 20px;\n}\n.el-descriptions {\n  margin-bottom: 20px;\n}\n</style> "],"mappings":";AAoFA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,WAAA;QACAF,IAAA;QACAG,MAAA;QACAC,GAAA;QACAC,WAAA;QACAC,SAAA;QACAC,YAAA;MACA;MACAC,IAAA;QACAC,cAAA;QACAC,mBAAA;QACAC,cAAA;QACAC,mBAAA;QACAC,wBAAA;QACAC,UAAA;QACAC,gBAAA;MACA;MACAC,KAAA;QACAF,UAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,gBAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,QAAA;IACA;IACA,MAAAC,SAAA,QAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;IACA,KAAAC,gBAAA,CAAAJ,SAAA;IACA,KAAAK,mBAAA,CAAAL,SAAA;EACA;EACAM,OAAA;IACA,MAAAF,iBAAAJ,SAAA;MACA;QACA;QACA;UAAApB;QAAA,eAAA2B,KAAA,CAAAC,GAAA,kBAAAR,SAAA;QACA,KAAAnB,WAAA,GAAAD,IAAA,SAAAC,WAAA;MACA,SAAA4B,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA;MACA;IACA;IACA,MAAAJ,oBAAAL,SAAA;MACA;QACA;QACA;UAAApB;QAAA,eAAA2B,KAAA,CAAAC,GAAA,qBAAAR,SAAA;QACA,IAAApB,IAAA;UACA,KAAAO,IAAA,GAAAP,IAAA;QACA;MACA,SAAA6B,KAAA;QACA,KAAAC,QAAA,CAAAD,KAAA;MACA;IACA;IACAE,WAAAC,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAE,QAAA,OAAAC,KAAA;QACA,IAAAA,KAAA;UACA;YACA;YACA;YACA,KAAAL,QAAA,CAAAM,OAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA,SAAAT,KAAA;YACA,KAAAC,QAAA,CAAAD,KAAA;UACA;QACA;UACA,KAAAC,QAAA,CAAAS,OAAA;UACA;QACA;MACA;IACA;IACAC,UAAAR,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAS,WAAA;IACA;IACAC,OAAA;MACA,KAAAL,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}