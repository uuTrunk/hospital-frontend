{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nexport default {\n  name: 'HealthRecordView',\n  data() {\n    return {\n      loading: false,\n      searchText: '',\n      dateRange: [],\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      patients: [{\n        id: 1,\n        name: '李大哥',\n        idNumber: '310106194805162428',\n        gender: '男',\n        age: 78,\n        admissionNo: '210124',\n        admissionDate: '2024-05-22',\n        roomNumber: '2022-01',\n        hasRecord: false,\n        recordTime: null,\n        doctor: null\n      }, {\n        id: 2,\n        name: '王大娘',\n        idNumber: '310106194805162428',\n        gender: '女',\n        age: 98,\n        admissionNo: '210124',\n        admissionDate: '2024-05-18',\n        roomNumber: '2024-02',\n        hasRecord: true,\n        recordTime: '2024-05-18 12:18',\n        doctor: '张医生'\n      }, {\n        id: 3,\n        name: '宋老博',\n        idNumber: '310106194805162428',\n        gender: '男',\n        age: 89,\n        admissionNo: '210124',\n        admissionDate: '2024-05-12',\n        roomNumber: '3000-02',\n        hasRecord: true,\n        recordTime: '2024-05-18 12:18',\n        doctor: 'XXXX'\n      }]\n    };\n  },\n  computed: {\n    totalPatients() {\n      return this.patients.length;\n    },\n    pendingRecords() {\n      return this.patients.filter(p => !p.hasRecord).length;\n    }\n  },\n  methods: {\n    handleDateChange() {\n      this.currentPage = 1;\n      this.searchPatients();\n    },\n    searchPatients() {\n      // 实现搜索逻辑\n      console.log('搜索长者:', this.searchText, this.dateRange);\n    },\n    viewHistory() {\n      // 查看历史档案\n      console.log('查看历史档案');\n    },\n    viewRecord(patient) {\n      if (patient.hasRecord) {\n        // 如果已有档案，跳转到查看页面，默认显示医嘱管理标签\n        this.$router.push({\n          path: `/health-record/create/${patient.id}`,\n          query: {\n            tab: 'medical'\n          }\n        });\n      } else {\n        // 如果未建档，跳转到创建页面\n        this.$router.push(`/health-record/create/${patient.id}`);\n      }\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage = 1;\n      this.searchPatients();\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.searchPatients();\n    }\n  }\n};","map":{"version":3,"names":["name","data","loading","searchText","dateRange","currentPage","pageSize","total","patients","id","idNumber","gender","age","admissionNo","admissionDate","roomNumber","hasRecord","recordTime","doctor","computed","totalPatients","length","pendingRecords","filter","p","methods","handleDateChange","searchPatients","console","log","viewHistory","viewRecord","patient","$router","push","path","query","tab","handleSizeChange","val","handleCurrentChange"],"sources":["src/views/HealthRecord.vue"],"sourcesContent":["<template>\r\n  <div class=\"assessment-container\">\r\n    <div class=\"search-section\">\r\n      <div class=\"search-form\">\r\n        <div class=\"form-item\">\r\n          <span class=\"label\">建档日期</span>\r\n          <el-date-picker\r\n            v-model=\"dateRange\"\r\n            type=\"daterange\"\r\n            range-separator=\"~\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n            format=\"yyyy/MM/dd\"\r\n            value-format=\"yyyy-MM-dd\"\r\n            :default-time=\"['00:00:00', '23:59:59']\"\r\n            @change=\"handleDateChange\">\r\n          </el-date-picker>\r\n        </div>\r\n        <div class=\"form-item\">\r\n          <el-input\r\n            v-model=\"searchText\"\r\n            placeholder=\"姓名/入院编号\"\r\n            class=\"search-input\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"searchPatients\"></el-button>\r\n          </el-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"stats-section\">\r\n      <div class=\"stat-items\">\r\n        <el-tag size=\"medium\">入住长者 {{ totalPatients }}</el-tag>\r\n        <el-tag type=\"warning\" size=\"medium\">待建档 {{ pendingRecords }}</el-tag>\r\n      </div>\r\n      <el-button \r\n        type=\"text\" \r\n        icon=\"el-icon-time\"\r\n        @click=\"viewHistory\">\r\n        历史档案\r\n      </el-button>\r\n    </div>\r\n\r\n    <div class=\"content-section\">\r\n      <el-table\r\n        v-loading=\"loading\"\r\n        :data=\"patients\"\r\n        style=\"width: 100%\"\r\n        border>\r\n        <el-table-column\r\n          label=\"姓名/身份证\"\r\n          width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <div class=\"patient-info\">\r\n              <el-avatar size=\"small\">{{ scope.row.name.charAt(0) }}</el-avatar>\r\n              <div class=\"patient-detail\">\r\n                <div>{{ scope.row.name }}</div>\r\n                <div class=\"id-number\">{{ scope.row.idNumber }}</div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"gender\"\r\n          label=\"性别\"\r\n          width=\"80\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"age\"\r\n          label=\"年龄\"\r\n          width=\"80\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"admissionNo\"\r\n          label=\"入院编号\"\r\n          width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"admissionDate\"\r\n          label=\"入院日期\"\r\n          width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"roomNumber\"\r\n          label=\"房间床位\"\r\n          width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"建档时间\"\r\n          width=\"140\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag :type=\"scope.row.hasRecord ? 'success' : 'warning'\" size=\"medium\">\r\n              {{ scope.row.recordTime || '待完善' }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"doctor\"\r\n          label=\"建档医生\"\r\n          width=\"120\">\r\n          <template slot-scope=\"scope\">\r\n            {{ scope.row.doctor || '-' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"操作\"\r\n          width=\"100\"\r\n          fixed=\"right\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"viewRecord(scope.row)\">\r\n              <i class=\"el-icon-view\"></i>\r\n              查看\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页 -->\r\n      <div class=\"pagination-section\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[10, 20, 50]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'HealthRecordView',\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      searchText: '',\r\n      dateRange: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      patients: [\r\n        {\r\n          id: 1,\r\n          name: '李大哥',\r\n          idNumber: '310106194805162428',\r\n          gender: '男',\r\n          age: 78,\r\n          admissionNo: '210124',\r\n          admissionDate: '2024-05-22',\r\n          roomNumber: '2022-01',\r\n          hasRecord: false,\r\n          recordTime: null,\r\n          doctor: null\r\n        },\r\n        {\r\n          id: 2,\r\n          name: '王大娘',\r\n          idNumber: '310106194805162428',\r\n          gender: '女',\r\n          age: 98,\r\n          admissionNo: '210124',\r\n          admissionDate: '2024-05-18',\r\n          roomNumber: '2024-02',\r\n          hasRecord: true,\r\n          recordTime: '2024-05-18 12:18',\r\n          doctor: '张医生'\r\n        },\r\n        {\r\n          id: 3,\r\n          name: '宋老博',\r\n          idNumber: '310106194805162428',\r\n          gender: '男',\r\n          age: 89,\r\n          admissionNo: '210124',\r\n          admissionDate: '2024-05-12',\r\n          roomNumber: '3000-02',\r\n          hasRecord: true,\r\n          recordTime: '2024-05-18 12:18',\r\n          doctor: 'XXXX'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    totalPatients() {\r\n      return this.patients.length;\r\n    },\r\n    pendingRecords() {\r\n      return this.patients.filter(p => !p.hasRecord).length;\r\n    }\r\n  },\r\n  methods: {\r\n    handleDateChange() {\r\n      this.currentPage = 1;\r\n      this.searchPatients();\r\n    },\r\n    searchPatients() {\r\n      // 实现搜索逻辑\r\n      console.log('搜索长者:', this.searchText, this.dateRange);\r\n    },\r\n    viewHistory() {\r\n      // 查看历史档案\r\n      console.log('查看历史档案');\r\n    },\r\n    viewRecord(patient) {\r\n      if (patient.hasRecord) {\r\n        // 如果已有档案，跳转到查看页面，默认显示医嘱管理标签\r\n        this.$router.push({\r\n          path: `/health-record/create/${patient.id}`,\r\n          query: { tab: 'medical' }\r\n        });\r\n      } else {\r\n        // 如果未建档，跳转到创建页面\r\n        this.$router.push(`/health-record/create/${patient.id}`);\r\n      }\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.currentPage = 1;\r\n      this.searchPatients();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      this.searchPatients();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.assessment-container {\r\n  background: #f0f4f7;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.05);\r\n\r\n  .search-section {\r\n    margin-bottom: 16px;\r\n    background: #e8ecef;\r\n    padding: 16px;\r\n    border-radius: 6px;\r\n    \r\n    .search-form {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 16px;\r\n\r\n      .form-item {\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        .label {\r\n          margin-right: 10px;\r\n          color: #5a6e6c;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .search-input {\r\n          width: 200px;\r\n\r\n          /deep/ .el-input__inner {\r\n            border-radius: 4px;\r\n            height: 34px;\r\n            line-height: 34px;\r\n            border-color: #b0c4c3;\r\n          }\r\n\r\n          /deep/ .el-input-group__append {\r\n            background: #3a7d7c;\r\n            border-color: #3a7d7c;\r\n            color: #fff;\r\n            padding: 0 12px;\r\n            \r\n            &:hover {\r\n              background: #5a9d9c;\r\n              border-color: #5a9d9c;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .stats-section {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 16px;\r\n    padding: 0 16px;\r\n\r\n    .stat-items {\r\n      display: flex;\r\n      gap: 16px;\r\n\r\n      .el-tag {\r\n        padding: 0 16px;\r\n        height: 32px;\r\n        line-height: 32px;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n\r\n    .el-button {\r\n      font-size: 14px;\r\n      color: #3a7d7c;\r\n\r\n      &:hover {\r\n        color: #5a9d9c;\r\n      }\r\n\r\n      i {\r\n        margin-right: 4px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .content-section {\r\n    background: #fff;\r\n    border-radius: 6px;\r\n    padding: 16px;\r\n    min-height: 400px;\r\n\r\n    /deep/ .el-table {\r\n      font-size: 13px;\r\n      color: #3a4a49;\r\n      \r\n      th {\r\n        background-color: #e8ecef;\r\n        color: #3a4a49;\r\n        font-weight: 600;\r\n        padding: 12px 0;\r\n      }\r\n\r\n      td {\r\n        padding: 12px;\r\n      }\r\n\r\n      .el-table__row:hover {\r\n        background-color: #f5f7f8;\r\n      }\r\n    }\r\n\r\n    .patient-info {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n\r\n      .patient-detail {\r\n        text-align: left;\r\n\r\n        .id-number {\r\n          font-size: 12px;\r\n          color: #909399;\r\n          margin-top: 4px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .el-tag {\r\n      border-radius: 4px;\r\n      padding: 0 12px;\r\n      height: 24px;\r\n      line-height: 24px;\r\n    }\r\n\r\n    .el-button--text {\r\n      color: #3a7d7c;\r\n      padding: 0 8px;\r\n      \r\n      &:hover {\r\n        color: #5a9d9c;\r\n      }\r\n\r\n      i {\r\n        margin-right: 4px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .pagination-section {\r\n    margin-top: 16px;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n  }\r\n}\r\n\r\n@media print {\r\n  .assessment-container {\r\n    background: none;\r\n    padding: 0;\r\n    box-shadow: none;\r\n  }\r\n\r\n  .search-section,\r\n  .stats-section,\r\n  .pagination-section {\r\n    display: none !important;\r\n  }\r\n}\r\n</style> "],"mappings":";;;AAwIA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,UAAA;MACAC,SAAA;MACAC,WAAA;MACAC,QAAA;MACAC,KAAA;MACAC,QAAA,GACA;QACAC,EAAA;QACAT,IAAA;QACAU,QAAA;QACAC,MAAA;QACAC,GAAA;QACAC,WAAA;QACAC,aAAA;QACAC,UAAA;QACAC,SAAA;QACAC,UAAA;QACAC,MAAA;MACA,GACA;QACAT,EAAA;QACAT,IAAA;QACAU,QAAA;QACAC,MAAA;QACAC,GAAA;QACAC,WAAA;QACAC,aAAA;QACAC,UAAA;QACAC,SAAA;QACAC,UAAA;QACAC,MAAA;MACA,GACA;QACAT,EAAA;QACAT,IAAA;QACAU,QAAA;QACAC,MAAA;QACAC,GAAA;QACAC,WAAA;QACAC,aAAA;QACAC,UAAA;QACAC,SAAA;QACAC,UAAA;QACAC,MAAA;MACA;IAEA;EACA;EACAC,QAAA;IACAC,cAAA;MACA,YAAAZ,QAAA,CAAAa,MAAA;IACA;IACAC,eAAA;MACA,YAAAd,QAAA,CAAAe,MAAA,CAAAC,CAAA,KAAAA,CAAA,CAAAR,SAAA,EAAAK,MAAA;IACA;EACA;EACAI,OAAA;IACAC,iBAAA;MACA,KAAArB,WAAA;MACA,KAAAsB,cAAA;IACA;IACAA,eAAA;MACA;MACAC,OAAA,CAAAC,GAAA,eAAA1B,UAAA,OAAAC,SAAA;IACA;IACA0B,YAAA;MACA;MACAF,OAAA,CAAAC,GAAA;IACA;IACAE,WAAAC,OAAA;MACA,IAAAA,OAAA,CAAAhB,SAAA;QACA;QACA,KAAAiB,OAAA,CAAAC,IAAA;UACAC,IAAA,2BAAAH,OAAA,CAAAvB,EAAA;UACA2B,KAAA;YAAAC,GAAA;UAAA;QACA;MACA;QACA;QACA,KAAAJ,OAAA,CAAAC,IAAA,0BAAAF,OAAA,CAAAvB,EAAA;MACA;IACA;IACA6B,iBAAAC,GAAA;MACA,KAAAjC,QAAA,GAAAiC,GAAA;MACA,KAAAlC,WAAA;MACA,KAAAsB,cAAA;IACA;IACAa,oBAAAD,GAAA;MACA,KAAAlC,WAAA,GAAAkC,GAAA;MACA,KAAAZ,cAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}