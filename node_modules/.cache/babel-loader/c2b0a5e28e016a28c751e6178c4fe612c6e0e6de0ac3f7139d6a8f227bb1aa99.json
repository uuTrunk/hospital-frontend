{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nexport default {\n  name: 'DischargeView',\n  data() {\n    return {\n      startDate: '',\n      endDate: '',\n      searchKeyword: '',\n      currentPage: 1,\n      pageSize: 10,\n      totalPages: 9,\n      showPrintModal: false,\n      selectedPatient: {},\n      patients: [{\n        id: 1,\n        name: 'æå¤§å“¥',\n        idNumber: '310106194805162428',\n        gender: 'ç”·',\n        age: 78,\n        admissionDate: '2024-05-22',\n        dischargeReason: 'è‡ªåŠ¨å‡ºé™¢',\n        dischargeDate: '2025-01-22',\n        dischargeSummary: {\n          status: 'pending',\n          time: '',\n          operator: ''\n        },\n        dischargeHanding: {\n          status: 'completed',\n          time: '',\n          operator: 'ç‹ä¸»ä»»'\n        }\n      }, {\n        id: 2,\n        name: 'ç‹å¤§å¨˜',\n        idNumber: '310106194805162428',\n        gender: 'å¥³',\n        age: 98,\n        admissionDate: '2023-05-18',\n        dischargeReason: 'æœ¬é™¢æ­»äº¡',\n        dischargeDate: '2024-01-18',\n        dischargeSummary: {\n          status: 'completed',\n          time: '2024-05-18 12:18',\n          operator: 'åˆ˜åŒ»ç”Ÿ'\n        },\n        dischargeHanding: {\n          status: 'completed',\n          time: '',\n          operator: 'ç‹ä¸»ä»»'\n        }\n      }, {\n        id: 3,\n        name: 'å®‹è€åš',\n        idNumber: '310106194805162428',\n        gender: 'ç”·',\n        age: 89,\n        admissionDate: '2024-05-12',\n        dischargeReason: 'å¤–é™¢æ­»äº¡',\n        dischargeDate: '2024-09-12',\n        dischargeSummary: {\n          status: 'completed',\n          time: '2024-05-18 12:18',\n          operator: 'åˆ˜åŒ»ç”Ÿ'\n        },\n        dischargeHanding: {\n          status: 'completed',\n          time: '2024-05-18 12:18',\n          operator: 'å¼ æŠ¤å£«'\n        }\n      }]\n    };\n  },\n  computed: {\n    visiblePages() {\n      const pages = [];\n      let startPage = Math.max(this.currentPage - 2, 1);\n      let endPage = Math.min(startPage + 4, this.totalPages);\n      if (endPage - startPage < 4) {\n        startPage = Math.max(endPage - 4, 1);\n      }\n      for (let i = startPage; i <= endPage; i++) {\n        pages.push(i);\n      }\n      return pages;\n    },\n    filteredPatients() {\n      // è¿‡æ»¤æ‚£è€…åˆ—è¡¨\n      let result = [...this.patients];\n\n      // æ ¹æ®å…³é”®å­—æœç´¢\n      if (this.searchKeyword) {\n        const keyword = this.searchKeyword.toLowerCase();\n        result = result.filter(patient => patient.name.toLowerCase().includes(keyword) || patient.idNumber.includes(keyword));\n      }\n\n      // æ ¹æ®æ—¥æœŸèŒƒå›´ç­›é€‰\n      if (this.startDate && this.endDate) {\n        const start = new Date(this.startDate);\n        const end = new Date(this.endDate);\n        result = result.filter(patient => {\n          const dischargeDate = new Date(patient.dischargeDate);\n          return dischargeDate >= start && dischargeDate <= end;\n        });\n      }\n      return result;\n    }\n  },\n  methods: {\n    goToAdmission() {\n      this.$router.push('/assessment');\n    },\n    searchPatients() {\n      // å®ç°æœç´¢åŠŸèƒ½\n      console.log('æœç´¢:', this.searchKeyword, this.startDate, this.endDate);\n      this.currentPage = 1; // é‡ç½®åˆ°ç¬¬ä¸€é¡µ\n    },\n    changePage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    },\n    changePageSize() {\n      this.currentPage = 1; // åˆ‡æ¢æ¯é¡µæ˜¾ç¤ºæ•°é‡æ—¶é‡ç½®åˆ°ç¬¬ä¸€é¡µ\n    },\n    editDischarge(patient) {\n      // ç¼–è¾‘ç¦»é™¢ä¿¡æ¯\n      console.log('ç¼–è¾‘ç¦»é™¢ä¿¡æ¯:', patient);\n      // è·³è½¬åˆ°è¡¨å•ç¼–è¾‘é¡µé¢\n      this.$router.push(`/discharge-form/${patient.id}`);\n    },\n    printDischarge(patient) {\n      // æ‰“å°ç¦»é™¢ä¿¡æ¯\n      console.log('æ‰“å°ç¦»é™¢ä¿¡æ¯:', patient);\n      this.selectedPatient = patient;\n      this.showPrintModal = true;\n    },\n    viewDischargeDetails(patient) {\n      // æŸ¥çœ‹ç¦»é™¢è¯¦æƒ…\n      console.log('æŸ¥çœ‹ç¦»é™¢è¯¦æƒ…:', patient);\n      // æŸ¥çœ‹æ¨¡å¼è·³è½¬åˆ°è¡¨å•é¡µé¢\n      this.$router.push({\n        path: `/discharge-form/${patient.id}`,\n        query: {\n          mode: 'view'\n        }\n      });\n    },\n    canEdit(patient) {\n      // åˆ¤æ–­æ˜¯å¦å¯ä»¥ç¼–è¾‘ç¦»é™¢ä¿¡æ¯\n      // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤šé€»è¾‘åˆ¤æ–­ï¼Œä¾‹å¦‚æ ¹æ®æƒé™æˆ–çŠ¶æ€å†³å®š\n      return patient.id !== 3; // ç¤ºä¾‹é€»è¾‘ï¼Œå®é™…åº”æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®ç°\n    },\n    closePrintModal() {\n      this.showPrintModal = false;\n    },\n    actualPrint() {\n      // åˆ›å»ºæ‰“å°å†…å®¹\n      const printContent = document.querySelector('.print-modal-content').innerHTML;\n      const originalContent = document.body.innerHTML;\n\n      // æ›¿æ¢å†…å®¹ä¸ºæ‰“å°å†…å®¹\n      document.body.innerHTML = `\n        <div class=\"print-only\">\n          ${printContent}\n        </div>\n        <style>\n          .modal-actions { display: none; }\n          @media print {\n            body { margin: 0; padding: 20px; }\n            .print-only { width: 100%; }\n          }\n        </style>\n      `;\n\n      // æ‰§è¡Œæ‰“å°\n      window.print();\n\n      // æ¢å¤åŸå§‹å†…å®¹\n      document.body.innerHTML = originalContent;\n\n      // ç”±äºæ¢å¤äº†åŸå§‹å†…å®¹ï¼ŒVueå®ä¾‹ä¹Ÿè¢«é‡ç½®ï¼Œéœ€è¦æ‰‹åŠ¨é‡æ–°æ‰§è¡Œ\n      this.$nextTick(() => {\n        this.closePrintModal();\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","startDate","endDate","searchKeyword","currentPage","pageSize","totalPages","showPrintModal","selectedPatient","patients","id","idNumber","gender","age","admissionDate","dischargeReason","dischargeDate","dischargeSummary","status","time","operator","dischargeHanding","computed","visiblePages","pages","startPage","Math","max","endPage","min","i","push","filteredPatients","result","keyword","toLowerCase","filter","patient","includes","start","Date","end","methods","goToAdmission","$router","searchPatients","console","log","changePage","page","changePageSize","editDischarge","printDischarge","viewDischargeDetails","path","query","mode","canEdit","closePrintModal","actualPrint","printContent","document","querySelector","innerHTML","originalContent","body","window","print","$nextTick"],"sources":["src/views/Discharge.vue"],"sourcesContent":["<template>\n  <div class=\"discharge\">\n    <!-- é€‰é¡¹å¡æ ‡é¢˜ -->\n    <div class=\"tabs\">\n      <div class=\"tab\" :class=\"{ active: false }\" @click=\"goToAdmission\">å…¥é™¢è¯„ä¼°(2)</div>\n      <div class=\"tab\" :class=\"{ active: true }\">ç¦»é™¢åŠç†(1)</div>\n      <div class=\"tab-active-indicator\" :style=\"{ left: '143px' }\"></div>\n    </div>\n\n    <!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ -->\n    <div class=\"filter-area\">\n      <div class=\"date-filter\">\n        <span>ç¦»é™¢æ—¥æœŸ</span>\n        <input type=\"date\" class=\"date-input\" v-model=\"startDate\">\n        <span>è‡³</span>\n        <input type=\"date\" class=\"date-input\" v-model=\"endDate\">\n        <button class=\"search-btn\" @click=\"searchPatients\"><i class=\"icon-search\"></i></button>\n      </div>\n      <div class=\"search-box\">\n        <input type=\"text\" class=\"search-input\" placeholder=\"å§“å/å…¥é™¢ç¼–å·\" v-model=\"searchKeyword\">\n        <button class=\"search-btn\" @click=\"searchPatients\"><i class=\"icon-search\"></i></button>\n      </div>\n    </div>\n\n    <!-- æç¤ºä¿¡æ¯ -->\n    <div class=\"notice\">\n      <p>æç¤ºï¼šå®Œå…¨ç¦»é™¢æµç¨‹æ‰‹ç»­åï¼Œç¦»é™¢å°ç»“æ•°æ®ä¸å¯å†ä¿®æ”¹</p>\n    </div>\n\n    <!-- è¡¨æ ¼å†…å®¹ -->\n    <div class=\"table-wrapper\">\n      <table class=\"data-table\">\n        <thead>\n          <tr>\n            <th>å§“å/èº«ä»½è¯</th>\n            <th>æ€§åˆ«</th>\n            <th>å¹´é¾„</th>\n            <th>å…¥é™¢æ—¥æœŸ</th>\n            <th>ç¦»é™¢åŸå› </th>\n            <th>ç¦»é™¢æ—¥æœŸ</th>\n            <th>ç¦»é™¢å°ç»“</th>\n            <th>ç¦»é™¢äº¤æ¥</th>\n            <th>æ“ä½œ</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"patient in filteredPatients\" :key=\"patient.id\">\n            <td>\n              <div>{{ patient.name }}</div>\n              <div class=\"id-number\">{{ patient.idNumber }}</div>\n            </td>\n            <td>{{ patient.gender }}</td>\n            <td>{{ patient.age }}</td>\n            <td>{{ patient.admissionDate }}</td>\n            <td>{{ patient.dischargeReason }}</td>\n            <td>{{ patient.dischargeDate }}</td>\n            <td class=\"status-cell\">\n              <div v-if=\"patient.dischargeSummary.status === 'pending'\" class=\"status-pending\">\n                å¾…å½•å…¥\n              </div>\n              <div v-else-if=\"patient.dischargeSummary.status === 'completed'\" class=\"status-completed\" :title=\"'ç»åŠäººï¼š' + (patient.dischargeSummary.operator || 'æœªçŸ¥')\">\n                <i class=\"icon-check\"></i>\n                <div>{{ patient.dischargeSummary.time }}</div>\n              </div>\n            </td>\n            <td class=\"status-cell\">\n              <div v-if=\"patient.dischargeHanding.status === 'pending'\" class=\"status-pending\">\n                å¾…äº¤æ¥\n              </div>\n              <div v-else-if=\"patient.dischargeHanding.status === 'completed'\" class=\"status-completed\" :title=\"'ç»åŠäººï¼š' + (patient.dischargeHanding.operator || 'æœªçŸ¥')\">\n                <i class=\"icon-check\"></i>\n                <div>{{ patient.dischargeHanding.time || 'ç‰¹å®Œæˆ' }}</div>\n              </div>\n            </td>\n            <td>\n              <div v-if=\"patient.dischargeSummary.status === 'pending'\" class=\"action-btns\">\n                <button class=\"edit-btn\" @click=\"editDischarge(patient)\"><i class=\"icon-edit\"></i></button>\n              </div>\n              <div v-else class=\"action-btns\">\n                <button class=\"print-btn\" @click=\"printDischarge(patient)\"><i class=\"icon-print\"></i></button>\n                <button v-if=\"canEdit(patient)\" class=\"edit-btn\" @click=\"editDischarge(patient)\"><i class=\"icon-edit\"></i></button>\n                <button v-else class=\"detail-btn\" @click=\"viewDischargeDetails(patient)\"><i class=\"icon-detail\"></i></button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- åˆ†é¡µåŒºåŸŸ -->\n    <div class=\"pagination\">\n      <button class=\"page-btn prev\" :disabled=\"currentPage === 1\" @click=\"changePage(currentPage - 1)\"><i class=\"icon-prev\"></i></button>\n      <div class=\"page-numbers\">\n        <span \n          v-for=\"page in visiblePages\" \n          :key=\"page\" \n          class=\"page-number\" \n          :class=\"{ active: currentPage === page }\" \n          @click=\"changePage(page)\"\n        >\n          {{ page }}\n        </span>\n      </div>\n      <button class=\"page-btn next\" :disabled=\"currentPage === totalPages\" @click=\"changePage(currentPage + 1)\"><i class=\"icon-next\"></i></button>\n      <div class=\"page-size-selector\">\n        <select v-model=\"pageSize\" @change=\"changePageSize\">\n          <option value=\"10\">10æ¡/é¡µ</option>\n          <option value=\"20\">20æ¡/é¡µ</option>\n          <option value=\"50\">50æ¡/é¡µ</option>\n        </select>\n      </div>\n    </div>\n\n    <!-- æç¤ºé¢æ¿ -->\n    <div class=\"tip-panel\">\n      <ol>\n        <li>å…»è€é™¢æ–°ç”³è¯·è€…ï¼Œè¿›å…¥è¯„ä¼°ï¼ˆæœªç”³è¯·éœ€æ±‚çš„è€äººï¼Œä¸åœ¨æ­¤åˆ—è¡¨å±•ç¤ºï¼‰</li>\n        <li>æœªå®Œæˆå¥åº·è¯„ä¼°å‰ï¼Œå‡å¤„ä¸ºå¾…è¯„ä¼°</li>\n        <li>å®Œå…¨æµç¨‹ç”³è¯·æµç¨‹ï¼ˆç»¿è‰²å°ç‚¹ï¼‰ï¼Œæç¤ºè¯„ä¼°å…¥é™¢å½•ï¼ˆå…¥é™¢æ°‘è·å¾—å¯åœ¨çŠ¶æ€ï¼‰</li>\n      </ol>\n    </div>\n\n    <!-- æ‰“å°æ¨¡æ€æ¡† -->\n    <div class=\"print-modal\" v-if=\"showPrintModal\" @click.self=\"closePrintModal\">\n      <div class=\"print-modal-content\">\n        <div class=\"print-header\">\n          <h2>ä¸Šæµ·XXæœºæ„</h2>\n          <h3>å‡ºé™¢å°ç»“</h3>\n        </div>\n\n        <div class=\"patient-info\">\n          <div class=\"info-row\">\n            <div class=\"info-item\">\n              <label>å§“å</label>\n              <span>{{ selectedPatient.name }}</span>\n            </div>\n            <div class=\"info-item\">\n              <label>ç—…åŒº</label>\n              <span>ç”Ÿæ´»åŒº</span>\n            </div>\n            <div class=\"info-item\">\n              <label>æˆ¿é—´åºŠä½</label>\n              <span>3207-5</span>\n            </div>\n            <div class=\"info-item\">\n              <label>ä½é™¢å·</label>\n              <span>F01668</span>\n            </div>\n          </div>\n\n          <div class=\"info-row\">\n            <div class=\"info-item\">\n              <label>å§“å</label>\n              <span>{{ selectedPatient.name }}</span>\n            </div>\n            <div class=\"info-item\">\n              <label>æ€§åˆ«</label>\n              <span>{{ selectedPatient.gender }}</span>\n            </div>\n            <div class=\"info-item\">\n              <label>å¹´é¾„</label>\n              <span>{{ selectedPatient.age }}</span>\n            </div>\n            <div class=\"info-item\">\n              <label>èŒä¸š</label>\n              <span>çººç»‡å‚å·¥äºº</span>\n            </div>\n          </div>\n\n          <div class=\"info-row\">\n            <div class=\"info-item\">\n              <label>å…¥é™¢æ—¥æœŸ</label>\n              <span>{{ selectedPatient.admissionDate }}</span>\n            </div>\n            <div class=\"info-item\">\n              <label>å‡ºé™¢æ—¥æœŸ</label>\n              <span>{{ selectedPatient.dischargeDate }}</span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"diagnosis-section\">\n          <div class=\"section-title\">å…¥é™¢è¯Šæ–­</div>\n          <div class=\"diagnosis-list\">\n            <div>1. é«˜è¡€å‹ç—…</div>\n            <div>2. ç¾å°¼å°”ç»¼åˆå¾</div>\n            <div>3. è€å¹´æ€§ç²¾ç¥éšœç¢</div>\n            <div>4. é˜»å¡é’™çŸ³åºŠå</div>\n          </div>\n        </div>\n\n        <div class=\"treatment-section\">\n          <div class=\"section-title\">å…¥é™¢æƒ…å†µ</div>\n          <div class=\"treatment-content\">\n            å¯¹è±¡ {{ selectedPatient.name }}ï¼Œ{{ selectedPatient.gender }}ï¼Œ{{ selectedPatient.age }}å² 2024å¹´2æœˆ12æ—¥ï¼Œå› å®¶ä¸­å­å¥³ä¸Šç­æ— äººç…§æ–™ä¸”ç”Ÿæ´»æ— æ³•è‡ªç†å…¥é™¢ã€‚è€äººäºåå¹´å‰æ¯åˆ°æ˜¥å­£å­£èŠ‚åŠå¤©æ°”å˜åŒ–å—å‡‰åä¾¿å¼€å§‹å‡ºç°å’³å—½ã€å’³ç—°ã€æ°”ä¿ƒã€å—œç¡ä¸é€‚ï¼Œç—°å¤§é‡é»„ç™½è‰²ç²˜ç—°ï¼Œå‰§çƒˆå’³å—½åŠæ´»åŠ¨åèƒ¸é—·ã€æ°”ä¿ƒåŠ é‡ï¼Œæ¯æ¬¡å‘ä½œæ—¶é—´æŒç»­ä¸‰ä¸ªæœˆä»¥ä¸Šï¼Œæ›¾å¤šæ¬¡ä½é™¢å°±è¯Šæ²»ç–—ï¼ˆå…·ä½“ç”¨è¯ä¸è¯¦ï¼‰ã€‚è¿‘åå¤©æ¥ï¼Œæ‚£è€…ä¸Šè¿°ç—‡çŠ¶å†æ¬¡å‘ä½œï¼Œå‘ˆè¿›è¡Œæ€§åŠ é‡è¶‹åŠ¿ï¼Œæ— å‘çƒ­ã€å‘•è¡€ã€å’¯è¡€ã€è…¹èƒ€ã€è…¹æ³»ç­‰ä¸é€‚ã€‚æ—¢å¾€ä½“è´¨ä¸€èˆ¬ï¼Œæ›¾æ‚£ç–¾ç—…ï¼š\"è‚›é—¨è„±å‚\"ç—…å²ä¸¤å¹´ä½™ï¼Œå…·ä½“ä¸è¯¦ã€‚æœ‰é«˜è¡€å‹ã€ç³–å°¿ç—…ï¼Œé¢„é˜²æ¥ç§å²ä¸è¯¦ã€‚\n          </div>\n        </div>\n\n        <div class=\"treatment-section\">\n          <div class=\"section-title\">åœ¨é™¢æ²»ç–—æƒ…å†µ</div>\n          <div class=\"treatment-content\">\n            å®¶ä¸­å­å¥³ä¸Šç­æ— äººç…§æ–™ä¸”ç”Ÿæ´»æ— æ³•è‡ªç†å…¥é™¢ã€‚è€äººäºåå¹´å‰æ¯åˆ°æ˜¥å­£å­£èŠ‚åŠå¤©æ°”å˜åŒ–å—å‡‰åä¾¿å¼€å§‹å‡ºç°å’³å—½ã€å’³ç—°ã€æ°”ä¿ƒã€å—œç¡ä¸é€‚ï¼Œç—°å¤§é‡é»„ç™½è‰²ç²˜ç—°ï¼Œå‰§çƒˆå’³å—½åŠæ´»åŠ¨åèƒ¸é—·ã€æ°”ä¿ƒåŠ é‡ï¼Œæ¯æ¬¡å‘ä½œæ—¶é—´æŒç»­ä¸‰ä¸ªæœˆä»¥ä¸Šï¼Œæ›¾å¤šæ¬¡ä½é™¢å°±è¯Šæ²»ç–—ï¼ˆå…·ä½“ç”¨è¯ä¸è¯¦ï¼‰ã€‚\n          </div>\n        </div>\n\n        <div class=\"discharge-section\">\n          <div class=\"section-title\">å‡ºé™¢æƒ…å†µ</div>\n          <div class=\"treatment-content\">\n            è¿‘åå¤©æ¥ï¼Œæ‚£è€…ä¸Šè¿°ç—‡çŠ¶å†æ¬¡å‘ä½œï¼Œå‘ˆè¿›è¡Œæ€§åŠ é‡è¶‹åŠ¿ï¼Œæ— å‘çƒ­ã€å‘•è¡€ã€å’¯è¡€ã€è…¹èƒ€ã€è…¹æ³»ç­‰ä¸é€‚ã€‚æ—¢å¾€ä½“è´¨ä¸€èˆ¬ï¼Œæ›¾æ‚£ç–¾ç—…ï¼š\"è‚›é—¨è„±å‚\"ç—…å²ä¸¤å¹´ä½™ï¼Œå…·ä½“ä¸è¯¦ã€‚æœ‰é«˜è¡€å‹ã€ç³–å°¿ç—…ï¼Œé¢„é˜²æ¥ç§å²ä¸è¯¦ã€‚\n          </div>\n        </div>\n\n        <div class=\"page-info\">\n          <span>ç¬¬1é¡µ</span>\n          <span class=\"doctor-sign\">ç­¾åï¼š</span>\n        </div>\n\n        <div class=\"patient-info-second-page\">\n          <div class=\"info-row\">\n            <div class=\"info-item\">\n              <label>å§“å</label>\n              <span>{{ selectedPatient.name }}</span>\n            </div>\n            <div class=\"info-item\">\n              <label>ç—…åŒº</label>\n              <span>ç”Ÿæ´»åŒº</span>\n            </div>\n            <div class=\"info-item\">\n              <label>æˆ¿é—´åºŠä½</label>\n              <span>3207-5</span>\n            </div>\n            <div class=\"info-item\">\n              <label>ä½é™¢å·</label>\n              <span>F01668</span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"diagnosis-section\">\n          <div class=\"section-title\">å‡ºé™¢è¯Šæ–­</div>\n          <div class=\"diagnosis-list\">\n            <div>1. é«˜è¡€å‹ç—…</div>\n            <div>2. ç¾å°¼å°”ç»¼åˆå¾</div>\n            <div>3. è€å¹´æ€§ç²¾ç¥éšœç¢</div>\n            <div>4. é˜»å¡é’™çŸ³åºŠå</div>\n          </div>\n        </div>\n\n        <div class=\"advice-section\">\n          <div class=\"section-title\">å‡ºé™¢åŒ»å˜±</div>\n          <div class=\"advice-list\">\n            <div>1. æ³¨æ„ç”Ÿæ´»ä½œæ¯è§„å¾‹ï¼Œæ¸…æ·¡é¥®é£Ÿ</div>\n            <div>2. æ§åˆ¶è¡€å‹</div>\n            <div>3. å®šæœŸæ£€æŸ¥ï¼Œä¸é€‚éšè¯Š</div>\n          </div>\n        </div>\n\n        <div class=\"doctor-section\">\n          <div class=\"doctor-info\">\n            <div>åŒ»ç”Ÿç­¾åï¼š</div>\n            <div>æ—¥æœŸï¼š2024-06-12</div>\n          </div>\n        </div>\n\n        <div class=\"notes-section\">\n          <div class=\"notes-content\">\n            <div>1. æŒ‰é™¢A4æ‰“å°æ ¼å¼</div>\n            <div>2. é¦–é¡µç¬¬ç­¾æœ‰ç«ç‚¬æ ‡å¿—ï¼Œç¬¬ä¸‰é¡µåŠä»¥åæ— ç«ç‚¬æ ‡é¢˜</div>\n            <div>3. åŒ»ç”Ÿç­¾åæ‰‹å†™å¯ä»¥</div>\n            <div>4. éœ€è¦å½©è‰²æ‰“å°</div>\n          </div>\n        </div>\n\n        <div class=\"page-info\">\n          <span>ç¬¬2é¡µ</span>\n          <span class=\"doctor-sign\">ç­¾åï¼š</span>\n        </div>\n\n        <div class=\"modal-actions\">\n          <button class=\"btn-close\" @click=\"closePrintModal\">å…³é—­</button>\n          <button class=\"btn-print\" @click=\"actualPrint\">æ‰“å°</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DischargeView',\n  data() {\n    return {\n      startDate: '',\n      endDate: '',\n      searchKeyword: '',\n      currentPage: 1,\n      pageSize: 10,\n      totalPages: 9,\n      showPrintModal: false,\n      selectedPatient: {},\n      patients: [\n        {\n          id: 1,\n          name: 'æå¤§å“¥',\n          idNumber: '310106194805162428',\n          gender: 'ç”·',\n          age: 78,\n          admissionDate: '2024-05-22',\n          dischargeReason: 'è‡ªåŠ¨å‡ºé™¢',\n          dischargeDate: '2025-01-22',\n          dischargeSummary: { status: 'pending', time: '', operator: '' },\n          dischargeHanding: { status: 'completed', time: '', operator: 'ç‹ä¸»ä»»' }\n        },\n        {\n          id: 2,\n          name: 'ç‹å¤§å¨˜',\n          idNumber: '310106194805162428',\n          gender: 'å¥³',\n          age: 98,\n          admissionDate: '2023-05-18',\n          dischargeReason: 'æœ¬é™¢æ­»äº¡',\n          dischargeDate: '2024-01-18',\n          dischargeSummary: { status: 'completed', time: '2024-05-18 12:18', operator: 'åˆ˜åŒ»ç”Ÿ' },\n          dischargeHanding: { status: 'completed', time: '', operator: 'ç‹ä¸»ä»»' }\n        },\n        {\n          id: 3,\n          name: 'å®‹è€åš',\n          idNumber: '310106194805162428',\n          gender: 'ç”·',\n          age: 89,\n          admissionDate: '2024-05-12',\n          dischargeReason: 'å¤–é™¢æ­»äº¡',\n          dischargeDate: '2024-09-12',\n          dischargeSummary: { status: 'completed', time: '2024-05-18 12:18', operator: 'åˆ˜åŒ»ç”Ÿ' },\n          dischargeHanding: { status: 'completed', time: '2024-05-18 12:18', operator: 'å¼ æŠ¤å£«' }\n        }\n      ]\n    }\n  },\n  computed: {\n    visiblePages() {\n      const pages = [];\n      let startPage = Math.max(this.currentPage - 2, 1);\n      let endPage = Math.min(startPage + 4, this.totalPages);\n      \n      if (endPage - startPage < 4) {\n        startPage = Math.max(endPage - 4, 1);\n      }\n      \n      for (let i = startPage; i <= endPage; i++) {\n        pages.push(i);\n      }\n      \n      return pages;\n    },\n    filteredPatients() {\n      // è¿‡æ»¤æ‚£è€…åˆ—è¡¨\n      let result = [...this.patients];\n      \n      // æ ¹æ®å…³é”®å­—æœç´¢\n      if (this.searchKeyword) {\n        const keyword = this.searchKeyword.toLowerCase();\n        result = result.filter(patient => \n          patient.name.toLowerCase().includes(keyword) ||\n          patient.idNumber.includes(keyword)\n        );\n      }\n      \n      // æ ¹æ®æ—¥æœŸèŒƒå›´ç­›é€‰\n      if (this.startDate && this.endDate) {\n        const start = new Date(this.startDate);\n        const end = new Date(this.endDate);\n        result = result.filter(patient => {\n          const dischargeDate = new Date(patient.dischargeDate);\n          return dischargeDate >= start && dischargeDate <= end;\n        });\n      }\n      \n      return result;\n    }\n  },\n  methods: {\n    goToAdmission() {\n      this.$router.push('/assessment');\n    },\n    searchPatients() {\n      // å®ç°æœç´¢åŠŸèƒ½\n      console.log('æœç´¢:', this.searchKeyword, this.startDate, this.endDate);\n      this.currentPage = 1; // é‡ç½®åˆ°ç¬¬ä¸€é¡µ\n    },\n    changePage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    },\n    changePageSize() {\n      this.currentPage = 1; // åˆ‡æ¢æ¯é¡µæ˜¾ç¤ºæ•°é‡æ—¶é‡ç½®åˆ°ç¬¬ä¸€é¡µ\n    },\n    editDischarge(patient) {\n      // ç¼–è¾‘ç¦»é™¢ä¿¡æ¯\n      console.log('ç¼–è¾‘ç¦»é™¢ä¿¡æ¯:', patient);\n      // è·³è½¬åˆ°è¡¨å•ç¼–è¾‘é¡µé¢\n      this.$router.push(`/discharge-form/${patient.id}`);\n    },\n    printDischarge(patient) {\n      // æ‰“å°ç¦»é™¢ä¿¡æ¯\n      console.log('æ‰“å°ç¦»é™¢ä¿¡æ¯:', patient);\n      this.selectedPatient = patient;\n      this.showPrintModal = true;\n    },\n    viewDischargeDetails(patient) {\n      // æŸ¥çœ‹ç¦»é™¢è¯¦æƒ…\n      console.log('æŸ¥çœ‹ç¦»é™¢è¯¦æƒ…:', patient);\n      // æŸ¥çœ‹æ¨¡å¼è·³è½¬åˆ°è¡¨å•é¡µé¢\n      this.$router.push({\n        path: `/discharge-form/${patient.id}`,\n        query: { mode: 'view' }\n      });\n    },\n    canEdit(patient) {\n      // åˆ¤æ–­æ˜¯å¦å¯ä»¥ç¼–è¾‘ç¦»é™¢ä¿¡æ¯\n      // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤šé€»è¾‘åˆ¤æ–­ï¼Œä¾‹å¦‚æ ¹æ®æƒé™æˆ–çŠ¶æ€å†³å®š\n      return patient.id !== 3; // ç¤ºä¾‹é€»è¾‘ï¼Œå®é™…åº”æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®ç°\n    },\n    closePrintModal() {\n      this.showPrintModal = false;\n    },\n    actualPrint() {\n      // åˆ›å»ºæ‰“å°å†…å®¹\n      const printContent = document.querySelector('.print-modal-content').innerHTML;\n      const originalContent = document.body.innerHTML;\n      \n      // æ›¿æ¢å†…å®¹ä¸ºæ‰“å°å†…å®¹\n      document.body.innerHTML = `\n        <div class=\"print-only\">\n          ${printContent}\n        </div>\n        <style>\n          .modal-actions { display: none; }\n          @media print {\n            body { margin: 0; padding: 20px; }\n            .print-only { width: 100%; }\n          }\n        </style>\n      `;\n      \n      // æ‰§è¡Œæ‰“å°\n      window.print();\n      \n      // æ¢å¤åŸå§‹å†…å®¹\n      document.body.innerHTML = originalContent;\n      \n      // ç”±äºæ¢å¤äº†åŸå§‹å†…å®¹ï¼ŒVueå®ä¾‹ä¹Ÿè¢«é‡ç½®ï¼Œéœ€è¦æ‰‹åŠ¨é‡æ–°æ‰§è¡Œ\n      this.$nextTick(() => {\n        this.closePrintModal();\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.discharge {\n  background-color: white;\n  border-radius: 4px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  padding: 20px;\n}\n\nh1 {\n  font-size: 24px;\n  margin-bottom: 20px;\n  color: #333;\n}\n\n/* é€‰é¡¹å¡æ ·å¼ */\n.tabs {\n  display: flex;\n  border-bottom: 1px solid #e0e0e0;\n  position: relative;\n  margin-bottom: 20px;\n}\n\n.tab {\n  padding: 12px 20px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #666;\n  position: relative;\n}\n\n.tab.active {\n  color: #2196f3;\n  font-weight: bold;\n}\n\n.tab-active-indicator {\n  position: absolute;\n  bottom: -1px;\n  left: 0;\n  height: 2px;\n  width: 143px;\n  background-color: #2196f3;\n}\n\n/* ç­›é€‰åŒºåŸŸæ ·å¼ */\n.filter-area {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 15px;\n}\n\n.date-filter {\n  display: flex;\n  align-items: center;\n}\n\n.date-filter span {\n  margin: 0 5px;\n  color: #666;\n}\n\n.date-input {\n  padding: 6px 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 13px;\n}\n\n.search-box {\n  display: flex;\n}\n\n.search-input {\n  width: 200px;\n  padding: 6px 10px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 13px;\n}\n\n.search-btn {\n  width: 32px;\n  height: 32px;\n  background-color: #2196f3;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  margin-left: 5px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.icon-search:before {\n  content: \"ğŸ”\";\n  font-size: 14px;\n}\n\n/* æç¤ºä¿¡æ¯æ ·å¼ */\n.notice {\n  padding: 10px;\n  font-size: 12px;\n  color: #666;\n  background-color: #f9f9f9;\n  border-radius: 4px;\n  margin-bottom: 15px;\n}\n\n/* è¡¨æ ¼æ ·å¼ */\n.table-wrapper {\n  overflow-x: auto;\n}\n\n.data-table {\n  width: 100%;\n  border-collapse: collapse;\n  text-align: center;\n}\n\n.data-table th {\n  background-color: #f5f5f5;\n  padding: 10px;\n  font-weight: normal;\n  color: #666;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.data-table td {\n  padding: 12px 10px;\n  border-bottom: 1px solid #e0e0e0;\n  color: #333;\n}\n\n.id-number {\n  font-size: 12px;\n  color: #999;\n  margin-top: 4px;\n}\n\n.status-cell {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.status-pending {\n  color: #f44336;\n}\n\n.status-completed {\n  color: #4caf50;\n  font-size: 12px;\n  position: relative;\n  cursor: pointer;\n}\n\n.completed-icon {\n  color: #4caf50;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 12px;\n  position: relative;\n}\n\n.completed-icon:hover::after,\n.status-completed:hover::after {\n  content: attr(title);\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: #fff;\n  padding: 5px 10px;\n  border-radius: 4px;\n  white-space: nowrap;\n  z-index: 10;\n  font-size: 12px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n}\n\n.icon-check:before {\n  content: \"âœ“\";\n  font-size: 16px;\n  color: #4caf50;\n}\n\n.action-btns {\n  display: flex;\n  justify-content: center;\n  gap: 5px;\n}\n\n.edit-btn, .print-btn, .detail-btn {\n  width: 30px;\n  height: 30px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  background-color: #f0f0f0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.edit-btn:hover, .print-btn:hover, .detail-btn:hover {\n  background-color: #e0e0e0;\n}\n\n.icon-edit:before {\n  content: \"âœï¸\";\n  font-size: 12px;\n}\n\n.icon-print:before {\n  content: \"ğŸ–¨ï¸\";\n  font-size: 12px;\n}\n\n.icon-detail:before {\n  content: \"ğŸ‘ï¸\";\n  font-size: 12px;\n}\n\n/* åˆ†é¡µæ ·å¼ */\n.pagination {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 20px;\n}\n\n.page-btn {\n  width: 30px;\n  height: 30px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  background-color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.page-btn:hover {\n  background-color: #f5f5f5;\n}\n\n.page-numbers {\n  display: flex;\n  margin: 0 10px;\n}\n\n.page-number {\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 2px;\n  cursor: pointer;\n  border-radius: 4px;\n}\n\n.page-number:hover {\n  background-color: #f5f5f5;\n}\n\n.page-number.active {\n  background-color: #2196f3;\n  color: white;\n}\n\n.page-size-selector {\n  margin-left: 15px;\n}\n\n.page-size-selector select {\n  padding: 5px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  background-color: white;\n}\n\n/* æç¤ºé¢æ¿æ ·å¼ */\n.tip-panel {\n  margin-top: 20px;\n  padding: 15px;\n  background-color: #fff9c4;\n  border-radius: 4px;\n}\n\n.tip-panel ol {\n  padding-left: 20px;\n  margin: 0;\n}\n\n.tip-panel li {\n  font-size: 12px;\n  color: #666;\n  margin-bottom: 5px;\n}\n\n.icon-prev:before {\n  content: \"<\";\n}\n\n.icon-next:before {\n  content: \">\";\n}\n\n.content-placeholder {\n  display: none;\n}\n\n/* æ‰“å°æ¨¡æ€æ¡†æ ·å¼ */\n.print-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.print-modal-content {\n  background-color: white;\n  width: 800px;\n  max-height: 90vh;\n  overflow-y: auto;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.print-header {\n  text-align: center;\n  margin-bottom: 20px;\n}\n\n.print-header h2 {\n  font-size: 22px;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n\n.print-header h3 {\n  font-size: 18px;\n  font-weight: normal;\n  margin: 0;\n}\n\n.patient-info {\n  margin-bottom: 20px;\n  border-bottom: 1px solid #eee;\n  padding-bottom: 10px;\n}\n\n.patient-info-second-page {\n  margin-top: 20px;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #eee;\n  padding-bottom: 10px;\n}\n\n.info-row {\n  display: flex;\n  margin-bottom: 10px;\n}\n\n.info-item {\n  flex: 1;\n  display: flex;\n}\n\n.info-item label {\n  width: 70px;\n  color: #666;\n}\n\n.info-item span {\n  flex: 1;\n}\n\n.diagnosis-section, \n.treatment-section, \n.discharge-section,\n.advice-section,\n.doctor-section,\n.notes-section {\n  margin-bottom: 20px;\n}\n\n.section-title {\n  font-weight: bold;\n  margin-bottom: 10px;\n}\n\n.diagnosis-list div, \n.advice-list div {\n  margin-bottom: 5px;\n}\n\n.treatment-content {\n  line-height: 1.6;\n}\n\n.doctor-info {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 20px;\n}\n\n.doctor-info div {\n  margin-left: 20px;\n}\n\n.notes-content {\n  background-color: #fff9c4;\n  padding: 15px;\n  border-radius: 4px;\n}\n\n.notes-content div {\n  margin-bottom: 5px;\n}\n\n.page-info {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 30px;\n  padding-top: 10px;\n  border-top: 1px solid #eee;\n}\n\n.modal-actions {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 20px;\n}\n\n.btn-close, .btn-print {\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-left: 10px;\n}\n\n.btn-close {\n  background-color: #f5f5f5;\n  border: 1px solid #ddd;\n}\n\n.btn-print {\n  background-color: #2196f3;\n  color: white;\n  border: none;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}