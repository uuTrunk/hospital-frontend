{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport axios from 'axios';\nexport default {\n  name: 'PatientAssessmentList',\n  setup() {\n    const router = useRouter();\n    const loading = ref(false);\n    const tableData = ref([]);\n    const total = ref(0);\n    const currentPage = ref(1);\n    const pageSize = ref(10);\n    const searchForm = ref({\n      dateRange: [],\n      nameOrCode: ''\n    });\n\n    // 获取列表数据\n    const getList = async () => {\n      try {\n        loading.value = true;\n        const params = {\n          page: currentPage.value,\n          pageSize: pageSize.value,\n          startDate: searchForm.value.dateRange[0],\n          endDate: searchForm.value.dateRange[1],\n          nameOrCode: searchForm.value.nameOrCode\n        };\n        const response = await axios.get('/api/admission-assessment/list', {\n          params\n        });\n        tableData.value = response.data.data.list;\n        total.value = response.data.data.total;\n      } catch (error) {\n        ElMessage.error('获取列表失败');\n        console.error(error);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 搜索\n    const handleSearch = () => {\n      currentPage.value = 1;\n      getList();\n    };\n\n    // 重置搜索\n    const resetSearch = () => {\n      searchForm.value = {\n        dateRange: [],\n        nameOrCode: ''\n      };\n      handleSearch();\n    };\n\n    // 页码改变\n    const handleCurrentChange = val => {\n      currentPage.value = val;\n      getList();\n    };\n\n    // 每页条数改变\n    const handleSizeChange = val => {\n      pageSize.value = val;\n      currentPage.value = 1;\n      getList();\n    };\n\n    // 获取状态标签类型\n    const getStatusType = status => {\n      switch (status) {\n        case '待评估':\n          return 'warning';\n        case '未完成':\n          return 'danger';\n        case '完成':\n          return 'success';\n        default:\n          return 'info';\n      }\n    };\n\n    // 编辑\n    const handleEdit = row => {\n      router.push(`/assessment/health/${row.assessmentId}`);\n    };\n\n    // 查看\n    const handleView = row => {\n      router.push(`/assessment/health/${row.assessmentId}`);\n    };\n    onMounted(() => {\n      getList();\n    });\n    return {\n      loading,\n      searchForm,\n      tableData,\n      total,\n      currentPage,\n      pageSize,\n      handleSearch,\n      resetSearch,\n      handleCurrentChange,\n      handleSizeChange,\n      getStatusType,\n      handleEdit,\n      handleView\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","ElMessage","axios","name","setup","router","loading","tableData","total","currentPage","pageSize","searchForm","dateRange","nameOrCode","getList","value","params","page","startDate","endDate","response","get","data","list","error","console","handleSearch","resetSearch","handleCurrentChange","val","handleSizeChange","getStatusType","status","handleEdit","row","push","assessmentId","handleView"],"sources":["src/views/assessment/AssessmentList.vue"],"sourcesContent":["<template>\n  <div class=\"assessment-list\">\n    <!-- 搜索区域 -->\n    <div class=\"search-area\">\n      <el-form :inline=\"true\" :model=\"searchForm\">\n        <el-form-item label=\"登记日期\">\n          <el-date-picker\n            v-model=\"searchForm.dateRange\"\n            type=\"daterange\"\n            range-separator=\"~\"\n            start-placeholder=\"开始日期\"\n            end-placeholder=\"结束日期\"\n            format=\"YYYY-MM-DD\"\n            value-format=\"YYYY-MM-DD\"\n          />\n        </el-form-item>\n        <el-form-item label=\"姓名/入院编号\">\n          <el-input\n            v-model=\"searchForm.nameOrCode\"\n            placeholder=\"请输入姓名或入院编号\"\n            clearable\n          />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleSearch\">搜索</el-button>\n          <el-button @click=\"resetSearch\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <!-- 列表区域 -->\n    <el-table\n      :data=\"tableData\"\n      style=\"width: 100%\"\n      v-loading=\"loading\"\n    >\n      <el-table-column prop=\"name\" label=\"姓名\" />\n      <el-table-column prop=\"gender\" label=\"性别\" />\n      <el-table-column prop=\"age\" label=\"年龄\" />\n      <el-table-column prop=\"registrationTime\" label=\"登记时间\" />\n      <el-table-column label=\"健康评估\" align=\"center\">\n        <template #default=\"scope\">\n          <el-tag\n            :type=\"getStatusType(scope.row.healthStatus)\"\n            effect=\"plain\"\n          >\n            {{ scope.row.healthStatus }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"首次照护评估\" align=\"center\">\n        <template #default=\"scope\">\n          <el-tag\n            :type=\"getStatusType(scope.row.careStatus)\"\n            effect=\"plain\"\n          >\n            {{ scope.row.careStatus }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"120\" align=\"center\">\n        <template #default=\"scope\">\n          <el-button\n            v-if=\"scope.row.healthStatus !== '完成'\"\n            type=\"primary\"\n            link\n            @click=\"handleEdit(scope.row)\"\n          >\n            编辑\n          </el-button>\n          <el-button\n            v-else\n            type=\"primary\"\n            link\n            @click=\"handleView(scope.row)\"\n          >\n            查看\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <div class=\"pagination\">\n      <el-pagination\n        v-model=\"currentPage\"\n        v-model=\"pageSize\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        layout=\"total, sizes, prev, pager, next\"\n        :total=\"total\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport axios from 'axios'\n\nexport default {\n  name: 'PatientAssessmentList',\n  setup() {\n    const router = useRouter()\n    const loading = ref(false)\n    const tableData = ref([])\n    const total = ref(0)\n    const currentPage = ref(1)\n    const pageSize = ref(10)\n\n    const searchForm = ref({\n      dateRange: [],\n      nameOrCode: ''\n    })\n\n    // 获取列表数据\n    const getList = async () => {\n      try {\n        loading.value = true\n        const params = {\n          page: currentPage.value,\n          pageSize: pageSize.value,\n          startDate: searchForm.value.dateRange[0],\n          endDate: searchForm.value.dateRange[1],\n          nameOrCode: searchForm.value.nameOrCode\n        }\n\n        const response = await axios.get('/api/admission-assessment/list', { params })\n        tableData.value = response.data.data.list\n        total.value = response.data.data.total\n      } catch (error) {\n        ElMessage.error('获取列表失败')\n        console.error(error)\n      } finally {\n        loading.value = false\n      }\n    }\n\n    // 搜索\n    const handleSearch = () => {\n      currentPage.value = 1\n      getList()\n    }\n\n    // 重置搜索\n    const resetSearch = () => {\n      searchForm.value = {\n        dateRange: [],\n        nameOrCode: ''\n      }\n      handleSearch()\n    }\n\n    // 页码改变\n    const handleCurrentChange = (val) => {\n      currentPage.value = val\n      getList()\n    }\n\n    // 每页条数改变\n    const handleSizeChange = (val) => {\n      pageSize.value = val\n      currentPage.value = 1\n      getList()\n    }\n\n    // 获取状态标签类型\n    const getStatusType = (status) => {\n      switch (status) {\n        case '待评估':\n          return 'warning'\n        case '未完成':\n          return 'danger'\n        case '完成':\n          return 'success'\n        default:\n          return 'info'\n      }\n    }\n\n    // 编辑\n    const handleEdit = (row) => {\n      router.push(`/assessment/health/${row.assessmentId}`)\n    }\n\n    // 查看\n    const handleView = (row) => {\n      router.push(`/assessment/health/${row.assessmentId}`)\n    }\n\n    onMounted(() => {\n      getList()\n    })\n\n    return {\n      loading,\n      searchForm,\n      tableData,\n      total,\n      currentPage,\n      pageSize,\n      handleSearch,\n      resetSearch,\n      handleCurrentChange,\n      handleSizeChange,\n      getStatusType,\n      handleEdit,\n      handleView\n    }\n  }\n}\n</script>\n\n<style scoped>\n.assessment-list {\n  padding: 20px;\n}\n\n.search-area {\n  margin-bottom: 20px;\n  padding: 20px;\n  background-color: #fff;\n  border-radius: 4px;\n}\n\n.pagination {\n  margin-top: 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n</style> "],"mappings":";AAkGA,SAAAA,GAAA,EAAAC,SAAA;AACA,SAAAC,SAAA;AACA,SAAAC,SAAA;AACA,OAAAC,KAAA;AAEA;EACAC,IAAA;EACAC,MAAA;IACA,MAAAC,MAAA,GAAAL,SAAA;IACA,MAAAM,OAAA,GAAAR,GAAA;IACA,MAAAS,SAAA,GAAAT,GAAA;IACA,MAAAU,KAAA,GAAAV,GAAA;IACA,MAAAW,WAAA,GAAAX,GAAA;IACA,MAAAY,QAAA,GAAAZ,GAAA;IAEA,MAAAa,UAAA,GAAAb,GAAA;MACAc,SAAA;MACAC,UAAA;IACA;;IAEA;IACA,MAAAC,OAAA,SAAAA,CAAA;MACA;QACAR,OAAA,CAAAS,KAAA;QACA,MAAAC,MAAA;UACAC,IAAA,EAAAR,WAAA,CAAAM,KAAA;UACAL,QAAA,EAAAA,QAAA,CAAAK,KAAA;UACAG,SAAA,EAAAP,UAAA,CAAAI,KAAA,CAAAH,SAAA;UACAO,OAAA,EAAAR,UAAA,CAAAI,KAAA,CAAAH,SAAA;UACAC,UAAA,EAAAF,UAAA,CAAAI,KAAA,CAAAF;QACA;QAEA,MAAAO,QAAA,SAAAlB,KAAA,CAAAmB,GAAA;UAAAL;QAAA;QACAT,SAAA,CAAAQ,KAAA,GAAAK,QAAA,CAAAE,IAAA,CAAAA,IAAA,CAAAC,IAAA;QACAf,KAAA,CAAAO,KAAA,GAAAK,QAAA,CAAAE,IAAA,CAAAA,IAAA,CAAAd,KAAA;MACA,SAAAgB,KAAA;QACAvB,SAAA,CAAAuB,KAAA;QACAC,OAAA,CAAAD,KAAA,CAAAA,KAAA;MACA;QACAlB,OAAA,CAAAS,KAAA;MACA;IACA;;IAEA;IACA,MAAAW,YAAA,GAAAA,CAAA;MACAjB,WAAA,CAAAM,KAAA;MACAD,OAAA;IACA;;IAEA;IACA,MAAAa,WAAA,GAAAA,CAAA;MACAhB,UAAA,CAAAI,KAAA;QACAH,SAAA;QACAC,UAAA;MACA;MACAa,YAAA;IACA;;IAEA;IACA,MAAAE,mBAAA,GAAAC,GAAA;MACApB,WAAA,CAAAM,KAAA,GAAAc,GAAA;MACAf,OAAA;IACA;;IAEA;IACA,MAAAgB,gBAAA,GAAAD,GAAA;MACAnB,QAAA,CAAAK,KAAA,GAAAc,GAAA;MACApB,WAAA,CAAAM,KAAA;MACAD,OAAA;IACA;;IAEA;IACA,MAAAiB,aAAA,GAAAC,MAAA;MACA,QAAAA,MAAA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;MACA;IACA;;IAEA;IACA,MAAAC,UAAA,GAAAC,GAAA;MACA7B,MAAA,CAAA8B,IAAA,uBAAAD,GAAA,CAAAE,YAAA;IACA;;IAEA;IACA,MAAAC,UAAA,GAAAH,GAAA;MACA7B,MAAA,CAAA8B,IAAA,uBAAAD,GAAA,CAAAE,YAAA;IACA;IAEArC,SAAA;MACAe,OAAA;IACA;IAEA;MACAR,OAAA;MACAK,UAAA;MACAJ,SAAA;MACAC,KAAA;MACAC,WAAA;MACAC,QAAA;MACAgB,YAAA;MACAC,WAAA;MACAC,mBAAA;MACAE,gBAAA;MACAC,aAAA;MACAE,UAAA;MACAI;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}