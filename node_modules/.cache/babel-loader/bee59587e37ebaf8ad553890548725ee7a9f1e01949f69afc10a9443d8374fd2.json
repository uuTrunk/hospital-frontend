{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport HomeView from '../views/HomeView.vue';\nimport PatientAssessment from '../views/PatientAssessment.vue';\nimport HealthAssessment from '../views/HealthAssessment.vue';\nimport Login from '../views/Login.vue';\nVue.use(VueRouter);\nconst routes = [{\n  path: '/',\n  redirect: '/login'\n}, {\n  path: '/login',\n  name: 'Login',\n  component: Login,\n  meta: {\n    title: '登录',\n    requiresAuth: false\n  }\n}, {\n  path: '/home',\n  name: 'Home',\n  component: () => import('../views/Home.vue'),\n  meta: {\n    title: '首页',\n    requiresAuth: true\n  }\n}, {\n  path: '/home',\n  component: HomeView,\n  redirect: '/admission-assessment',\n  children: [{\n    path: '/admission-assessment',\n    name: 'PatientAssessment',\n    component: PatientAssessment,\n    meta: {\n      title: '入院评估'\n    }\n  }, {\n    path: '/health-assessment',\n    name: 'HealthAssessment',\n    component: HealthAssessment,\n    meta: {\n      title: '健康评估'\n    }\n  }]\n}];\nconst router = new VueRouter({\n  routes\n});\n\n// 设置页面标题\nrouter.beforeEach((to, from, next) => {\n  document.title = to.meta.title || '护理管理系统';\n  const token = localStorage.getItem('token');\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!token) {\n      next({\n        path: '/login',\n        query: {\n          redirect: to.fullPath\n        }\n      });\n    } else {\n      next();\n    }\n  } else {\n    if (token && to.path === '/login') {\n      next('/home');\n    } else {\n      next();\n    }\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","HomeView","PatientAssessment","HealthAssessment","Login","use","routes","path","redirect","name","component","meta","title","requiresAuth","children","router","beforeEach","to","from","next","document","token","localStorage","getItem","matched","some","record","query","fullPath"],"sources":["/Users/seaocean/projects/test3/hospital/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport HomeView from '../views/HomeView.vue'\nimport PatientAssessment from '../views/PatientAssessment.vue'\nimport HealthAssessment from '../views/HealthAssessment.vue'\nimport Login from '../views/Login.vue'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    redirect: '/login'\n  },\n  {\n    path: '/login',\n    name: 'Login',\n    component: Login,\n    meta: { title: '登录', requiresAuth: false }\n  },\n  {\n    path: '/home',\n    name: 'Home',\n    component: () => import('../views/Home.vue'),\n    meta: { title: '首页', requiresAuth: true }\n  },\n  {\n    path: '/home',\n    component: HomeView,\n    redirect: '/admission-assessment',\n    children: [\n      {\n        path: '/admission-assessment',\n        name: 'PatientAssessment',\n        component: PatientAssessment,\n        meta: { title: '入院评估' }\n      },\n      {\n        path: '/health-assessment',\n        name: 'HealthAssessment',\n        component: HealthAssessment,\n        meta: { title: '健康评估' }\n      },\n    ]\n  }\n]\n\nconst router = new VueRouter({\n  routes\n})\n\n// 设置页面标题\nrouter.beforeEach((to, from, next) => {\n  document.title = to.meta.title || '护理管理系统'\n  \n  const token = localStorage.getItem('token')\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!token) {\n      next({\n        path: '/login',\n        query: { redirect: to.fullPath }\n      })\n    } else {\n      next()\n    }\n  } else {\n    if (token && to.path === '/login') {\n      next('/home')\n    } else {\n      next()\n    }\n  }\n})\n\nexport default router "],"mappings":";;AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,iBAAiB,MAAM,gCAAgC;AAC9D,OAAOC,gBAAgB,MAAM,+BAA+B;AAC5D,OAAOC,KAAK,MAAM,oBAAoB;AAEtCL,GAAG,CAACM,GAAG,CAACL,SAAS,CAAC;AAElB,MAAMM,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,GAAG;EACTC,QAAQ,EAAE;AACZ,CAAC,EACD;EACED,IAAI,EAAE,QAAQ;EACdE,IAAI,EAAE,OAAO;EACbC,SAAS,EAAEN,KAAK;EAChBO,IAAI,EAAE;IAAEC,KAAK,EAAE,IAAI;IAAEC,YAAY,EAAE;EAAM;AAC3C,CAAC,EACD;EACEN,IAAI,EAAE,OAAO;EACbE,IAAI,EAAE,MAAM;EACZC,SAAS,EAAEA,CAAA,KAAM,MAAM,CAAC,mBAAmB,CAAC;EAC5CC,IAAI,EAAE;IAAEC,KAAK,EAAE,IAAI;IAAEC,YAAY,EAAE;EAAK;AAC1C,CAAC,EACD;EACEN,IAAI,EAAE,OAAO;EACbG,SAAS,EAAET,QAAQ;EACnBO,QAAQ,EAAE,uBAAuB;EACjCM,QAAQ,EAAE,CACR;IACEP,IAAI,EAAE,uBAAuB;IAC7BE,IAAI,EAAE,mBAAmB;IACzBC,SAAS,EAAER,iBAAiB;IAC5BS,IAAI,EAAE;MAAEC,KAAK,EAAE;IAAO;EACxB,CAAC,EACD;IACEL,IAAI,EAAE,oBAAoB;IAC1BE,IAAI,EAAE,kBAAkB;IACxBC,SAAS,EAAEP,gBAAgB;IAC3BQ,IAAI,EAAE;MAAEC,KAAK,EAAE;IAAO;EACxB,CAAC;AAEL,CAAC,CACF;AAED,MAAMG,MAAM,GAAG,IAAIf,SAAS,CAAC;EAC3BM;AACF,CAAC,CAAC;;AAEF;AACAS,MAAM,CAACC,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpCC,QAAQ,CAACR,KAAK,GAAGK,EAAE,CAACN,IAAI,CAACC,KAAK,IAAI,QAAQ;EAE1C,MAAMS,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIN,EAAE,CAACO,OAAO,CAACC,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACf,IAAI,CAACE,YAAY,CAAC,EAAE;IACvD,IAAI,CAACQ,KAAK,EAAE;MACVF,IAAI,CAAC;QACHZ,IAAI,EAAE,QAAQ;QACdoB,KAAK,EAAE;UAAEnB,QAAQ,EAAES,EAAE,CAACW;QAAS;MACjC,CAAC,CAAC;IACJ,CAAC,MAAM;MACLT,IAAI,CAAC,CAAC;IACR;EACF,CAAC,MAAM;IACL,IAAIE,KAAK,IAAIJ,EAAE,CAACV,IAAI,KAAK,QAAQ,EAAE;MACjCY,IAAI,CAAC,OAAO,CAAC;IACf,CAAC,MAAM;MACLA,IAAI,CAAC,CAAC;IACR;EACF;AACF,CAAC,CAAC;AAEF,eAAeJ,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}