{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport SymptomDialog from '../components/SymptomDialog.vue';\nimport { submitHealthAssessment, getHealthAssessmentDetail } from '@/api/healthAssessment';\nimport { getPatientInfoByAssessmentId } from '@/api/patient';\nexport default {\n  name: 'HealthAssessment',\n  components: {\n    SymptomDialog\n  },\n  data() {\n    return {\n      activeTab: 'health',\n      patient: {\n        id: '',\n        name: '',\n        gender: '',\n        age: '',\n        idNumber: '',\n        registrationTime: ''\n      },\n      dialogVisible: false,\n      dialogType: '',\n      dialogInitialSelected: [],\n      currentIllnesses: [],\n      pastIllnesses: [],\n      currentSearchKeyword: '',\n      pastSearchKeyword: '',\n      showCurrentSuggestions: false,\n      showPastSuggestions: false,\n      currentFilteredSymptoms: [],\n      pastFilteredSymptoms: [],\n      medicalForm: {\n        forbiddenMedicine: '',\n        conclusion: '',\n        admissionDecision: ''\n      },\n      uploadFiles: {\n        biochemical: [],\n        xray: [],\n        ultrasound: [],\n        ecg: [],\n        ct: [],\n        other: []\n      },\n      diet: {\n        noSpicy: false,\n        liquidDiet: false,\n        semiLiquidDiet: false,\n        softDiet: false,\n        lowSalt: false,\n        lowSugar: false,\n        diabeticDiet: false,\n        renalDiet: false,\n        highSalt: false,\n        highSugar: false,\n        highFat: false,\n        seafood: false\n      },\n      careForm: {\n        selfCare: {\n          daily: 0,\n          eating: 0,\n          toilet: 0,\n          notes: ''\n        },\n        cognition: {\n          environment: 0,\n          time: 0,\n          people: 0,\n          notes: ''\n        },\n        emotion: {\n          anxiety: 0,\n          depression: 0,\n          behavior: 0,\n          notes: ''\n        },\n        extreme: {\n          selfHarm: 0,\n          aggression: 0,\n          notes: ''\n        }\n      },\n      isFormComplete: false\n    };\n  },\n  created() {\n    // 从路由参数中获取 assessment_id\n    const assessmentId = this.$route.query.assessmentId;\n    if (!assessmentId) {\n      this.$message.error('缺少评估ID');\n      this.goBack();\n      return;\n    }\n\n    // 加载健康评估详情和患者信息\n    this.loadAssessmentDetail(assessmentId);\n    this.loadPatientInfo(assessmentId);\n  },\n  methods: {\n    formatDateTime(date) {\n      if (!date) return '';\n      const d = new Date(date);\n      return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')} ${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`;\n    },\n    calculateAge(idNumber) {\n      if (!idNumber || idNumber.length !== 18) {\n        return '';\n      }\n      const birthYear = idNumber.substring(6, 10);\n      const birthMonth = idNumber.substring(10, 12);\n      const birthDay = idNumber.substring(12, 14);\n      const birthDate = new Date(`${birthYear}-${birthMonth}-${birthDay}`);\n      const today = new Date();\n      let age = today.getFullYear() - birthDate.getFullYear();\n      const monthDiff = today.getMonth() - birthDate.getMonth();\n      if (monthDiff < 0 || monthDiff === 0 && today.getDate() < birthDate.getDate()) {\n        age--;\n      }\n      return age;\n    },\n    async loadAssessmentDetail(assessmentId) {\n      try {\n        // 获取健康评估详情\n        const assessmentResponse = await getHealthAssessmentDetail(assessmentId);\n        console.log('原始响应:', assessmentResponse);\n        if (assessmentResponse.code === 200) {\n          const data = assessmentResponse.data;\n\n          // 更新现病史\n          this.currentIllnesses = data.currentIllness ? data.currentIllness.map(name => ({\n            id: Date.now(),\n            name\n          })) : [];\n\n          // 更新禁忌药品\n          this.medicalForm.forbiddenMedicine = data.forbidden_medicines || '';\n\n          // 更新饮食禁忌\n          if (data.diet_restrictions) {\n            data.diet_restrictions.forEach(restriction => {\n              switch (restriction) {\n                case '忌辣':\n                  this.diet.noSpicy = true;\n                  break;\n                case '忌海鲜':\n                  this.diet.seafood = true;\n                  break;\n                // 其他饮食禁忌项的处理...\n              }\n            });\n          }\n\n          // 初始化所有上传文件数组\n          this.uploadFiles = {\n            biochemical: data.biochemical_reports ? data.biochemical_reports.split(',').filter(Boolean) : [],\n            xray: data.xray_reports ? data.xray_reports.split(',').filter(Boolean) : [],\n            ultrasound: data.ultrasound_reports ? data.ultrasound_reports.split(',').filter(Boolean) : [],\n            ecg: data.ecg_reports ? data.ecg_reports.split(',').filter(Boolean) : [],\n            ct: data.ct_reports ? data.ct_reports.split(',').filter(Boolean) : [],\n            other: data.other_reports ? data.other_reports.split(',').filter(Boolean) : []\n          };\n\n          // 更新体检报告结论\n          this.medicalForm.conclusion = data.physical_conclusion || '';\n\n          // 更新入院决定\n          this.medicalForm.admissionDecision = data.admission_agreement === '同意入院' ? 'admit' : 'reject';\n\n          // 检查表单是否完整\n          this.checkFormComplete();\n        } else {\n          this.$message.error(assessmentResponse.message || '加载评估详情失败');\n        }\n      } catch (error) {\n        console.error('加载评估详情失败:', error);\n        this.$message.error('加载评估详情失败，请稍后重试');\n      }\n    },\n    checkFormComplete() {\n      // 检查必填项是否都已填写\n      const isComplete = this.currentIllnesses.length > 0 && this.pastIllnesses.length > 0 && this.medicalForm.forbiddenMedicine.trim() !== '' && Object.values(this.uploadFiles).some(files => files.length > 0);\n      this.isFormComplete = isComplete;\n      return isComplete;\n    },\n    async saveAssessment() {\n      try {\n        const assessmentId = this.$route.query.assessmentId;\n        // 准备提交的数据\n        const assessmentData = {\n          assessmentId,\n          currentIllnesses: this.currentIllnesses.map(s => s.name).join(','),\n          pastIllnesses: this.pastIllnesses.map(s => s.name).join(','),\n          forbiddenMedicine: this.medicalForm.forbiddenMedicine,\n          biochemicalReports: this.uploadFiles.biochemical.map(f => f.name).join(','),\n          xrayReports: this.uploadFiles.xray.map(f => f.name).join(','),\n          ultrasoundReports: this.uploadFiles.ultrasound.map(f => f.name).join(','),\n          ecgReports: this.uploadFiles.ecg.map(f => f.name).join(','),\n          ctReports: this.uploadFiles.ct.map(f => f.name).join(','),\n          otherReports: this.uploadFiles.other.map(f => f.name).join(','),\n          status: this.checkFormComplete() ? '完成' : '未完成'\n        };\n\n        // 调用保存接口\n        const response = await submitHealthAssessment(assessmentData);\n        if (response.code === 200) {\n          this.$message.success('保存成功');\n          if (assessmentData.status === '完成') {\n            this.$message.success('评估已完成');\n          }\n          // 返回列表页面\n          this.goBack();\n        } else {\n          this.$message.error(response.message || '保存失败');\n        }\n      } catch (error) {\n        console.error('保存评估失败:', error);\n        this.$message.error('保存失败：' + (error.response?.data?.message || error.message));\n      }\n    },\n    goBack() {\n      this.$router.push('/admission-assessment');\n    },\n    async loadPatientInfo(assessmentId) {\n      try {\n        const response = await getPatientInfoByAssessmentId(assessmentId);\n        if (response.code === 200) {\n          const patientInfo = response.data;\n          this.patient = {\n            id: patientInfo.patientId,\n            name: patientInfo.name,\n            gender: patientInfo.gender,\n            age: this.calculateAge(patientInfo.idNumber),\n            idNumber: patientInfo.idNumber,\n            registrationTime: patientInfo.registrationDate\n          };\n        } else {\n          this.$message.error(response.message || '加载患者信息失败');\n        }\n      } catch (error) {\n        console.error('加载患者信息失败:', error);\n        this.$message.error('加载患者信息失败，请稍后重试');\n      }\n    },\n    handleSave() {\n      this.saveAssessment();\n    },\n    confirmSymptoms(selectedSymptoms) {\n      if (this.dialogType === 'current') {\n        this.currentIllnesses = selectedSymptoms;\n      } else {\n        this.pastIllnesses = selectedSymptoms;\n      }\n      this.dialogVisible = false;\n    },\n    cancelDialog() {\n      this.dialogVisible = false;\n    },\n    removeSymptom(type, id) {\n      if (type === 'current') {\n        this.currentIllnesses = this.currentIllnesses.filter(item => item.id !== id);\n      } else {\n        this.pastIllnesses = this.pastIllnesses.filter(item => item.id !== id);\n      }\n    },\n    searchSymptoms(type) {\n      const keyword = type === 'current' ? this.currentSearchKeyword : this.pastSearchKeyword;\n      // 这里应该调用后端API进行搜索，现在先模拟一些数据\n      const mockSymptoms = [{\n        id: 1,\n        name: '高血压'\n      }, {\n        id: 2,\n        name: '糖尿病'\n      }, {\n        id: 3,\n        name: '冠心病'\n      }].filter(s => s.name.includes(keyword));\n      if (type === 'current') {\n        this.currentFilteredSymptoms = mockSymptoms;\n      } else {\n        this.pastFilteredSymptoms = mockSymptoms;\n      }\n    },\n    addSymptom(type, symptom) {\n      if (type === 'current') {\n        this.currentIllnesses.push(symptom);\n        this.currentSearchKeyword = '';\n        this.showCurrentSuggestions = false;\n      } else {\n        this.pastIllnesses.push(symptom);\n        this.pastSearchKeyword = '';\n        this.showPastSuggestions = false;\n      }\n    },\n    hideSuggestionsDelayed(type) {\n      setTimeout(() => {\n        if (type === 'current') {\n          this.showCurrentSuggestions = false;\n        } else {\n          this.showPastSuggestions = false;\n        }\n      }, 200);\n    },\n    handleFileUpload(event, type) {\n      const file = event.target.files[0];\n      if (file) {\n        // 处理文件上传\n        const reader = new FileReader();\n        reader.onload = e => {\n          this.uploadFiles[type].push({\n            name: file.name,\n            url: e.target.result\n          });\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    removeFile(type, index) {\n      this.uploadFiles[type].splice(index, 1);\n    },\n    setCareLevel(category, type, level) {\n      this.careForm[category][type] = level;\n    },\n    getProgressWidth(category, type) {\n      const level = this.careForm[category][type];\n      return `${(level + 1) * 25}%`;\n    }\n  }\n};","map":{"version":3,"names":["SymptomDialog","submitHealthAssessment","getHealthAssessmentDetail","getPatientInfoByAssessmentId","name","components","data","activeTab","patient","id","gender","age","idNumber","registrationTime","dialogVisible","dialogType","dialogInitialSelected","currentIllnesses","pastIllnesses","currentSearchKeyword","pastSearchKeyword","showCurrentSuggestions","showPastSuggestions","currentFilteredSymptoms","pastFilteredSymptoms","medicalForm","forbiddenMedicine","conclusion","admissionDecision","uploadFiles","biochemical","xray","ultrasound","ecg","ct","other","diet","noSpicy","liquidDiet","semiLiquidDiet","softDiet","lowSalt","lowSugar","diabeticDiet","renalDiet","highSalt","highSugar","highFat","seafood","careForm","selfCare","daily","eating","toilet","notes","cognition","environment","time","people","emotion","anxiety","depression","behavior","extreme","selfHarm","aggression","isFormComplete","created","assessmentId","$route","query","$message","error","goBack","loadAssessmentDetail","loadPatientInfo","methods","formatDateTime","date","d","Date","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","calculateAge","length","birthYear","substring","birthMonth","birthDay","birthDate","today","monthDiff","assessmentResponse","console","log","code","currentIllness","map","now","forbidden_medicines","diet_restrictions","forEach","restriction","biochemical_reports","split","filter","Boolean","xray_reports","ultrasound_reports","ecg_reports","ct_reports","other_reports","physical_conclusion","admission_agreement","checkFormComplete","message","isComplete","trim","Object","values","some","files","saveAssessment","assessmentData","s","join","biochemicalReports","f","xrayReports","ultrasoundReports","ecgReports","ctReports","otherReports","status","response","success","$router","push","patientInfo","patientId","registrationDate","handleSave","confirmSymptoms","selectedSymptoms","cancelDialog","removeSymptom","type","item","searchSymptoms","keyword","mockSymptoms","includes","addSymptom","symptom","hideSuggestionsDelayed","setTimeout","handleFileUpload","event","file","target","reader","FileReader","onload","e","url","result","readAsDataURL","removeFile","index","splice","setCareLevel","category","level","getProgressWidth"],"sources":["src/views/HealthAssessment.vue"],"sourcesContent":["<template>\n  <div class=\"assessment-detail-container\">\n    <!-- 患者信息卡片 -->\n    <el-card class=\"info-card\">\n      <div slot=\"header\" class=\"card-header\">\n        <el-icon><UserFilled /></el-icon>\n        <span>患者信息</span>\n      </div>\n      <el-form label-width=\"100px\" class=\"patient-info\">\n        <el-row :gutter=\"20\">\n          <el-col :span=\"6\">\n            <el-form-item label=\"姓名：\">\n              <span>{{ patient.name }}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"性别：\">\n              <span>{{ patient.gender }}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"年龄：\">\n              <span>{{ patient.age }}</span>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"6\">\n            <el-form-item label=\"身份证号：\">\n              <span>{{ patient.idNumber }}</span>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"登记时间：\">\n              <span>{{ formatDateTime(patient.registrationTime) }}</span>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n    </el-card>\n\n    <!-- 评估选项卡 -->\n    <div class=\"assessment-tabs\">\n      <div \n        class=\"tab-item\" \n        :class=\"{ active: activeTab === 'health' }\"\n        @click=\"activeTab = 'health'\"\n      >\n        健康评估\n      </div>\n      <div \n        class=\"tab-item\" \n        :class=\"{ active: activeTab === 'care' }\"\n        @click=\"activeTab = 'care'\"\n      >\n        首次照护评估\n      </div>\n    </div>\n\n    <!-- 健康评估内容 -->\n    <div v-if=\"activeTab === 'health'\" class=\"assessment-content\">\n      <!-- 评估信息部分 -->\n      <div class=\"assessment-section\">\n        <h3 class=\"section-title\">评估信息</h3>\n        <div class=\"section-content\">\n          <div class=\"history-item\">\n            <span class=\"history-label\">现病史</span>\n            <div class=\"history-actions\">\n              <div class=\"symptom-tag\" v-for=\"symptom in currentIllnesses\" :key=\"symptom.id\">\n                {{ symptom.name }} <i class=\"icon-close\" @click=\"removeSymptom('current', symptom.id)\"></i>\n              </div>\n              <div class=\"search-wrapper\">\n                <input \n                  type=\"text\" \n                  class=\"search-symptom\" \n                  placeholder=\"请输入疾病名称\" \n                  v-model=\"currentSearchKeyword\"\n                  @input=\"searchSymptoms('current')\"\n                  @focus=\"showCurrentSuggestions = true\"\n                  @blur=\"hideSuggestionsDelayed('current')\"\n                />\n                <div class=\"suggestions\" v-show=\"showCurrentSuggestions && currentFilteredSymptoms.length > 0\">\n                  <div \n                    v-for=\"symptom in currentFilteredSymptoms\" \n                    :key=\"symptom.id\" \n                    class=\"suggestion-item\"\n                    @click=\"addSymptom('current', symptom)\"\n                    @mousedown.prevent\n                  >\n                    {{ symptom.name }}\n                  </div>\n                </div>\n              </div>\n              <span class=\"tip\">填写现有疾病名称</span>\n            </div>\n          </div>\n\n          <div class=\"history-item\">\n            <span class=\"history-label\">既往病史</span>\n            <div class=\"history-actions\">\n              <div class=\"symptom-tag\" v-for=\"symptom in pastIllnesses\" :key=\"symptom.id\">\n                {{ symptom.name }} <i class=\"icon-close\" @click=\"removeSymptom('past', symptom.id)\"></i>\n              </div>\n              <div class=\"search-wrapper\">\n                <input \n                  type=\"text\" \n                  class=\"search-symptom\" \n                  placeholder=\"请输入疾病名称\" \n                  v-model=\"pastSearchKeyword\"\n                  @input=\"searchSymptoms('past')\"\n                  @focus=\"showPastSuggestions = true\"\n                  @blur=\"hideSuggestionsDelayed('past')\"\n                />\n                <div class=\"suggestions\" v-show=\"showPastSuggestions && pastFilteredSymptoms.length > 0\">\n                  <div \n                    v-for=\"symptom in pastFilteredSymptoms\" \n                    :key=\"symptom.id\" \n                    class=\"suggestion-item\"\n                    @click=\"addSymptom('past', symptom)\"\n                    @mousedown.prevent\n                  >\n                    {{ symptom.name }}\n                  </div>\n                </div>\n              </div>\n              <span class=\"tip\">填写曾经患有的疾病名称</span>\n            </div>\n          </div>\n\n          <div class=\"history-item\">\n            <span class=\"history-label\">禁忌药品</span>\n            <textarea\n              v-model=\"medicalForm.forbiddenMedicine\"\n              placeholder=\"请输入禁忌药品\"\n              class=\"history-textarea\"\n            ></textarea>\n          </div>\n        </div>\n      </div>\n\n      <!-- 上传检查报告 -->\n      <div class=\"assessment-section\">\n        <h3 class=\"section-title\">上传检查报告</h3>\n        <div class=\"section-content\">\n          <div class=\"upload-tip\">\n            仅支持jpg、png格式，且不超过5M\n          </div>\n\n          <div class=\"upload-items\">\n            <div class=\"upload-item\">\n              <span class=\"upload-label\">生化检验</span>\n              <div class=\"upload-actions\">\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.biochemical && uploadFiles.biochemical.length\">\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.biochemical\" :key=\"index\">\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\n                    <div class=\"preview-delete\" @click=\"removeFile('biochemical', index)\">×</div>\n                  </div>\n                  <div class=\"preview-count\" v-if=\"uploadFiles.biochemical.length > 0\">\n                    {{ uploadFiles.biochemical.length }}/5\n                  </div>\n                </div>\n                <label class=\"upload-btn\" v-if=\"uploadFiles.biochemical.length < 5\">\n                  <input \n                    type=\"file\" \n                    accept=\"image/jpeg,image/png\" \n                    @change=\"handleFileUpload($event, 'biochemical')\" \n                    style=\"display:none\" \n                  />\n                  <i class=\"icon-plus\"></i>\n                </label>\n              </div>\n            </div>\n\n            <div class=\"upload-item\">\n              <span class=\"upload-label\">X光</span>\n              <div class=\"upload-actions\">\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.xray && uploadFiles.xray.length\">\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.xray\" :key=\"index\">\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\n                    <div class=\"preview-delete\" @click=\"removeFile('xray', index)\">×</div>\n                  </div>\n                  <div class=\"preview-count\" v-if=\"uploadFiles.xray.length > 0\">\n                    {{ uploadFiles.xray.length }}/5\n                  </div>\n                </div>\n                <label class=\"upload-btn\" v-if=\"uploadFiles.xray.length < 5\">\n                  <input \n                    type=\"file\" \n                    accept=\"image/jpeg,image/png\" \n                    @change=\"handleFileUpload($event, 'xray')\" \n                    style=\"display:none\" \n                  />\n                  <i class=\"icon-plus\"></i>\n                </label>\n              </div>\n            </div>\n\n            <div class=\"upload-item\">\n              <span class=\"upload-label\">超声检查</span>\n              <div class=\"upload-actions\">\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.ultrasound && uploadFiles.ultrasound.length\">\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.ultrasound\" :key=\"index\">\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\n                    <div class=\"preview-delete\" @click=\"removeFile('ultrasound', index)\">×</div>\n                  </div>\n                  <div class=\"preview-count\" v-if=\"uploadFiles.ultrasound.length > 0\">\n                    {{ uploadFiles.ultrasound.length }}/5\n                  </div>\n                </div>\n                <label class=\"upload-btn\" v-if=\"uploadFiles.ultrasound.length < 5\">\n                  <input \n                    type=\"file\" \n                    accept=\"image/jpeg,image/png\" \n                    @change=\"handleFileUpload($event, 'ultrasound')\" \n                    style=\"display:none\" \n                  />\n                  <i class=\"icon-plus\"></i>\n                </label>\n              </div>\n            </div>\n\n            <div class=\"upload-item\">\n              <span class=\"upload-label\">心电图</span>\n              <div class=\"upload-actions\">\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.ecg && uploadFiles.ecg.length\">\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.ecg\" :key=\"index\">\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\n                    <div class=\"preview-delete\" @click=\"removeFile('ecg', index)\">×</div>\n                  </div>\n                  <div class=\"preview-count\" v-if=\"uploadFiles.ecg.length > 0\">\n                    {{ uploadFiles.ecg.length }}/5\n                  </div>\n                </div>\n                <label class=\"upload-btn\" v-if=\"uploadFiles.ecg.length < 5\">\n                  <input \n                    type=\"file\" \n                    accept=\"image/jpeg,image/png\" \n                    @change=\"handleFileUpload($event, 'ecg')\" \n                    style=\"display:none\" \n                  />\n                  <i class=\"icon-plus\"></i>\n                </label>\n              </div>\n            </div>\n\n            <div class=\"upload-item\">\n              <span class=\"upload-label\">CT</span>\n              <div class=\"upload-actions\">\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.ct && uploadFiles.ct.length\">\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.ct\" :key=\"index\">\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\n                    <div class=\"preview-delete\" @click=\"removeFile('ct', index)\">×</div>\n                  </div>\n                  <div class=\"preview-count\" v-if=\"uploadFiles.ct.length > 0\">\n                    {{ uploadFiles.ct.length }}/5\n                  </div>\n                </div>\n                <label class=\"upload-btn\" v-if=\"uploadFiles.ct.length < 5\">\n                  <input \n                    type=\"file\" \n                    accept=\"image/jpeg,image/png\" \n                    @change=\"handleFileUpload($event, 'ct')\" \n                    style=\"display:none\" \n                  />\n                  <i class=\"icon-plus\"></i>\n                </label>\n              </div>\n            </div>\n\n            <div class=\"upload-item\">\n              <span class=\"upload-label\">其他</span>\n              <div class=\"upload-actions\">\n                <div class=\"upload-preview-list\" v-if=\"uploadFiles.other && uploadFiles.other.length\">\n                  <div class=\"upload-preview\" v-for=\"(file, index) in uploadFiles.other\" :key=\"index\">\n                    <img :src=\"file.url || file\" alt=\"预览\" class=\"preview-img\" />\n                    <div class=\"preview-delete\" @click=\"removeFile('other', index)\">×</div>\n                  </div>\n                  <div class=\"preview-count\" v-if=\"uploadFiles.other.length > 0\">\n                    {{ uploadFiles.other.length }}/5\n                  </div>\n                </div>\n                <label class=\"upload-btn\" v-if=\"uploadFiles.other.length < 5\">\n                  <input \n                    type=\"file\" \n                    accept=\"image/jpeg,image/png\" \n                    @change=\"handleFileUpload($event, 'other')\" \n                    style=\"display:none\" \n                  />\n                  <i class=\"icon-plus\"></i>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 饮食禁忌 -->\n      <div class=\"assessment-section\">\n        <h3 class=\"section-title\">饮食禁忌</h3>\n        <div class=\"section-content\">\n          <div class=\"diet-container\">\n            <div class=\"diet-row\">\n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.noSpicy\">\n                <span>无辣椒</span>\n              </label>\n              \n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.liquidDiet\">\n                <span>流质</span>\n              </label>\n              \n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.semiLiquidDiet\">\n                <span>半流质</span>\n              </label>\n              \n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.softDiet\">\n                <span>软食</span>\n              </label>\n            </div>\n\n            <div class=\"diet-row\">\n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.lowSalt\">\n                <span>低盐</span>\n              </label>\n              \n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.lowSugar\">\n                <span>低糖</span>\n              </label>\n              \n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.diabeticDiet\">\n                <span>糖尿病饮食</span>\n              </label>\n              \n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.renalDiet\">\n                <span>肾食</span>\n              </label>\n            </div>\n\n            <div class=\"diet-row\">\n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.highSalt\">\n                <span>高盐</span>\n              </label>\n              \n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.highSugar\">\n                <span>高糖</span>\n              </label>\n              \n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.highFat\">\n                <span>高脂</span>\n              </label>\n              \n              <label class=\"diet-option\">\n                <input type=\"checkbox\" v-model=\"diet.seafood\">\n                <span>海鲜</span>\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 体检报告结论 -->\n      <div class=\"assessment-section\">\n        <h3 class=\"section-title\">体检报告结论<span class=\"required\">*</span></h3>\n        <div class=\"section-content\">\n          <textarea\n            v-model=\"medicalForm.conclusion\"\n            placeholder=\"输入结论\"\n            class=\"conclusion-textarea\"\n          ></textarea>\n        </div>\n      </div>\n\n      <!-- 入院决定 -->\n      <div class=\"assessment-section\">\n        <div class=\"admission-decision\">\n          <label class=\"radio-option\">\n            <input type=\"radio\" v-model=\"medicalForm.admissionDecision\" value=\"admit\">\n            <span>同意入院</span>\n          </label>\n          \n          <label class=\"radio-option\">\n            <input type=\"radio\" v-model=\"medicalForm.admissionDecision\" value=\"reject\">\n            <span>不同意入院</span>\n          </label>\n        </div>\n      </div>\n\n      <!-- 操作按钮 -->\n      <div class=\"action-buttons\">\n        <el-button type=\"primary\" @click=\"handleSave\">保存</el-button>\n        <el-button @click=\"goBack\">返回</el-button>\n      </div>\n    </div>\n\n    <!-- 首次照护评估内容 -->\n    <div v-if=\"activeTab === 'care'\" class=\"assessment-content\">\n      <!-- 生活自理能力评估 -->\n      <div class=\"assessment-section\">\n        <div class=\"care-assessment-item\">\n          <div class=\"care-label\">生活自理能力</div>\n          <div class=\"care-content\">\n            <div class=\"care-slider-container\">\n              <div class=\"slider-label\">生活料理能力</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.daily === 0 }\"\n                    @click=\"setCareLevel('selfCare', 'daily', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.daily === 1 }\"\n                    @click=\"setCareLevel('selfCare', 'daily', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.daily === 2 }\"\n                    @click=\"setCareLevel('selfCare', 'daily', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.daily === 3 }\"\n                    @click=\"setCareLevel('selfCare', 'daily', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('selfCare', 'daily') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"slider-label\">进食能力</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.eating === 0 }\"\n                    @click=\"setCareLevel('selfCare', 'eating', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.eating === 1 }\"\n                    @click=\"setCareLevel('selfCare', 'eating', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.eating === 2 }\"\n                    @click=\"setCareLevel('selfCare', 'eating', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.eating === 3 }\"\n                    @click=\"setCareLevel('selfCare', 'eating', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('selfCare', 'eating') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"slider-label\">如厕能力</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.toilet === 0 }\"\n                    @click=\"setCareLevel('selfCare', 'toilet', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.toilet === 1 }\"\n                    @click=\"setCareLevel('selfCare', 'toilet', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.toilet === 2 }\"\n                    @click=\"setCareLevel('selfCare', 'toilet', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.selfCare.toilet === 3 }\"\n                    @click=\"setCareLevel('selfCare', 'toilet', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('selfCare', 'toilet') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"reason-label\">评估说明</div>\n              <div class=\"reason-textarea-container\">\n                <textarea \n                  class=\"reason-textarea\" \n                  v-model=\"careForm.selfCare.notes\" \n                  placeholder=\"输入评价\"\n                ></textarea>\n                <div class=\"reason-note\" v-if=\"careForm.selfCare.notes.length > 0\">!</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 认知能力评估 -->\n      <div class=\"assessment-section\">\n        <div class=\"care-assessment-item\">\n          <div class=\"care-label\">认知能力</div>\n          <div class=\"care-content\">\n            <div class=\"care-slider-container\">\n              <div class=\"slider-label\">环境认知</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.environment === 0 }\"\n                    @click=\"setCareLevel('cognition', 'environment', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.environment === 1 }\"\n                    @click=\"setCareLevel('cognition', 'environment', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.environment === 2 }\"\n                    @click=\"setCareLevel('cognition', 'environment', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.environment === 3 }\"\n                    @click=\"setCareLevel('cognition', 'environment', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('cognition', 'environment') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"slider-label\">时间认知</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.time === 0 }\"\n                    @click=\"setCareLevel('cognition', 'time', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.time === 1 }\"\n                    @click=\"setCareLevel('cognition', 'time', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.time === 2 }\"\n                    @click=\"setCareLevel('cognition', 'time', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.time === 3 }\"\n                    @click=\"setCareLevel('cognition', 'time', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('cognition', 'time') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"slider-label\">人物认知</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.people === 0 }\"\n                    @click=\"setCareLevel('cognition', 'people', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.people === 1 }\"\n                    @click=\"setCareLevel('cognition', 'people', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.people === 2 }\"\n                    @click=\"setCareLevel('cognition', 'people', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.cognition.people === 3 }\"\n                    @click=\"setCareLevel('cognition', 'people', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('cognition', 'people') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"reason-label\">评估说明</div>\n              <div class=\"reason-textarea-container\">\n                <textarea \n                  class=\"reason-textarea\" \n                  v-model=\"careForm.cognition.notes\" \n                  placeholder=\"输入评价\"\n                ></textarea>\n                <div class=\"reason-note\" v-if=\"careForm.cognition.notes.length > 0\">!</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 情绪行为评估 -->\n      <div class=\"assessment-section\">\n        <div class=\"care-assessment-item\">\n          <div class=\"care-label\">情绪行为</div>\n          <div class=\"care-content\">\n            <div class=\"care-slider-container\">\n              <div class=\"slider-label\">焦虑程度</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.anxiety === 0 }\"\n                    @click=\"setCareLevel('emotion', 'anxiety', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.anxiety === 1 }\"\n                    @click=\"setCareLevel('emotion', 'anxiety', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.anxiety === 2 }\"\n                    @click=\"setCareLevel('emotion', 'anxiety', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.anxiety === 3 }\"\n                    @click=\"setCareLevel('emotion', 'anxiety', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('emotion', 'anxiety') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"slider-label\">抑郁程度</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.depression === 0 }\"\n                    @click=\"setCareLevel('emotion', 'depression', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.depression === 1 }\"\n                    @click=\"setCareLevel('emotion', 'depression', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.depression === 2 }\"\n                    @click=\"setCareLevel('emotion', 'depression', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.depression === 3 }\"\n                    @click=\"setCareLevel('emotion', 'depression', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('emotion', 'depression') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"slider-label\">行为异常</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.behavior === 0 }\"\n                    @click=\"setCareLevel('emotion', 'behavior', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.behavior === 1 }\"\n                    @click=\"setCareLevel('emotion', 'behavior', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.behavior === 2 }\"\n                    @click=\"setCareLevel('emotion', 'behavior', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.emotion.behavior === 3 }\"\n                    @click=\"setCareLevel('emotion', 'behavior', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('emotion', 'behavior') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"reason-label\">评估说明</div>\n              <div class=\"reason-textarea-container\">\n                <textarea \n                  class=\"reason-textarea\" \n                  v-model=\"careForm.emotion.notes\" \n                  placeholder=\"输入评价\"\n                ></textarea>\n                <div class=\"reason-note\" v-if=\"careForm.emotion.notes.length > 0\">!</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 极端情况评估 -->\n      <div class=\"assessment-section\">\n        <div class=\"care-assessment-item\">\n          <div class=\"care-label\">极端情况</div>\n          <div class=\"care-content\">\n            <div class=\"care-slider-container\">\n              <div class=\"slider-label\">自伤倾向</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.extreme.selfHarm === 0 }\"\n                    @click=\"setCareLevel('extreme', 'selfHarm', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.extreme.selfHarm === 1 }\"\n                    @click=\"setCareLevel('extreme', 'selfHarm', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.extreme.selfHarm === 2 }\"\n                    @click=\"setCareLevel('extreme', 'selfHarm', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.extreme.selfHarm === 3 }\"\n                    @click=\"setCareLevel('extreme', 'selfHarm', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('extreme', 'selfHarm') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"slider-label\">攻击倾向</div>\n              <div class=\"slider-container\">\n                <div class=\"slider-track\">\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.extreme.aggression === 0 }\"\n                    @click=\"setCareLevel('extreme', 'aggression', 0)\"\n                  >正常</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.extreme.aggression === 1 }\"\n                    @click=\"setCareLevel('extreme', 'aggression', 1)\"\n                  >轻度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.extreme.aggression === 2 }\"\n                    @click=\"setCareLevel('extreme', 'aggression', 2)\"\n                  >中度</div>\n                  <div \n                    class=\"slider-level\" \n                    :class=\"{ active: careForm.extreme.aggression === 3 }\"\n                    @click=\"setCareLevel('extreme', 'aggression', 3)\"\n                  >重度</div>\n                  <div class=\"slider-progress\" :style=\"{ width: getProgressWidth('extreme', 'aggression') }\"></div>\n                </div>\n              </div>\n              \n              <div class=\"reason-label\">评估说明</div>\n              <div class=\"reason-textarea-container\">\n                <textarea \n                  class=\"reason-textarea\" \n                  v-model=\"careForm.extreme.notes\" \n                  placeholder=\"输入评价\"\n                ></textarea>\n                <div class=\"reason-note\" v-if=\"careForm.extreme.notes.length > 0\">!</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 操作按钮 -->\n      <div class=\"action-buttons\">\n        <el-button type=\"primary\" @click=\"handleSave\">保存</el-button>\n        <el-button @click=\"goBack\">返回</el-button>\n      </div>\n    </div>\n\n    <!-- 症状选择对话框 -->\n    <symptom-dialog\n      :visible=\"dialogVisible\"\n      :type=\"dialogType\"\n      :initial-selected=\"dialogInitialSelected\"\n      @confirm=\"confirmSymptoms\"\n      @cancel=\"cancelDialog\"\n    />\n  </div>\n</template>\n\n<script>\nimport SymptomDialog from '../components/SymptomDialog.vue'\nimport { submitHealthAssessment, getHealthAssessmentDetail } from '@/api/healthAssessment'\nimport { getPatientInfoByAssessmentId } from '@/api/patient'\n\nexport default {\n  name: 'HealthAssessment',\n  components: {\n    SymptomDialog\n  },\n  data() {\n    return {\n      activeTab: 'health',\n      patient: {\n        id: '',\n        name: '',\n        gender: '',\n        age: '',\n        idNumber: '',\n        registrationTime: ''\n      },\n      dialogVisible: false,\n      dialogType: '',\n      dialogInitialSelected: [],\n      currentIllnesses: [],\n      pastIllnesses: [],\n      currentSearchKeyword: '',\n      pastSearchKeyword: '',\n      showCurrentSuggestions: false,\n      showPastSuggestions: false,\n      currentFilteredSymptoms: [],\n      pastFilteredSymptoms: [],\n      medicalForm: {\n        forbiddenMedicine: '',\n        conclusion: '',\n        admissionDecision: ''\n      },\n      uploadFiles: {\n        biochemical: [],\n        xray: [],\n        ultrasound: [],\n        ecg: [],\n        ct: [],\n        other: []\n      },\n      diet: {\n        noSpicy: false,\n        liquidDiet: false,\n        semiLiquidDiet: false,\n        softDiet: false,\n        lowSalt: false,\n        lowSugar: false,\n        diabeticDiet: false,\n        renalDiet: false,\n        highSalt: false,\n        highSugar: false,\n        highFat: false,\n        seafood: false\n      },\n      careForm: {\n        selfCare: {\n          daily: 0,\n          eating: 0,\n          toilet: 0,\n          notes: ''\n        },\n        cognition: {\n          environment: 0,\n          time: 0,\n          people: 0,\n          notes: ''\n        },\n        emotion: {\n          anxiety: 0,\n          depression: 0,\n          behavior: 0,\n          notes: ''\n        },\n        extreme: {\n          selfHarm: 0,\n          aggression: 0,\n          notes: ''\n        }\n      },\n      isFormComplete: false\n    }\n  },\n  created() {\n    // 从路由参数中获取 assessment_id\n    const assessmentId = this.$route.query.assessmentId;\n    if (!assessmentId) {\n      this.$message.error('缺少评估ID');\n      this.goBack();\n      return;\n    }\n\n    // 加载健康评估详情和患者信息\n    this.loadAssessmentDetail(assessmentId);\n    this.loadPatientInfo(assessmentId);\n  },\n  methods: {\n    formatDateTime(date) {\n      if (!date) return '';\n      const d = new Date(date);\n      return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')} ${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`;\n    },\n    \n    calculateAge(idNumber) {\n      if (!idNumber || idNumber.length !== 18) {\n        return '';\n      }\n      const birthYear = idNumber.substring(6, 10);\n      const birthMonth = idNumber.substring(10, 12);\n      const birthDay = idNumber.substring(12, 14);\n      \n      const birthDate = new Date(`${birthYear}-${birthMonth}-${birthDay}`);\n      const today = new Date();\n      \n      let age = today.getFullYear() - birthDate.getFullYear();\n      const monthDiff = today.getMonth() - birthDate.getMonth();\n      \n      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n        age--;\n      }\n      \n      return age;\n    },\n    \n    async loadAssessmentDetail(assessmentId) {\n      try {\n        // 获取健康评估详情\n        const assessmentResponse = await getHealthAssessmentDetail(assessmentId);\n        console.log('原始响应:', assessmentResponse);\n        \n        if (assessmentResponse.code === 200) {\n          const data = assessmentResponse.data;\n          \n          // 更新现病史\n          this.currentIllnesses = data.currentIllness ? \n            data.currentIllness.map(name => ({ id: Date.now(), name })) : [];\n          \n          // 更新禁忌药品\n          this.medicalForm.forbiddenMedicine = data.forbidden_medicines || '';\n          \n          // 更新饮食禁忌\n          if (data.diet_restrictions) {\n            data.diet_restrictions.forEach(restriction => {\n              switch(restriction) {\n                case '忌辣':\n                  this.diet.noSpicy = true;\n                  break;\n                case '忌海鲜':\n                  this.diet.seafood = true;\n                  break;\n                // 其他饮食禁忌项的处理...\n              }\n            });\n          }\n          \n          // 初始化所有上传文件数组\n          this.uploadFiles = {\n            biochemical: data.biochemical_reports ? data.biochemical_reports.split(',').filter(Boolean) : [],\n            xray: data.xray_reports ? data.xray_reports.split(',').filter(Boolean) : [],\n            ultrasound: data.ultrasound_reports ? data.ultrasound_reports.split(',').filter(Boolean) : [],\n            ecg: data.ecg_reports ? data.ecg_reports.split(',').filter(Boolean) : [],\n            ct: data.ct_reports ? data.ct_reports.split(',').filter(Boolean) : [],\n            other: data.other_reports ? data.other_reports.split(',').filter(Boolean) : []\n          };\n          \n          // 更新体检报告结论\n          this.medicalForm.conclusion = data.physical_conclusion || '';\n          \n          // 更新入院决定\n          this.medicalForm.admissionDecision = data.admission_agreement === '同意入院' ? 'admit' : 'reject';\n\n          // 检查表单是否完整\n          this.checkFormComplete();\n        } else {\n          this.$message.error(assessmentResponse.message || '加载评估详情失败');\n        }\n      } catch (error) {\n        console.error('加载评估详情失败:', error);\n        this.$message.error('加载评估详情失败，请稍后重试');\n      }\n    },\n\n    checkFormComplete() {\n      // 检查必填项是否都已填写\n      const isComplete = \n        this.currentIllnesses.length > 0 &&\n        this.pastIllnesses.length > 0 &&\n        this.medicalForm.forbiddenMedicine.trim() !== '' &&\n        Object.values(this.uploadFiles).some(files => files.length > 0);\n      \n      this.isFormComplete = isComplete;\n      return isComplete;\n    },\n\n    async saveAssessment() {\n      try {\n        const assessmentId = this.$route.query.assessmentId;\n        // 准备提交的数据\n        const assessmentData = {\n          assessmentId,\n          currentIllnesses: this.currentIllnesses.map(s => s.name).join(','),\n          pastIllnesses: this.pastIllnesses.map(s => s.name).join(','),\n          forbiddenMedicine: this.medicalForm.forbiddenMedicine,\n          biochemicalReports: this.uploadFiles.biochemical.map(f => f.name).join(','),\n          xrayReports: this.uploadFiles.xray.map(f => f.name).join(','),\n          ultrasoundReports: this.uploadFiles.ultrasound.map(f => f.name).join(','),\n          ecgReports: this.uploadFiles.ecg.map(f => f.name).join(','),\n          ctReports: this.uploadFiles.ct.map(f => f.name).join(','),\n          otherReports: this.uploadFiles.other.map(f => f.name).join(','),\n          status: this.checkFormComplete() ? '完成' : '未完成'\n        };\n\n        // 调用保存接口\n        const response = await submitHealthAssessment(assessmentData);\n        \n        if (response.code === 200) {\n          this.$message.success('保存成功');\n          if (assessmentData.status === '完成') {\n            this.$message.success('评估已完成');\n          }\n          // 返回列表页面\n          this.goBack();\n        } else {\n          this.$message.error(response.message || '保存失败');\n        }\n      } catch (error) {\n        console.error('保存评估失败:', error);\n        this.$message.error('保存失败：' + (error.response?.data?.message || error.message));\n      }\n    },\n\n    goBack() {\n      this.$router.push('/admission-assessment');\n    },\n\n    async loadPatientInfo(assessmentId) {\n      try {\n        const response = await getPatientInfoByAssessmentId(assessmentId);\n        if (response.code === 200) {\n          const patientInfo = response.data;\n          this.patient = {\n            id: patientInfo.patientId,\n            name: patientInfo.name,\n            gender: patientInfo.gender,\n            age: this.calculateAge(patientInfo.idNumber),\n            idNumber: patientInfo.idNumber,\n            registrationTime: patientInfo.registrationDate\n          };\n        } else {\n          this.$message.error(response.message || '加载患者信息失败');\n        }\n      } catch (error) {\n        console.error('加载患者信息失败:', error);\n        this.$message.error('加载患者信息失败，请稍后重试');\n      }\n    },\n\n    handleSave() {\n      this.saveAssessment();\n    },\n\n    confirmSymptoms(selectedSymptoms) {\n      if (this.dialogType === 'current') {\n        this.currentIllnesses = selectedSymptoms;\n      } else {\n        this.pastIllnesses = selectedSymptoms;\n      }\n      this.dialogVisible = false;\n    },\n\n    cancelDialog() {\n      this.dialogVisible = false;\n    },\n\n    removeSymptom(type, id) {\n      if (type === 'current') {\n        this.currentIllnesses = this.currentIllnesses.filter(item => item.id !== id);\n      } else {\n        this.pastIllnesses = this.pastIllnesses.filter(item => item.id !== id);\n      }\n    },\n\n    searchSymptoms(type) {\n      const keyword = type === 'current' ? this.currentSearchKeyword : this.pastSearchKeyword;\n      // 这里应该调用后端API进行搜索，现在先模拟一些数据\n      const mockSymptoms = [\n        { id: 1, name: '高血压' },\n        { id: 2, name: '糖尿病' },\n        { id: 3, name: '冠心病' }\n      ].filter(s => s.name.includes(keyword));\n      \n      if (type === 'current') {\n        this.currentFilteredSymptoms = mockSymptoms;\n      } else {\n        this.pastFilteredSymptoms = mockSymptoms;\n      }\n    },\n\n    addSymptom(type, symptom) {\n      if (type === 'current') {\n        this.currentIllnesses.push(symptom);\n        this.currentSearchKeyword = '';\n        this.showCurrentSuggestions = false;\n      } else {\n        this.pastIllnesses.push(symptom);\n        this.pastSearchKeyword = '';\n        this.showPastSuggestions = false;\n      }\n    },\n\n    hideSuggestionsDelayed(type) {\n      setTimeout(() => {\n        if (type === 'current') {\n          this.showCurrentSuggestions = false;\n        } else {\n          this.showPastSuggestions = false;\n        }\n      }, 200);\n    },\n\n    handleFileUpload(event, type) {\n      const file = event.target.files[0];\n      if (file) {\n        // 处理文件上传\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          this.uploadFiles[type].push({\n            name: file.name,\n            url: e.target.result\n          });\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n\n    removeFile(type, index) {\n      this.uploadFiles[type].splice(index, 1);\n    },\n\n    setCareLevel(category, type, level) {\n      this.careForm[category][type] = level;\n    },\n    \n    getProgressWidth(category, type) {\n      const level = this.careForm[category][type];\n      return `${(level + 1) * 25}%`;\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 定义莫兰迪配色变量 */\n:root {\n  --morandiBlue: #94b0b8;\n  --morandiGreen: #8ba89f;\n  --morandiTeal: #7da4a4;\n  --morandiGray: #b4bcc0;\n  --morandiLightBlue: #c5d5da;\n  --morandiLightGreen: #cad7d3;\n  --morandiBg: #f5f7f8;\n  --morandiText: #5c6b73;\n  --morandiDark: #445963;\n  --morandiHover: #86a5ae;\n}\n\n.assessment-detail-container {\n  padding: 24px;\n  background-color: var(--morandiBg);\n  min-height: 100vh;\n}\n\n.info-card {\n  margin-bottom: 24px;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px 0 rgba(148, 176, 184, 0.1);\n  transition: all 0.3s ease;\n  background-color: #fff;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 16px 0 rgba(148, 176, 184, 0.15);\n  }\n  \n  .card-header {\n    display: flex;\n    align-items: center;\n    padding: 16px 20px;\n    border-bottom: 1px solid var(--morandiLightBlue);\n    \n    .el-icon {\n      margin-right: 12px;\n      font-size: 20px;\n      color: var(--morandiTeal);\n    }\n\n    span {\n      font-size: 16px;\n      font-weight: 600;\n      color: var(--morandiDark);\n    }\n  }\n  \n  .patient-info {\n    padding: 20px;\n    \n    .el-form-item {\n      margin-bottom: 16px;\n    }\n    \n    span {\n      color: #606266;\n      font-size: 14px;\n    }\n  }\n}\n\n.assessment-tabs {\n  display: flex;\n  background-color: #fff;\n  border-radius: 8px 8px 0 0;\n  border-bottom: 2px solid #f0f2f5;\n  margin-bottom: 0;\n  padding: 0 20px;\n}\n\n.tab-item {\n  padding: 16px 32px;\n  cursor: pointer;\n  position: relative;\n  font-size: 15px;\n  color: var(--morandiText);\n  transition: all 0.3s ease;\n\n  &:hover {\n    color: var(--morandiTeal);\n  }\n\n  &.active {\n    color: var(--morandiTeal);\n    font-weight: 500;\n    \n    &:after {\n      content: '';\n      position: absolute;\n      bottom: -2px;\n      left: 0;\n      width: 100%;\n      height: 2px;\n      background-color: var(--morandiTeal);\n      border-radius: 2px 2px 0 0;\n    }\n  }\n}\n\n.assessment-content {\n  background-color: #fff;\n  border-radius: 0 0 8px 8px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\n  padding: 24px;\n  margin-bottom: 24px;\n}\n\n.assessment-section {\n  margin-bottom: 32px;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n\n.section-title {\n  font-size: 16px;\n  font-weight: 600;\n  color: #303133;\n  margin-bottom: 20px;\n  position: relative;\n  padding-left: 12px;\n\n  &:before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    width: 4px;\n    height: 16px;\n    background-color: var(--morandiTeal);\n    border-radius: 2px;\n  }\n}\n\n.section-content {\n  padding: 0 12px;\n}\n\n.history-item {\n  display: flex;\n  margin-bottom: 20px;\n  align-items: flex-start;\n}\n\n.history-label {\n  width: 90px;\n  color: #606266;\n  flex-shrink: 0;\n  line-height: 32px;\n  font-weight: 500;\n}\n\n.history-actions {\n  flex: 1;\n  display: flex;\n  align-items: flex-start;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.search-wrapper {\n  position: relative;\n  width: 320px;\n  margin-right: 12px;\n}\n\n.search-symptom {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  font-size: 14px;\n  height: 36px;\n  transition: all 0.3s ease;\n\n  &:focus {\n    border-color: var(--morandiTeal);\n    box-shadow: 0 0 0 2px rgba(125, 164, 164, 0.2);\n  }\n}\n\n.tip {\n  font-size: 13px;\n  color: var(--morandiText);\n  margin-left: 8px;\n  line-height: 36px;\n}\n\n.symptom-tag {\n  background-color: var(--morandiLightBlue);\n  border: 1px solid var(--morandiBlue);\n  border-radius: 4px;\n  padding: 6px 10px;\n  font-size: 13px;\n  color: var(--morandiDark);\n  margin-right: 8px;\n  margin-bottom: 8px;\n  display: inline-flex;\n  align-items: center;\n  height: 32px;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: var(--morandiBlue);\n    color: #fff;\n  }\n\n  .icon-close {\n    margin-left: 6px;\n    font-size: 12px;\n    color: var(--morandiDark);\n    cursor: pointer;\n    transition: all 0.3s ease;\n\n    &:hover {\n      color: #fff;\n    }\n  }\n}\n\n.history-textarea {\n  width: 100%;\n  min-height: 80px;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  padding: 12px;\n  resize: vertical;\n  font-size: 14px;\n  line-height: 1.5;\n  color: #606266;\n  transition: all 0.3s ease;\n\n  &:focus {\n    border-color: var(--morandiTeal);\n    box-shadow: 0 0 0 2px rgba(125, 164, 164, 0.2);\n  }\n}\n\n.upload-tip {\n  font-size: 13px;\n  color: #909399;\n  margin-bottom: 20px;\n  padding: 8px 16px;\n  background-color: #f4f4f5;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n\n  &:before {\n    content: \"!\";\n    width: 16px;\n    height: 16px;\n    background-color: #909399;\n    color: #fff;\n    border-radius: 50%;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-right: 8px;\n    font-size: 12px;\n    font-weight: bold;\n  }\n}\n\n.upload-items {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n}\n\n.upload-item {\n  background-color: #f8f9fa;\n  border-radius: 8px;\n  padding: 16px;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: #f2f6fc;\n  }\n}\n\n.upload-label {\n  color: #606266;\n  margin-bottom: 12px;\n  font-weight: 500;\n  font-size: 14px;\n}\n\n.upload-preview-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n\n.upload-preview {\n  width: 80px;\n  height: 80px;\n  border-radius: 6px;\n  overflow: hidden;\n  position: relative;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  border: 2px solid var(--morandiLightBlue);\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    border-color: var(--morandiTeal);\n  }\n}\n\n.preview-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.preview-delete {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 20px;\n  height: 20px;\n  background-color: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  opacity: 0;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: rgba(245, 108, 108, 0.9);\n  }\n}\n\n.upload-btn {\n  width: 80px;\n  height: 80px;\n  border: 2px dashed #dcdfe6;\n  border-radius: 6px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n\n  &:hover {\n    border-color: var(--morandiTeal);\n    background-color: #f2f6fc;\n\n    .icon-plus {\n      color: var(--morandiTeal);\n    }\n  }\n\n  .icon-plus {\n    font-size: 24px;\n    color: #909399;\n    transition: all 0.3s ease;\n  }\n}\n\n.diet-container {\n  border: 1px solid #ebeef5;\n  border-radius: 8px;\n  padding: 20px;\n  background-color: #fff;\n}\n\n.diet-row {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 24px;\n  margin-bottom: 16px;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n}\n\n.diet-option {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  user-select: none;\n  transition: all 0.3s ease;\n\n  input[type=\"checkbox\"] {\n    margin-right: 8px;\n    cursor: pointer;\n  }\n\n  span {\n    color: #606266;\n    font-size: 14px;\n  }\n\n  &:hover span {\n    color: var(--morandiTeal);\n  }\n}\n\n.conclusion-textarea {\n  width: 100%;\n  min-height: 120px;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  padding: 12px;\n  font-size: 14px;\n  line-height: 1.5;\n  color: #606266;\n  resize: vertical;\n  transition: all 0.3s ease;\n\n  &:focus {\n    border-color: var(--morandiTeal);\n    box-shadow: 0 0 0 2px rgba(125, 164, 164, 0.2);\n  }\n}\n\n.required {\n  color: var(--morandiDark);\n  margin-left: 4px;\n}\n\n.admission-decision {\n  display: flex;\n  gap: 32px;\n  margin: 24px 0;\n}\n\n.radio-option {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  user-select: none;\n\n  input[type=\"radio\"] {\n    margin-right: 8px;\n    cursor: pointer;\n  }\n\n  span {\n    color: #606266;\n    font-size: 14px;\n  }\n\n  &:hover span {\n    color: var(--morandiTeal);\n  }\n}\n\n.action-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  margin-top: 40px;\n  padding-top: 24px;\n  border-top: 1px solid #ebeef5;\n}\n\n.suggestions {\n  position: absolute;\n  top: calc(100% + 4px);\n  left: 0;\n  right: 0;\n  background-color: #fff;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  max-height: 200px;\n  overflow-y: auto;\n  z-index: 1000;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.suggestion-item {\n  padding: 8px 12px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #606266;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: var(--morandiLightBlue);\n    color: var(--morandiDark);\n  }\n}\n\n/* 照护评估部分的样式优化 */\n.care-assessment-item {\n  background-color: #fff;\n  border-radius: 8px;\n  margin-bottom: 24px;\n  overflow: hidden;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\n  border: 1px solid var(--morandiLightBlue);\n}\n\n.care-label {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--morandiDark);\n  padding: 16px 20px;\n  background-color: var(--morandiBg);\n  border-bottom: 1px solid var(--morandiLightBlue);\n}\n\n.care-content {\n  padding: 20px;\n}\n\n.slider-container {\n  margin: 16px 0 24px;\n}\n\n.slider-track {\n  height: 44px;\n  border-radius: 6px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.slider-level {\n  font-size: 14px;\n  font-weight: 500;\n  color: #606266;\n  background-color: #f8f9fa;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: var(--morandiLightBlue);\n  }\n\n  &.active {\n    color: #fff;\n  }\n}\n\n.slider-progress {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n/* 为不同的级别设置渐变色背景 */\n.slider-level:nth-child(1).active ~ .slider-progress {\n  background: linear-gradient(45deg, var(--morandiGreen), var(--morandiLightGreen));\n}\n\n.slider-level:nth-child(2).active ~ .slider-progress {\n  background: linear-gradient(45deg, var(--morandiBlue), var(--morandiLightBlue));\n}\n\n.slider-level:nth-child(3).active ~ .slider-progress {\n  background: linear-gradient(45deg, var(--morandiTeal), var(--morandiBlue));\n}\n\n.slider-level:nth-child(4).active ~ .slider-progress {\n  background: linear-gradient(45deg, var(--morandiDark), var(--morandiGray));\n}\n\n.reason-textarea {\n  width: 100%;\n  min-height: 100px;\n  border: 1px solid #dcdfe6;\n  border-radius: 6px;\n  padding: 12px;\n  font-size: 14px;\n  line-height: 1.6;\n  color: #606266;\n  resize: vertical;\n  transition: all 0.3s ease;\n\n  &:focus {\n    border-color: var(--morandiTeal);\n    box-shadow: 0 0 0 2px rgba(125, 164, 164, 0.2);\n  }\n}\n\n.reason-note {\n  position: absolute;\n  right: 8px;\n  bottom: 8px;\n  width: 24px;\n  height: 24px;\n  background: linear-gradient(45deg, var(--morandiBlue), var(--morandiTeal));\n  color: #fff;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  font-weight: bold;\n  box-shadow: 0 2px 6px rgba(255, 179, 0, 0.3);\n}\n\n/* 按钮样式 */\n.el-button--primary {\n  background-color: var(--morandiTeal);\n  border-color: var(--morandiTeal);\n  \n  &:hover, &:focus {\n    background-color: var(--morandiHover);\n    border-color: var(--morandiHover);\n  }\n}\n\n.el-button {\n  &:hover, &:focus {\n    color: var(--morandiTeal);\n    border-color: var(--morandiLightBlue);\n    background-color: var(--morandiBg);\n  }\n}\n\n/* 表单控件 */\n.el-input:focus, .el-textarea:focus {\n  border-color: var(--morandiTeal);\n}\n\n/* 上传组件 */\n.upload-preview {\n  border: 2px solid var(--morandiLightBlue);\n  \n  &:hover {\n    border-color: var(--morandiTeal);\n  }\n}\n\n/* 复选框和单选框 */\n.el-checkbox__input.is-checked .el-checkbox__inner,\n.el-radio__input.is-checked .el-radio__inner {\n  background-color: var(--morandiTeal);\n  border-color: var(--morandiTeal);\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}