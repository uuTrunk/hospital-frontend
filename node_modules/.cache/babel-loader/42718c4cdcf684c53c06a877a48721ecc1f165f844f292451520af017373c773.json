{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nexport default {\n  name: 'HealthRecordView',\n  data() {\n    return {\n      searchText: '',\n      startDate: '',\n      endDate: '',\n      currentPage: 1,\n      pageSize: 10,\n      patients: [{\n        id: 1,\n        name: '李大哥',\n        idNumber: '310106194805162428',\n        gender: '男',\n        age: 78,\n        admissionNo: '210124',\n        admissionDate: '2024-05-22',\n        roomNumber: '2022-01',\n        hasRecord: false,\n        recordTime: null,\n        doctor: null\n      }, {\n        id: 2,\n        name: '王大娘',\n        idNumber: '310106194805162428',\n        gender: '女',\n        age: 98,\n        admissionNo: '210124',\n        admissionDate: '2024-05-18',\n        roomNumber: '2024-02',\n        hasRecord: true,\n        recordTime: '2024-05-18 12:18',\n        doctor: '张医生'\n      }, {\n        id: 3,\n        name: '宋老博',\n        idNumber: '310106194805162428',\n        gender: '男',\n        age: 89,\n        admissionNo: '210124',\n        admissionDate: '2024-05-12',\n        roomNumber: '3000-02',\n        hasRecord: true,\n        recordTime: '2024-05-18 12:18',\n        doctor: 'XXXX'\n      }]\n    };\n  },\n  computed: {\n    totalPatients() {\n      return this.patients.length;\n    },\n    pendingRecords() {\n      return this.patients.filter(p => !p.hasRecord).length;\n    },\n    totalPages() {\n      return Math.ceil(this.patients.length / this.pageSize);\n    },\n    displayPageNumbers() {\n      const pages = [];\n      const maxVisible = 5;\n      if (this.totalPages <= maxVisible) {\n        for (let i = 1; i <= this.totalPages; i++) {\n          pages.push(i);\n        }\n      } else {\n        // Display current page and surrounding pages\n        let startPage = Math.max(1, this.currentPage - Math.floor(maxVisible / 2));\n        let endPage = Math.min(this.totalPages, startPage + maxVisible - 1);\n\n        // Adjust if we're near the end\n        if (endPage - startPage + 1 < maxVisible) {\n          startPage = Math.max(1, endPage - maxVisible + 1);\n        }\n        for (let i = startPage; i <= endPage; i++) {\n          pages.push(i);\n        }\n      }\n      return pages;\n    }\n  },\n  methods: {\n    searchPatients() {\n      // 实现搜索逻辑\n      console.log('搜索长者:', this.searchText);\n    },\n    viewHistory() {\n      // 查看历史档案\n      console.log('查看历史档案');\n    },\n    viewRecord(patient) {\n      if (patient.hasRecord) {\n        // 如果已有档案，跳转到查看页面，默认显示医嘱管理标签\n        this.$router.push({\n          path: `/health-record/create/${patient.id}`,\n          query: {\n            tab: 'medical'\n          }\n        });\n      } else {\n        // 如果未建档，跳转到创建页面\n        this.$router.push(`/health-record/create/${patient.id}`);\n      }\n    },\n    prevPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    goToPage(page) {\n      this.currentPage = page;\n    },\n    updatePageSize() {\n      this.currentPage = 1; // 重置为第一页\n    }\n  }\n};","map":{"version":3,"names":["name","data","searchText","startDate","endDate","currentPage","pageSize","patients","id","idNumber","gender","age","admissionNo","admissionDate","roomNumber","hasRecord","recordTime","doctor","computed","totalPatients","length","pendingRecords","filter","p","totalPages","Math","ceil","displayPageNumbers","pages","maxVisible","i","push","startPage","max","floor","endPage","min","methods","searchPatients","console","log","viewHistory","viewRecord","patient","$router","path","query","tab","prevPage","nextPage","goToPage","page","updatePageSize"],"sources":["src/views/HealthRecord.vue"],"sourcesContent":["<template>\r\n  <div class=\"health-record\">\r\n    <div class=\"filter-area\">\r\n      <div class=\"date-filter\">\r\n        <span>建档日期</span>\r\n        <input type=\"date\" class=\"date-input\" v-model=\"startDate\" />\r\n        <span>-</span>\r\n        <input type=\"date\" class=\"date-input\" v-model=\"endDate\" />\r\n      </div>\r\n      <div class=\"search-box\">\r\n        <input type=\"text\" class=\"search-input\" v-model=\"searchText\" placeholder=\"姓名/入院编号\" />\r\n        <button class=\"search-btn\" @click=\"searchPatients\">\r\n          <i class=\"icon-search\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"stats-area\">\r\n      <div class=\"stat-item\">\r\n        <span>入住长者 {{ totalPatients }}</span>\r\n      </div>\r\n      <div class=\"stat-item highlighted\">\r\n        <span>待建档 {{ pendingRecords }}</span>\r\n      </div>\r\n      <div class=\"history-btn\" @click=\"viewHistory\">\r\n        <i class=\"icon-history\"></i>\r\n        <span>历史档案</span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"table-wrapper\">\r\n      <table class=\"data-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>姓名/身份证</th>\r\n            <th>性别</th>\r\n            <th>年龄</th>\r\n            <th>入院编号</th>\r\n            <th>入院日期</th>\r\n            <th>房间床位</th>\r\n            <th>建档时间</th>\r\n            <th>建档医生</th>\r\n            <th>操作</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"patient in patients\" :key=\"patient.id\">\r\n            <td>\r\n              <div class=\"patient-avatar\">{{ patient.name.charAt(0) }}</div>\r\n              <div class=\"patient-name\">\r\n                {{ patient.name }}\r\n                <div class=\"id-number\">{{ patient.idNumber }}</div>\r\n              </div>\r\n            </td>\r\n            <td>{{ patient.gender }}</td>\r\n            <td>{{ patient.age }}</td>\r\n            <td>{{ patient.admissionNo }}</td>\r\n            <td>{{ patient.admissionDate }}</td>\r\n            <td>{{ patient.roomNumber }}</td>\r\n            <td>\r\n              <span :class=\"{'pending-record': !patient.hasRecord}\">\r\n                {{ patient.recordTime || '待完善' }}\r\n              </span>\r\n            </td>\r\n            <td>{{ patient.doctor || '-' }}</td>\r\n            <td>\r\n              <div class=\"action-btns\">\r\n                <button class=\"view-btn\" @click=\"viewRecord(patient)\">\r\n                  <i class=\"icon-view\"></i>\r\n                </button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <div class=\"pagination\">\r\n      <button class=\"page-btn\" @click=\"prevPage\" :disabled=\"currentPage === 1\">\r\n        <i class=\"icon-prev\"></i>\r\n      </button>\r\n      <div class=\"page-numbers\">\r\n        <div \r\n          v-for=\"page in displayPageNumbers\" \r\n          :key=\"page\" \r\n          :class=\"['page-number', { active: currentPage === page }]\"\r\n          @click=\"goToPage(page)\"\r\n        >\r\n          {{ page }}\r\n        </div>\r\n      </div>\r\n      <button class=\"page-btn\" @click=\"nextPage\" :disabled=\"currentPage === totalPages\">\r\n        <i class=\"icon-next\"></i>\r\n      </button>\r\n      <div class=\"page-size-selector\">\r\n        <select v-model=\"pageSize\" @change=\"updatePageSize\">\r\n          <option :value=\"10\">10条/页</option>\r\n          <option :value=\"20\">20条/页</option>\r\n          <option :value=\"50\">50条/页</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'HealthRecordView',\r\n  data() {\r\n    return {\r\n      searchText: '',\r\n      startDate: '',\r\n      endDate: '',\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      patients: [\r\n        {\r\n          id: 1,\r\n          name: '李大哥',\r\n          idNumber: '310106194805162428',\r\n          gender: '男',\r\n          age: 78,\r\n          admissionNo: '210124',\r\n          admissionDate: '2024-05-22',\r\n          roomNumber: '2022-01',\r\n          hasRecord: false,\r\n          recordTime: null,\r\n          doctor: null\r\n        },\r\n        {\r\n          id: 2,\r\n          name: '王大娘',\r\n          idNumber: '310106194805162428',\r\n          gender: '女',\r\n          age: 98,\r\n          admissionNo: '210124',\r\n          admissionDate: '2024-05-18',\r\n          roomNumber: '2024-02',\r\n          hasRecord: true,\r\n          recordTime: '2024-05-18 12:18',\r\n          doctor: '张医生'\r\n        },\r\n        {\r\n          id: 3,\r\n          name: '宋老博',\r\n          idNumber: '310106194805162428',\r\n          gender: '男',\r\n          age: 89,\r\n          admissionNo: '210124',\r\n          admissionDate: '2024-05-12',\r\n          roomNumber: '3000-02',\r\n          hasRecord: true,\r\n          recordTime: '2024-05-18 12:18',\r\n          doctor: 'XXXX'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    totalPatients() {\r\n      return this.patients.length;\r\n    },\r\n    pendingRecords() {\r\n      return this.patients.filter(p => !p.hasRecord).length;\r\n    },\r\n    totalPages() {\r\n      return Math.ceil(this.patients.length / this.pageSize);\r\n    },\r\n    displayPageNumbers() {\r\n      const pages = [];\r\n      const maxVisible = 5;\r\n      \r\n      if (this.totalPages <= maxVisible) {\r\n        for (let i = 1; i <= this.totalPages; i++) {\r\n          pages.push(i);\r\n        }\r\n      } else {\r\n        // Display current page and surrounding pages\r\n        let startPage = Math.max(1, this.currentPage - Math.floor(maxVisible / 2));\r\n        let endPage = Math.min(this.totalPages, startPage + maxVisible - 1);\r\n        \r\n        // Adjust if we're near the end\r\n        if (endPage - startPage + 1 < maxVisible) {\r\n          startPage = Math.max(1, endPage - maxVisible + 1);\r\n        }\r\n        \r\n        for (let i = startPage; i <= endPage; i++) {\r\n          pages.push(i);\r\n        }\r\n      }\r\n      \r\n      return pages;\r\n    }\r\n  },\r\n  methods: {\r\n    searchPatients() {\r\n      // 实现搜索逻辑\r\n      console.log('搜索长者:', this.searchText);\r\n    },\r\n    viewHistory() {\r\n      // 查看历史档案\r\n      console.log('查看历史档案');\r\n    },\r\n    viewRecord(patient) {\r\n      if (patient.hasRecord) {\r\n        // 如果已有档案，跳转到查看页面，默认显示医嘱管理标签\r\n        this.$router.push({\r\n          path: `/health-record/create/${patient.id}`,\r\n          query: { tab: 'medical' }\r\n        });\r\n      } else {\r\n        // 如果未建档，跳转到创建页面\r\n        this.$router.push(`/health-record/create/${patient.id}`);\r\n      }\r\n    },\r\n    prevPage() {\r\n      if (this.currentPage > 1) {\r\n        this.currentPage--;\r\n      }\r\n    },\r\n    nextPage() {\r\n      if (this.currentPage < this.totalPages) {\r\n        this.currentPage++;\r\n      }\r\n    },\r\n    goToPage(page) {\r\n      this.currentPage = page;\r\n    },\r\n    updatePageSize() {\r\n      this.currentPage = 1; // 重置为第一页\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.health-record {\r\n  background-color: white;\r\n  border-radius: 4px;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n}\r\n\r\n/* 筛选区域样式 */\r\n.filter-area {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.date-filter {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.date-filter span {\r\n  margin: 0 5px;\r\n  color: #666;\r\n}\r\n\r\n.date-input {\r\n  padding: 6px 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 13px;\r\n}\r\n\r\n.search-box {\r\n  display: flex;\r\n}\r\n\r\n.search-input {\r\n  width: 200px;\r\n  padding: 6px 10px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 13px;\r\n}\r\n\r\n.search-btn {\r\n  width: 32px;\r\n  height: 32px;\r\n  background-color: #2196f3;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  margin-left: 5px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.icon-search:before {\r\n  content: \"🔍\";\r\n  font-size: 14px;\r\n}\r\n\r\n/* 统计区域样式 */\r\n.stats-area {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.stat-item {\r\n  margin-right: 20px;\r\n  font-size: 14px;\r\n}\r\n\r\n.stat-item.highlighted span {\r\n  color: #f44336;\r\n  font-weight: bold;\r\n}\r\n\r\n.history-btn {\r\n  margin-left: auto;\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: #f5f5f5;\r\n  padding: 6px 12px;\r\n  border-radius: 4px;\r\n  font-size: 13px;\r\n  cursor: pointer;\r\n}\r\n\r\n.history-btn:hover {\r\n  background-color: #e0e0e0;\r\n}\r\n\r\n.icon-history:before {\r\n  content: \"🕒\";\r\n  margin-right: 5px;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 表格样式 */\r\n.table-wrapper {\r\n  overflow-x: auto;\r\n}\r\n\r\n.data-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  text-align: center;\r\n}\r\n\r\n.data-table th {\r\n  background-color: #f5f5f5;\r\n  padding: 10px;\r\n  font-weight: normal;\r\n  color: #666;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.data-table td {\r\n  padding: 12px 10px;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  color: #333;\r\n}\r\n\r\n.patient-avatar {\r\n  width: 28px;\r\n  height: 28px;\r\n  border-radius: 50%;\r\n  background-color: #bbb;\r\n  color: white;\r\n  display: inline-flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  margin-right: 10px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.patient-name {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  text-align: left;\r\n}\r\n\r\n.id-number {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-top: 4px;\r\n}\r\n\r\n.pending-record {\r\n  color: #f44336;\r\n}\r\n\r\n.action-btns {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 5px;\r\n}\r\n\r\n.view-btn {\r\n  width: 30px;\r\n  height: 30px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  background-color: #f0f0f0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.view-btn:hover {\r\n  background-color: #e0e0e0;\r\n}\r\n\r\n.icon-view:before {\r\n  content: \"👁️\";\r\n  font-size: 12px;\r\n}\r\n\r\n/* 分页样式 */\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.page-btn {\r\n  width: 30px;\r\n  height: 30px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  background-color: white;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.page-btn:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.page-btn:disabled {\r\n  cursor: not-allowed;\r\n  opacity: 0.5;\r\n}\r\n\r\n.page-numbers {\r\n  display: flex;\r\n  margin: 0 10px;\r\n}\r\n\r\n.page-number {\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 0 2px;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n}\r\n\r\n.page-number:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.page-number.active {\r\n  background-color: #2196f3;\r\n  color: white;\r\n}\r\n\r\n.page-size-selector {\r\n  margin-left: 15px;\r\n}\r\n\r\n.page-size-selector select {\r\n  padding: 5px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  background-color: white;\r\n}\r\n\r\n.icon-prev:before {\r\n  content: \"<\";\r\n}\r\n\r\n.icon-next:before {\r\n  content: \">\";\r\n}\r\n</style> "],"mappings":";;;AA0GA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,UAAA;MACAC,SAAA;MACAC,OAAA;MACAC,WAAA;MACAC,QAAA;MACAC,QAAA,GACA;QACAC,EAAA;QACAR,IAAA;QACAS,QAAA;QACAC,MAAA;QACAC,GAAA;QACAC,WAAA;QACAC,aAAA;QACAC,UAAA;QACAC,SAAA;QACAC,UAAA;QACAC,MAAA;MACA,GACA;QACAT,EAAA;QACAR,IAAA;QACAS,QAAA;QACAC,MAAA;QACAC,GAAA;QACAC,WAAA;QACAC,aAAA;QACAC,UAAA;QACAC,SAAA;QACAC,UAAA;QACAC,MAAA;MACA,GACA;QACAT,EAAA;QACAR,IAAA;QACAS,QAAA;QACAC,MAAA;QACAC,GAAA;QACAC,WAAA;QACAC,aAAA;QACAC,UAAA;QACAC,SAAA;QACAC,UAAA;QACAC,MAAA;MACA;IAEA;EACA;EACAC,QAAA;IACAC,cAAA;MACA,YAAAZ,QAAA,CAAAa,MAAA;IACA;IACAC,eAAA;MACA,YAAAd,QAAA,CAAAe,MAAA,CAAAC,CAAA,KAAAA,CAAA,CAAAR,SAAA,EAAAK,MAAA;IACA;IACAI,WAAA;MACA,OAAAC,IAAA,CAAAC,IAAA,MAAAnB,QAAA,CAAAa,MAAA,QAAAd,QAAA;IACA;IACAqB,mBAAA;MACA,MAAAC,KAAA;MACA,MAAAC,UAAA;MAEA,SAAAL,UAAA,IAAAK,UAAA;QACA,SAAAC,CAAA,MAAAA,CAAA,SAAAN,UAAA,EAAAM,CAAA;UACAF,KAAA,CAAAG,IAAA,CAAAD,CAAA;QACA;MACA;QACA;QACA,IAAAE,SAAA,GAAAP,IAAA,CAAAQ,GAAA,SAAA5B,WAAA,GAAAoB,IAAA,CAAAS,KAAA,CAAAL,UAAA;QACA,IAAAM,OAAA,GAAAV,IAAA,CAAAW,GAAA,MAAAZ,UAAA,EAAAQ,SAAA,GAAAH,UAAA;;QAEA;QACA,IAAAM,OAAA,GAAAH,SAAA,OAAAH,UAAA;UACAG,SAAA,GAAAP,IAAA,CAAAQ,GAAA,IAAAE,OAAA,GAAAN,UAAA;QACA;QAEA,SAAAC,CAAA,GAAAE,SAAA,EAAAF,CAAA,IAAAK,OAAA,EAAAL,CAAA;UACAF,KAAA,CAAAG,IAAA,CAAAD,CAAA;QACA;MACA;MAEA,OAAAF,KAAA;IACA;EACA;EACAS,OAAA;IACAC,eAAA;MACA;MACAC,OAAA,CAAAC,GAAA,eAAAtC,UAAA;IACA;IACAuC,YAAA;MACA;MACAF,OAAA,CAAAC,GAAA;IACA;IACAE,WAAAC,OAAA;MACA,IAAAA,OAAA,CAAA5B,SAAA;QACA;QACA,KAAA6B,OAAA,CAAAb,IAAA;UACAc,IAAA,2BAAAF,OAAA,CAAAnC,EAAA;UACAsC,KAAA;YAAAC,GAAA;UAAA;QACA;MACA;QACA;QACA,KAAAH,OAAA,CAAAb,IAAA,0BAAAY,OAAA,CAAAnC,EAAA;MACA;IACA;IACAwC,SAAA;MACA,SAAA3C,WAAA;QACA,KAAAA,WAAA;MACA;IACA;IACA4C,SAAA;MACA,SAAA5C,WAAA,QAAAmB,UAAA;QACA,KAAAnB,WAAA;MACA;IACA;IACA6C,SAAAC,IAAA;MACA,KAAA9C,WAAA,GAAA8C,IAAA;IACA;IACAC,eAAA;MACA,KAAA/C,WAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}